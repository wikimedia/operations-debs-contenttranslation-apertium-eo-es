<?xml version="1.0"?> <!-- -*- nxml -*- -->
<transfer default="chunk">
  <section-def-cats>
    <def-cat n="nom">
      <cat-item tags="n.*"/> <!--Falten els altres np (antroponims) que tenen gen i nbr, revisar regles.-->
      <cat-item tags="np.loc.*"/>
      <cat-item tags="np.al.*"/>
    </def-cat>

    <def-cat n="ant">
      <cat-item tags="np.ant.*"/>
      <cat-item tags="np.cog.*"/>
    </def-cat>

     <def-cat n="antunk">
      <cat-item tags="np.ant.*"/>
      <cat-item tags="np.cog.*"/>
      <cat-item tags=""/>
    </def-cat>

     <def-cat n="Saint">
      <cat-item lemma="saint" tags="adj.*"/>
      <cat-item lemma="Saint" tags="np.loc.*"/>
      <cat-item lemma="Sainte" tags="np.loc.*"/>
      <cat-item lemma="St" tags="np.loc.*"/>
      <cat-item lemma="Ste" tags="np.loc.*"/>
    </def-cat>

     <def-cat n="npunk">
      <cat-item tags="np.ant.*"/>
      <cat-item tags="np.cog.*"/>
      <cat-item tags="np.loc.*"/>
      <cat-item tags=""/>
    </def-cat>

    <def-cat n="acr">
      <cat-item tags="n.acr.*"/>
    </def-cat>

    <def-cat n="any">
      <cat-item tags="prep"/>
      <cat-item tags="det.*"/>
      <cat-item tags=""/>
    </def-cat>

     <def-cat n="loc">
      <cat-item tags="np.loc.*"/>
    </def-cat>

    <def-cat n="sent">
       <cat-item tags="sent"/>
    </def-cat>

    <def-cat n="sent_coma">
       <cat-item tags="cm"/><!-- provem amb la coma EO, per a poder tractar el pro-drop-->
    </def-cat>

    <def-cat n="guio">
       <cat-item tags="guio"/>
    </def-cat>

    <def-cat n="guiocnjcoo">
       <cat-item tags="guio"/>
       <cat-item lemma="y" tags="cnjcoo"/>
       <cat-item lemma="o" tags="cnjcoo"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.geradj.*"/>
    </def-cat>

    <def-cat n="adjfsg">
      <cat-item tags="adj.f.sg"/>
      <cat-item tags="adj.mf.sg"/>
      <cat-item tags="vblex.pp.f.sg"/>
      <cat-item tags="vblex.pp.mf.sg"/>
    </def-cat>

    <def-cat n="adjADJ"> <!-- únicament adjs, no pp -->
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>

    <def-cat n="mismo">
       <cat-item lemma="mismo" tags="adj.*"/>
    </def-cat>

    <def-cat n="unknown"> <!-- unknown words -->
      <cat-item tags=""/>
    </def-cat>

    <def-cat n="el">
      <cat-item lemma="el" tags="det.*"/>
    </def-cat>

    <def-cat n="el_det_ms">
      <cat-item lemma="el" tags="det.def.m.sg"/>
    </def-cat>

    <def-cat n="un">
      <cat-item lemma="uno" tags="det.ind.*.*"/>
    </def-cat>
    <def-cat n="un_sg">
      <cat-item lemma="uno" tags="det.ind.*.sg"/>
    </def-cat>
    <def-cat n="un_pl">
      <cat-item lemma="uno" tags="det.ind.*.pl"/>
    </def-cat>

   <def-cat n="det"><!--Determinants i predeterminants, van anteposats -->
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="predet.*"/>
      <cat-item tags="num.*"/>
    </def-cat>

   <def-cat n="dem">
      <cat-item tags="det.dem.*"/>
    </def-cat>
   <def-cat n="def">
      <cat-item tags="det.def.*"/>
    </def-cat>
   <def-cat n="qnt">
      <cat-item tags="det.qnt.*"/>
    </def-cat>
   <def-cat n="tot">
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="predet.*"/><!--EOes todo-->
    </def-cat>

    <def-cat n="num">
      <cat-item tags="num"/>
      <cat-item tags="num.*"/>
    </def-cat>

    <def-cat n="num_dato">
      <cat-item lemma="1" tags="num.*"/>
      <cat-item lemma="2" tags="num.*"/>
      <cat-item lemma="3" tags="num.*"/>
      <cat-item lemma="4" tags="num.*"/>
      <cat-item lemma="5" tags="num.*"/>
      <cat-item lemma="6" tags="num.*"/>
      <cat-item lemma="7" tags="num.*"/>
      <cat-item lemma="8" tags="num.*"/>
      <cat-item lemma="9" tags="num.*"/>
      <cat-item lemma="10" tags="num.*"/>
      <cat-item lemma="11" tags="num.*"/>
      <cat-item lemma="12" tags="num.*"/>
      <cat-item lemma="13" tags="num.*"/>
      <cat-item lemma="14" tags="num.*"/>
      <cat-item lemma="15" tags="num.*"/>
      <cat-item lemma="16" tags="num.*"/>
      <cat-item lemma="17" tags="num.*"/>
      <cat-item lemma="18" tags="num.*"/>
      <cat-item lemma="19" tags="num.*"/>
      <cat-item lemma="20" tags="num.*"/>
      <cat-item lemma="21" tags="num.*"/>
      <cat-item lemma="22" tags="num.*"/>
      <cat-item lemma="23" tags="num.*"/>
      <cat-item lemma="24" tags="num.*"/>
      <cat-item lemma="25" tags="num.*"/>
      <cat-item lemma="26" tags="num.*"/>
      <cat-item lemma="27" tags="num.*"/>
      <cat-item lemma="28" tags="num.*"/>
      <cat-item lemma="29" tags="num.*"/>
      <cat-item lemma="30" tags="num.*"/>
      <cat-item lemma="31" tags="num.*"/>
    </def-cat>

    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>

    <def-cat n="verbprep_para"> <!-- exclusivamente para el tagger para-->
      <cat-item lemma="parar" tags="vblex.pri.p3.sg"/>
    </def-cat>

    <def-cat n="prpers">
      <cat-item lemma="prpers" tags="prn.*"/>
    </def-cat>

    <def-cat n="si_mismo">
      <cat-item lemma="sí mismo" tags="prn.*"/>
    </def-cat>

    <def-cat n="tn"><!--EO indefinits i companyia sense gènere al EO-->
      <cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>
    </def-cat>

    <def-cat n="tn_itg_pos"><!--Aquí no hi entren els pronoms personals, caldrà fer-ne un xunc a part. -->
      <!--<cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>-->
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="prn.pos.*"/>
      <!--<cat-item tags="prn.tn.*"/>-->
    </def-cat>

    <def-cat n="pos"><!-- pel tagger-->
      <cat-item tags="prn.pos.*"/>
    </def-cat>

    <def-cat n="proenc">
      <!--<cat-item tags="prn.enc.*"/>
      <cat-item tags="prn.pro.*"/>-->
      <cat-item lemma="prpers" tags="prn.enc.*"/>
      <cat-item lemma="prpers" tags="prn.pro.*"/>
      <cat-item lemma="se" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="profort"> <!-- ver regla PRO_FUERTE...-->
      <cat-item lemma="prpers_fort" tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="relatiu"> <!-- EO-->
      <cat-item tags="prn.rel.*"/>
      <cat-item tags="rel.*"/><!-- EOes-->
    </def-cat>

    <def-cat n="relatiu_prep"> <!-- EO-->
      <cat-item tags="rel.*"/>
    </def-cat>

    <def-cat n="enc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="pro">
      <cat-item tags="prn.pro.*"/>
      <cat-item tags="prn.tn.ref.*"/>
      <cat-item lemma="lo" tags="prn.tn.*"/>
      <cat-item lemma="sí" tags="prn.tn.*"/>
      <cat-item lemma="sí mismo" tags="prn.tn.*"/>
    </def-cat>

    <def-cat n="lo_det">
      <cat-item lemma="lo" tags="prn.tn.*"/>
    </def-cat>

    <def-cat n="prnref">
      <cat-item tags="prn.pro.ref.*"/>
      <cat-item tags="prn.tn.ref.*"/>
    </def-cat>

    <def-cat n="pro-noref">
      <cat-item tags="prn.pro.p1.*"/>
      <cat-item tags="prn.pro.p2.*"/>
      <cat-item tags="prn.pro.p3.*"/>
    </def-cat>

    <def-cat n="verbnm_inf_ger"><!--verb no modal, infinitiu i gerundi -->
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbser.pron.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbhaver.pron.inf"/>
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbser.pron.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbhaver.pron.ger"/>
    </def-cat>

    <def-cat n="verbnm_imp"><!--verb no modal, imperatiu -->
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pron.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pron.imp.*"/>
    </def-cat>

    <def-cat n="verbm"><!--verb modal -->
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="inf_ger_imp">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.imp.*"/>
    </def-cat>

    <def-cat n="verbm_inf_ger"><!--verb modal, infinitiu o gerundi -->
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="haber">
      <cat-item tags="vbhaver.*"/>
      <cat-item lemma="haya" tags="n.f.sg"/> <!-- EOes cosas del tagger 'haya ido'-->
    </def-cat>

    <def-cat n="haber_inf">
      <cat-item tags="vbhaver.inf"/>
    </def-cat>

    <def-cat n="ser-pp">
      <cat-item lemma="ser" tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="verbcj">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.fts.*"/><!-- EOes-->
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.fts.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.fts.*"/><!-- EOes-->
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>

    <def-cat n="verb">
      <cat-item tags="vblex.*.*.*"/>
    </def-cat>

    <def-cat n="verbcj2">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.fts.*"/><!-- EOes-->
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.pron.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/><!--ATENCIÓ: CANVI -->
    </def-cat>

    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="adv_cnjadv">
      <cat-item tags="adv"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>

    <def-cat n="preadv">
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="advment">
      <cat-item tags="adv.ment"/>
    </def-cat>

    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>

    <def-cat n="mas">
      <cat-item lemma="más" tags="adv"/>
      <cat-item lemma="más" tags="preadv"/>
      <cat-item lemma="más" tags="det.qnt.*"/><!-- pel tagger-->
      <cat-item lemma="menos" tags="adv"/>
      <cat-item lemma="menos" tags="preadv"/>
      <cat-item lemma="menos" tags="det.qnt.*"/><!-- pel tagger-->
      <cat-item lemma="mucho más" tags="adv"/>
      <cat-item lemma="mucho menos" tags="adv"/>
    </def-cat>

    <def-cat n="mejor">
      <cat-item lemma="mejor" tags="adj.*"/>
      <cat-item lemma="peor" tags="adj.*"/>
      <cat-item lemma="mayor" tags="adj.*"/>
      <cat-item lemma="menor" tags="adj.*"/>
    </def-cat>

    <def-cat n="mejor_muchomejor_adj">
      <cat-item lemma="mejor" tags="adj.*"/>
      <cat-item lemma="peor" tags="adj.*"/>
      <cat-item lemma="mayor" tags="adj.*"/>
      <cat-item lemma="menor" tags="adj.*"/>
      <cat-item lemma="mucho mejor" tags="adj.*"/>
      <cat-item lemma="mucho peor" tags="adj.*"/>
      <cat-item lemma="mucho mayor" tags="adj.*"/>
      <cat-item lemma="mucho menor" tags="adj.*"/>
    </def-cat>

    <def-cat n="mejor_muchomejor_adv">
      <cat-item lemma="mejor" tags="adv"/>
      <cat-item lemma="peor" tags="adv"/>
      <cat-item lemma="mayor" tags="adv"/>
      <cat-item lemma="menor" tags="adv"/>
      <cat-item lemma="mucho mejor" tags="adv"/>
      <cat-item lemma="mucho peor" tags="adv"/>
      <cat-item lemma="mucho mayor" tags="adv"/>
      <cat-item lemma="mucho menor" tags="adv"/>
    </def-cat>

    <def-cat n="no">
      <cat-item lemma="no" tags="adv"/>
    </def-cat>

    <def-cat n="advneg">
      <cat-item lemma="nunca" tags="adv"/>
      <cat-item lemma="jamás" tags="adv"/>
    </def-cat>

    <def-cat n="pronneg">
      <cat-item lemma="nada" tags="prn.*"/>
      <cat-item lemma="nadie" tags="prn.*"/>
      <cat-item lemma="ninguno" tags="prn.*"/>
    </def-cat>

    <def-cat n="nada">
      <cat-item lemma="nada" tags="prn.*"/>
    </def-cat>

    <def-cat n="nadie">
      <cat-item lemma="nadie" tags="prn.*"/>
    </def-cat>

    <def-cat n="adv_da">
      <cat-item lemma="bastante" tags="adv"/>
      <cat-item lemma="bastante" tags="adj.*"/>
      <cat-item lemma="mucho" tags="adv"/>
<!--  <cat-item lemma="mucho" tags="det.qnt.*"/> -->
      <cat-item lemma="poco" tags="adv"/>
<!--  <cat-item lemma="poco" tags="det.qnt.*"/> -->
      <cat-item lemma="demasiado" tags="adv"/>
      <cat-item lemma="demasiado" tags="adj.*"/>
      <cat-item lemma="demasiado poco" tags="adv"/>
      <cat-item lemma="demasiado poco" tags="adj.*"/>
      <cat-item lemma="tanto" tags="adj.*"/>
    </def-cat>

    <def-cat n="cnjcoo">
      <cat-item lemma="y" tags="cnjcoo"/>
      <cat-item lemma="o" tags="cnjcoo"/>
      <cat-item lemma="pero" tags="cnjcoo"/>
    </def-cat>

     <def-cat n="cnjcoopercorregir"> <!-- EO afegit per a corregir errors del tagger, veure regles-->
      <cat-item lemma="que" tags="prn.rel.*"/>
    </def-cat>

     <def-cat n="cnjcoopercorregir2"> <!-- EO afegit per a corregir errors del tagger, veure regles-->
      <cat-item lemma="que" tags="prn.rel.*"/>
      <cat-item tags="cnjsub"/>
    </def-cat>

     <def-cat n="cnj">
      <cat-item tags="cnjcoo"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="cnjadv"/>
    </def-cat>
     <def-cat n="cnjcorregir"><!-- EOes -->
      <cat-item lemma="que" tags="cnjcoo"/>
      <cat-item lemma="que" tags="cnjsub"/>
      <cat-item lemma="que" tags="prn.rel.*"/> <!-- coses del tagger... -->
      <cat-item lemma="que" tags="cnjadv"/>
    </def-cat>

     <def-cat n="ij">
      <cat-item tags="ij"/>
    </def-cat>

    <def-cat n="forma_manera">
      <cat-item lemma="forma" tags="n.*"/>
      <cat-item lemma="manera" tags="n.*"/>
    </def-cat>

    <def-cat n="n_temps">
      <cat-item lemma="segundo" tags="n.*"/>
      <cat-item lemma="minuto" tags="n.*"/>
      <cat-item lemma="hora" tags="n.*"/>
      <cat-item lemma="día" tags="n.*"/>
      <cat-item lemma="semana" tags="n.*"/>
      <cat-item lemma="mes" tags="n.*"/>
      <cat-item lemma="trimestre" tags="n.*"/>
      <cat-item lemma="semestre" tags="n.*"/>
      <cat-item lemma="año" tags="n.*"/>
      <cat-item lemma="década" tags="n.*"/>
      <cat-item lemma="siglo" tags="n.*"/>
      <cat-item lemma="milenio" tags="n.*"/>
      <cat-item lemma="tiempo" tags="n.*"/>
    </def-cat>

    <def-cat n="n_temps_pl">
      <cat-item lemma="segundo" tags="n.*.pl"/>
      <cat-item lemma="minuto" tags="n.*.pl"/>
      <cat-item lemma="hora" tags="n.*.pl"/>
      <cat-item lemma="día" tags="n.*.pl"/>
      <cat-item lemma="semana" tags="n.*.pl"/>
      <cat-item lemma="mes" tags="n.*.pl"/>
      <cat-item lemma="trimestre" tags="n.*.pl"/>
      <cat-item lemma="semestre" tags="n.*.pl"/>
      <cat-item lemma="año" tags="n.*.pl"/>
      <cat-item lemma="década" tags="n.*.pl"/>
      <cat-item lemma="siglo" tags="n.*.pl"/>
      <cat-item lemma="milenio" tags="n.*.pl"/>
    </def-cat>

    <def-cat n="nom_da"> <!-- nomoj postulantaj "da" -->
      <cat-item lemma="multitud" tags="n.*"/>
      <cat-item lemma="par" tags="n.*"/>
      <cat-item lemma="decena" tags="n.*"/>
      <cat-item lemma="docena" tags="n.*"/>
      <cat-item lemma="quincena" tags="n.*"/>
      <cat-item lemma="veintena" tags="n.*"/>
      <cat-item lemma="treintena" tags="n.*"/>
      <cat-item lemma="trentena" tags="n.*"/>
      <cat-item lemma="cuarentena" tags="n.*"/>
      <cat-item lemma="cincuentena" tags="n.*"/>
      <cat-item lemma="centenar" tags="n.*"/>
      <cat-item lemma="millar" tags="n.*"/>
      <cat-item lemma="millón" tags="n.*"/>
      <cat-item lemma="mil millones" tags="n.*"/>
      <cat-item lemma="millardo" tags="n.*"/>
      <cat-item lemma="billón" tags="n.*"/>
      <cat-item lemma="trillón" tags="n.*"/>
      <cat-item lemma="cientos" tags="n.*"/>
      <cat-item lemma="miles" tags="n.*"/>
      <cat-item lemma="cantidad" tags="n.*"/>
      <cat-item lemma="metro" tags="n.*"/>
      <cat-item lemma="decímetro" tags="n.*"/>
      <cat-item lemma="centímetro" tags="n.*"/>
      <cat-item lemma="milímetro" tags="n.*"/>
      <cat-item lemma="micra" tags="n.*"/>
      <cat-item lemma="decámetro" tags="n.*"/>
      <cat-item lemma="hectómetro" tags="n.*"/>
      <cat-item lemma="kilómetro" tags="n.*"/>
      <cat-item lemma="milla" tags="n.*"/>
      <cat-item lemma="año-luz" tags="n.*"/>
      <cat-item lemma="parsec" tags="n.*"/>
      <cat-item lemma="megaparsec" tags="n.*"/>
      <cat-item lemma="legua" tags="n.*"/>
      <cat-item lemma="hectárea" tags="n.*"/>
      <cat-item lemma="litro" tags="n.*"/>
      <cat-item lemma="decilitro" tags="n.*"/>
      <cat-item lemma="centilitro" tags="n.*"/>
      <cat-item lemma="mililitro" tags="n.*"/>
      <cat-item lemma="decalitro" tags="n.*"/>
      <cat-item lemma="hectolitro" tags="n.*"/>
      <cat-item lemma="gramo" tags="n.*"/>
      <cat-item lemma="decigramo" tags="n.*"/>
      <cat-item lemma="centigramo" tags="n.*"/>
      <cat-item lemma="miligramo" tags="n.*"/>
      <cat-item lemma="decagramo" tags="n.*"/>
      <cat-item lemma="hectogramo" tags="n.*"/>
      <cat-item lemma="kilogramo" tags="n.*"/>
      <cat-item lemma="quintal" tags="n.*"/>
      <cat-item lemma="tonelada" tags="n.*"/>
      <cat-item lemma="caloría" tags="n.*"/>
      <cat-item lemma="kilocaloría" tags="n.*"/>
      <cat-item lemma="vatio" tags="n.*"/>
      <cat-item lemma="kilovatio" tags="n.*"/>
      <cat-item lemma="megavatio" tags="n.*"/>
      <cat-item lemma="gigavatio" tags="n.*"/>
      <cat-item lemma="bit" tags="n.*"/>
      <cat-item lemma="kilobit" tags="n.*"/>
      <cat-item lemma="megabit" tags="n.*"/>
      <cat-item lemma="byte" tags="n.*"/>
      <cat-item lemma="kilobyte" tags="n.*"/>
      <cat-item lemma="megabyte" tags="n.*"/>
      <cat-item lemma="gigabyte" tags="n.*"/>
      <cat-item lemma="terabyte" tags="n.*"/>
      <cat-item lemma="mes" tags="n.*.pl"/>
      <cat-item lemma="año" tags="n.*.pl"/>
      <cat-item lemma="década" tags="n.*.pl"/>
      <cat-item lemma="siglo" tags="n.*.pl"/>
      <cat-item lemma="km²" tags="n.*"/>
      <cat-item lemma="m²" tags="n.*"/>
      <cat-item lemma="km" tags="n.*"/>
      <cat-item lemma="m" tags="n.*"/>
      <cat-item lemma="l" tags="n.*"/>
      <cat-item lemma="dl" tags="n.*"/>
      <cat-item lemma="cl" tags="n.*"/>
      <cat-item lemma="ml" tags="n.*"/>
      <cat-item lemma="kg" tags="n.*"/>
      <cat-item lemma="g" tags="n.*"/>
      <cat-item lemma="dg" tags="n.*"/>
      <cat-item lemma="cg" tags="n.*"/>
      <cat-item lemma="mg" tags="n.*"/>
      <cat-item lemma="cal" tags="n.*"/>
      <cat-item lemma="kcal" tags="n.*"/>
      <cat-item lemma="W" tags="n.*"/>
      <cat-item lemma="kW" tags="n.*"/>
      <cat-item lemma="MW" tags="n.*"/>
      <cat-item lemma="b" tags="n.*"/>
      <cat-item lemma="kb" tags="n.*"/>
      <cat-item lemma="Mb" tags="n.*"/>
      <cat-item lemma="B" tags="n.*"/>
      <cat-item lemma="KB" tags="n.*"/>
      <cat-item lemma="MB" tags="n.*"/>
      <cat-item lemma="GB" tags="n.*"/>
      <cat-item lemma="TB" tags="n.*"/>
    </def-cat>

    <def-cat n="nom_dist">
      <cat-item lemma="metro" tags="n.*"/>
      <cat-item lemma="decímetro" tags="n.*"/>
      <cat-item lemma="centímetro" tags="n.*"/>
      <cat-item lemma="milímetro" tags="n.*"/>
      <cat-item lemma="micra" tags="n.*"/>
      <cat-item lemma="decámetro" tags="n.*"/>
      <cat-item lemma="hectómetro" tags="n.*"/>
      <cat-item lemma="kilómetro" tags="n.*"/>
      <cat-item lemma="milla" tags="n.*"/>
      <cat-item lemma="año-luz" tags="n.*"/>
      <cat-item lemma="parsec" tags="n.*"/>
      <cat-item lemma="megaparsec" tags="n.*"/>
      <cat-item lemma="legua" tags="n.*"/>
      <cat-item lemma="altitud" tags="n.*"/>
    </def-cat>

    <def-cat n="por">
      <cat-item lemma="por" tags="pr"/>
    </def-cat>

    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>

    <def-cat n="a">
      <cat-item lemma="a" tags="pr"/>
    </def-cat>

    <def-cat n="a_de"> <!-- preposición entre verbo conjugado e infinitivo que cae -->
      <cat-item lemma="a" tags="pr"/>
      <cat-item lemma="de" tags="pr"/>
      <cat-item lemma="en" tags="pr"/>
      <cat-item lemma="de_pri" tags="pr"/>
    </def-cat>

    <def-cat n="de_von"> <!-- por familiaj nomoj -->
      <cat-item lemma="de" tags="pr"/>
      <cat-item lemma="von" tags="np.*"/>
      <cat-item lemma="ir" tags="vblex.pri.p3.pl"/> <!-- van -->
      <cat-item lemma="del" tags=""/>
      <cat-item lemma="dello" tags=""/>
      <cat-item lemma="della" tags=""/>
      <cat-item lemma="delli" tags=""/>
      <cat-item lemma="delle" tags=""/>
      <cat-item lemma="do" tags=""/>
      <cat-item lemma="da" tags=""/>
      <cat-item lemma="di" tags=""/>
      <cat-item lemma="du" tags=""/>
    </def-cat>

    <def-cat n="estarapuntode"> <!--EO perífrasi-->
      <cat-item lemma="estar# a punto de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="llegara">
      <cat-item lemma="llegar# a" tags="vblex.*"/>
    </def-cat>

    <def-cat n="venir">
      <cat-item lemma="venir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="seguir"> <!--EO perífrasi-->
      <cat-item lemma="seguir" tags="vblex.*"/>
      <cat-item lemma="continuar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="parecer"> <!--EO perífrasi-->
      <cat-item lemma="parecer" tags="vblex.*"/>
    </def-cat>

    <def-cat n="acabarde"> <!--EO perífrasi-->
      <cat-item lemma="acabar# de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="dejarde"> <!--EO perífrasi-->
      <cat-item lemma="dejar# de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="volver"> <!--EO perífrasi-->
      <cat-item lemma="volver" tags="vblex.*"/>
    </def-cat>

    <def-cat n="pasar">
      <cat-item lemma="pasar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="echar">
      <cat-item lemma="echar" tags="vblex.*"/>
      <cat-item lemma="poner" tags="vblex.*"/>
    </def-cat>

    <def-cat n="estar">
      <cat-item lemma="estar" tags="vbser.*"/>
    </def-cat>

    <def-cat n="estar-pp">
      <cat-item lemma="estar" tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="ir">
      <cat-item lemma="ir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="ir-pp">
      <cat-item lemma="ir" tags="vblex.pp.*"/>
    </def-cat>

<!--
    <def-cat n="deberde"> per a la perifrasi deber de  +  infinitiu (conjugat per no agafar el nom)
      <cat-item lemma="deber# de" tags="vblex.cni.*"/>
      <cat-item lemma="deber# de" tags="vblex.fti.*"/>
      <cat-item lemma="deber# de" tags="vblex.ifi.*"/>
      <cat-item lemma="deber# de" tags="vblex.imp.*"/>
      <cat-item lemma="deber# de" tags="vblex.pii.*"/>
      <cat-item lemma="deber# de" tags="vblex.pis.*"/>
      <cat-item lemma="deber# de" tags="vblex.pri.*"/>
      <cat-item lemma="deber# de" tags="vblex.prs.*"/>
    </def-cat>
-->

    <def-cat n="deber"> <!--EO per a la perifrasi deber de  +  infinitiu (conjugat per no agafar el nom)-->
      <cat-item lemma="deber" tags="vblex.cni.*"/>
      <cat-item lemma="deber" tags="vblex.fti.*"/>
      <cat-item lemma="deber" tags="vblex.ifi.*"/>
      <cat-item lemma="deber" tags="vblex.imp.*"/>
      <cat-item lemma="deber" tags="vblex.pii.*"/>
      <cat-item lemma="deber" tags="vblex.pis.*"/>
      <cat-item lemma="deber" tags="vblex.pri.*"/>
      <cat-item lemma="deber" tags="vblex.prs.*"/>
    </def-cat>

    <def-cat n="hayque"> <!--EO per a la perifrasi hay que +  infinitiu-->
      <cat-item lemma="haber# que" tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="hacer">
      <cat-item lemma="hacer" tags="vblex.*"/>
    </def-cat>

    <def-cat n="hacer-pp">
      <cat-item lemma="hacer" tags="vblex.pp.*"/>
    </def-cat>

    <def-cat n="hecho"> <!-- EO "fakto" en comptes de "farita" -->
      <cat-item lemma="hacer" tags="vblex.pp.m.sg"/>
    </def-cat>

    <def-cat n="monato">
      <cat-item lemma="enero" tags="n.m.sg"/>
      <cat-item lemma="febrero" tags="n.m.sg"/>
      <cat-item lemma="marzo" tags="n.m.sg"/>
      <cat-item lemma="abril" tags="n.m.sg"/>
      <cat-item lemma="mayo" tags="n.m.sg"/>
      <cat-item lemma="junio" tags="n.m.sg"/>
      <cat-item lemma="julio" tags="n.m.sg"/>
      <cat-item lemma="agosto" tags="n.m.sg"/>
      <cat-item lemma="septiembre" tags="n.m.sg"/>
      <cat-item lemma="octubre" tags="n.m.sg"/>
      <cat-item lemma="noviembre" tags="n.m.sg"/>
      <cat-item lemma="diciembre" tags="n.m.sg"/>
    </def-cat>

  </section-def-cats>

  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np.loc"/>
      <attr-item tags="np.ant"/>
      <attr-item tags="np.al"/>
    </def-attr>

    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_adj">
      <attr-item tags="adj"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="adj.sint.comp"/>
      <attr-item tags="adj.sint.sup"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.geradj"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbser.geradj"/>
      <attr-item tags="vbtr.pp"/>
      <attr-item tags="vbtr.geradj"/>
      <attr-item tags="vbntr.pp"/>
      <attr-item tags="vbntr.geradj"/>
      <attr-item tags="vbtr_ntr.pp"/>
      <attr-item tags="vbtr_ntr.geradj"/>
    </def-attr>

    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
      <attr-item tags="num.ciph"/>
      <attr-item tags="num.percent"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.ciph"/>
      <attr-item tags="num.percent"/>
    </def-attr>

    <def-attr n="a_verb2"> <!-- mirem si és pronominal a la macro tipus_verbs -->
      <attr-item tags="vblex"/>
      <attr-item tags="vblex.pron"/>
      <attr-item tags="vbtr"/>
      <attr-item tags="vbntr"/>
      <attr-item tags="vbtr_ntr"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbtr"/>
      <attr-item tags="vbntr"/>
      <attr-item tags="vbtr_ntr"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="pron">
      <attr-item tags="pron"/>
    </def-attr>

    <def-attr n="sep">
      <attr-item tags="sep"/>
    </def-attr>

    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
    </def-attr>

    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.pron.pp"/>
      <attr-item tags="vbtr.pp"/>
      <attr-item tags="vbntr.pp"/>
      <attr-item tags="vbtr_ntr.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.sep.pp"/>
      <attr-item tags="vbtr.sep.pp"/>
      <attr-item tags="vbntr.sep.pp"/>
      <attr-item tags="vbtr_ntr.sep.pp"/>
      <attr-item tags="vbser.sep.pp"/>
      <attr-item tags="vbmod.sep.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>

    <def-attr n="a_prn">
      <attr-item tags="prn"/>
      <attr-item tags="prn.pro"/>
      <attr-item tags="rel"/><!-- OJO -->
      <attr-item tags="prn.rel"/><!-- OJO -->
      <attr-item tags="rel"/><!-- OJO -->
    </def-attr>

    <def-attr n="tipus_prn">
      <attr-item tags="subj"/>
      <attr-item tags="obj"/>
      <attr-item tags="tn"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
      <attr-item tags="ref"/>
      <attr-item tags="nn"/><!--EO-->
      <attr-item tags="adv"/><!--EO-->
    </def-attr>

    <def-attr n="tipus_prn_tn">
      <attr-item tags="tn"/>
    </def-attr>

    <def-attr n="tipus_prn_ref">
      <attr-item tags="ref"/>
    </def-attr>

<!--
    <def-attr n="tipoenc_pro">
      <attr-item tags="ref.p3.mf.sp"/>
      <attr-item tags="p1.mf.pl"/>
      <attr-item tags="p1.mf.sg"/>
      <attr-item tags="p2.mf.pl"/>
      <attr-item tags="p2.mf.sg"/>
      <attr-item tags="p3.f.pl"/>
      <attr-item tags="p3.f.sg"/>
      <attr-item tags="p3.mf.pl"/>
      <attr-item tags="p3.mf.sg"/>
      <attr-item tags="p3.m.pl"/>
      <attr-item tags="p3.m.sg"/>
      <attr-item tags="p3.nt"/>
      <attr-item tags="mf.sg"/>
      <attr-item tags="adv"/>
    </def-attr>
-->

    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="cas"> <!--EO-->
      <attr-item tags="nom"/>
      <attr-item tags="nomi2"/>
      <attr-item tags="acc"/>
      <attr-item tags="sense"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="nbr2">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fti"/>
      <attr-item tags="fts"/>
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="pres"/>
      <attr-item tags="past"/>
      <attr-item tags="pp2"/>
      <attr-item tags="pp3"/>
      <attr-item tags="gerpast"/>
      <attr-item tags="prs"/>
      <attr-item tags="pp"/><!-- ? -->
      <attr-item tags="ger"/><!-- ? -->
      <attr-item tags="inf"/><!-- ? -->
    </def-attr>



    <def-attr n="neg">
      <attr-item tags="NEG"/>
    </def-attr>

  </section-def-attrs>
  <section-def-vars>
    <def-var n="case"/>
    <def-var n="changecase"/>
    <def-var n="lemapos"/>
    <def-var n="nombre"/>
    <def-var n="nombre2"/>
    <def-var n="genere"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="caseFirstWord"/>
    <def-var n="lema"/>
    <def-var n="EOS" v="true"/>
    <def-var n="EOS_soft" v="true"/>
    <def-var n="SVnegatiu"/>
    <def-var n="auxiliar"/>
    <def-var n="tipus_verb"/>
    <def-var n="tipus_verb2"/>
    <def-var n="tipus_verb3"/>
    <def-var n="forigi_ref"/>
    <def-var n="aldoni_oni"/>
    <def-var n="vimpers"/>
    <def-var n="vigxi1"/>
    <def-var n="vigxi2"/>
    <def-var n="nprep"/>
    <def-var n="nadv"/>
    <def-var n="ncnj"/>
    <def-var n="nrel"/>
    <def-var n="nverb"/>
<!-- variables només per depurar i veure per on es passa en executar -->
    <def-var n="debug1"/>
    <def-var n="debug2"/>
    <def-var n="debug3"/>
    <def-var n="debug4"/>
  </section-def-vars>

  <section-def-lists>

  <def-list n="detsprep"> <!-- BCN EO per marcar els que no poden anar en acc-->
    <list-item v="pli da"/>
    <list-item v="iom da"/>
    <list-item v="la plimulto da"/>
    <list-item v="tro da"/>
    <list-item v="malpli da"/>
    <list-item v="ne multe da"/>
    <list-item v="sufiĉe da"/>
    <list-item v="ne multe da"/>
    <list-item v="tiom da"/>
    </def-list>

  <def-list n="quien"> <!-- BCN EO per marcar els que no poden anar en acc-->
    <list-item v="quién"/>
    <list-item v="el cual"/>
    <list-item v="lo cual"/>
    </def-list>

  <def-list n="quin"> <!-- BCN EO per marcar els que han d'anar en acc (dets int preverbals)-->
    <list-item v="cuál"/>
    </def-list>

  <def-list n="locual">
    <list-item v="lo cual"/>
    </def-list>

  <def-list n="moviment"> <!-- BCN EO-->
    <list-item v="ir"/>
    <list-item v="añadir"/>
    <list-item v="poner"/>
    <list-item v="meter"/>
    <list-item v="colocar"/>
    <list-item v="sacar"/>
    <list-item v="introducir"/>
    <list-item v="reintroducir"/>
    <list-item v="entrar"/>
    <list-item v="caer"/>
    <list-item v="subir"/>
    <list-item v="cruzar"/>
    <list-item v="resbalar"/>
    <list-item v="llegar"/>
    <list-item v="volar"/>
    <list-item v="dirigir"/>
    <list-item v="redirigir"/>
    <list-item v="correr"/>
    <list-item v="caminar"/>
    <list-item v="andar"/>
    <list-item v="reandar"/>
    <list-item v="avanzar"/>
    <list-item v="salir"/>
    <list-item v="traducir"/>
    <list-item v="retraducir"/>
    <list-item v="poner"/>
    <list-item v="insertar"/>
    <list-item v="reinsertar"/>
    <list-item v="bajar"/>
    <list-item v="llevar"/>
    <list-item v="traer"/>
    <list-item v="atraer"/>
    <list-item v="dividir"/>
    <list-item v="desembocar"/>
    <list-item v="enamorar#"/>
    <list-item v="zambullir"/>
    <list-item v="transformar"/>
    </def-list>

  <def-list n="agradar"> <!-- BCN EO per a la inversio argumental-->
    <list-item v="agradar"/>
    <list-item v="gustar"/>
    <list-item v="fiar# de"/>
<!--
    <list-item v="encantar"/>
    <list-item v="complacer"/>
    <list-item v="preocupar"/>
    <list-item v="interesar"/>
    <list-item v="inquietar"/>
-->
    </def-list>

  <def-list n="volition"> <!-- BCN EO verbs que porten KE -->
    <list-item v="querer"/>
    <list-item v="desear"/>
    <list-item v="proponer"/>
    <list-item v="exigir"/>
    <list-item v="reclamar"/>
    <list-item v="pedir"/>
<!--    <list-item v="sugerir"/> -->
<!--    <list-item v="indicar"/> -->

<!--  <def-list n="reportingverb"> -->
<!--
    <list-item v="olvidar"/>
    <list-item v="decir"/>
    <list-item v="admitir"/>
    <list-item v="acordar"/>
    <list-item v="decidir"/>
    <list-item v="negar"/>
    <list-item v="explicar"/>
    <list-item v="insistir"/>
    <list-item v="prometer"/>
    <list-item v="recomendar"/>
    <list-item v="sugerir"/>
    <list-item v="mencionar"/>
    <list-item v="pensar"/>
    <list-item v="creer"/>
    <list-item v="esperar"/>
    <list-item v="temer"/>
    <list-item v="suponer"/>
    <list-item v="significar"/>
-->
    </def-list>

    <def-list n="predikativo"> <!-- verboj kun strukturo kiel "mi estimas bonA lian laboron" -->
      <list-item v="estimi"/>
      <list-item v="juĝi"/>
      <list-item v="konsideri"/>
      <list-item v="opinii"/>
      <list-item v="taksi"/>
      <list-item v="trovi"/>
      <list-item v="vidi"/>
      <list-item v="porti"/>
      <list-item v="preni"/>
      <list-item v="kapti"/>
      <list-item v="igi"/>
      <list-item v="fariĝi"/>
      <list-item v="iĝi"/>
    </def-list>

  <def-list n="reportingverb"> <!-- BCN EO verbs que porten KE (no s'utilitza)-->
    <list-item v="olvidar"/>
    <list-item v="decir"/>
    <list-item v="admitir"/>
    <list-item v="acordar"/>
    <list-item v="decidir"/>
    <list-item v="negar"/>
    <list-item v="explicar"/>
    <list-item v="insistir"/>
    <list-item v="prometer"/>
    <list-item v="recomendar"/>
    <list-item v="sugerir"/>
    <list-item v="mencionar"/>
    <list-item v="pensar"/>
    <list-item v="creer"/>
    <list-item v="esperar"/>
    <list-item v="temer"/>
    <list-item v="suponer"/>
    <list-item v="significar"/>
  </def-list>

    <!-- lista de verbos con tratamiento especial en forma reflexiva -->
    <def-list n="verbs_ref">
<!-- for- -->
      <list-item v="comer"/>
      <list-item v="beber"/>
      <list-item v="tragar"/>
<!--      <list-item v="leer"/> -->
      <list-item v="ir"/>
      <list-item v="llevar"/>
<!-- ek- -->
      <list-item v="poner# en servicio"/>
      <list-item v="producir# dolor"/>
      <list-item v="enterar"/>
      <list-item v="enterar#"/>
      <list-item v="afincar"/>
<!-- unu la alian -->
      <list-item v="saludar"/>
      <list-item v="enfrentar"/>
<!-- aliaj -->
      <list-item v="volver"/>
      <list-item v="convertir"/>
      <list-item v="tornar"/>
      <list-item v="acordar"/>
      <list-item v="acordar# de"/>
      <list-item v="tratar#"/>
      <list-item v="producir"/>
      <list-item v="celebrar"/>
      <list-item v="realizar"/>
      <list-item v="referir"/>
      <list-item v="situar"/>
      <list-item v="ubicar"/>
      <list-item v="localizar"/>
      <list-item v="encontrar"/> <!-- situi / renkontiĝi ! -->
      <list-item v="parecer"/>
      <list-item v="encargar"/>
      <list-item v="fusionar"/>
      <list-item v="explotar"/>  <!-- ONI : ekspluati -->
      <list-item v="pasar"/>
      <list-item v="adherir"/> <!-- aliĝi / algluiĝi -->
      <list-item v="criar"/>
      <list-item v="relacionar"/>
      <list-item v="encontrar# presente"/>
      <list-item v="negar"/>
      <list-item v="reunir"/>
      <list-item v="dar# cuenta"/>
      <list-item v="hospedar"/>
      <list-item v="incorporar"/>
      <list-item v="incorporar#"/>
      <list-item v="reincorporar"/>
      <list-item v="matricular"/>
      <list-item v="licenciar"/>
      <list-item v="graduar"/>
      <list-item v="desprender"/>
      <list-item v="poner# en movimiento"/>
      <list-item v="poner# en marcha"/>
      <list-item v="poner# en funcionamiento"/>
      <list-item v="poner# en evidencia"/>
      <list-item v="despedir"/>
      <list-item v="despedir# de"/>
      <list-item v="estrenar"/>
      <list-item v="concienciar"/>
      <list-item v="posicionar"/>
      <list-item v="derrumbar"/>
      <list-item v="desplomar"/>
      <list-item v="desmoronar"/>
      <list-item v="suicidar"/>
      <list-item v="ceñir"/>
      <list-item v="desentrañar"/>
      <list-item v="rumorear"/>
      <list-item v="congregar"/>
      <list-item v="enfrentar# a"/>
      <list-item v="enfrentar# contra"/>
      <list-item v="acomodar"/>
      <list-item v="disponer"/>
      <list-item v="disputar"/>
      <list-item v="distinguir#"/> <!-- elstaras / oni distingas -->
      <list-item v="esfumar"/>
      <list-item v="sustraer# a"/>
      <list-item v="sentir"/>
      <list-item v="apreciar"/>
      <list-item v="divisar"/>
      <list-item v="desajustar"/>
      <list-item v="posicionar"/>

<!-- quitar reflexivo -->
      <list-item v="morir"/>
      <list-item v="comprar"/>
      <list-item v="intercambiar"/>
      <list-item v="divorciar"/>
      <list-item v="subir"/>
      <list-item v="bajar"/>
      <list-item v="caer"/>
      <list-item v="destacar"/>
      <list-item v="refugiar"/>
      <list-item v="quedar"/>
      <list-item v="aprender"/> <!-- pero: se aprenden muchas cosas -->
      <list-item v="estudiar"/> <!-- pero: se estudian muchas cosas -->
      <list-item v="traer"/>
      <list-item v="suceder"/>
      <list-item v="acometer"/>
      <list-item v="incautar"/>
      <list-item v="imaginar"/>
      <list-item v="zambullir"/>
      <list-item v="autoproclamar"/>
      <list-item v="escapar"/>
    </def-list>

    <def-list n="verbs_pron"> <!-- lista de verbos con cambio de raíz cuando van con pronombre (p.ej intr > tr ) -->
      <list-item v="pasar"/>
    </def-list>

    <def-list n="verbs_oni">
      <list-item v="usar"/>
      <list-item v="decir"/>
      <list-item v="mencionar"/>
      <list-item v="hablar"/>
      <list-item v="hablar#"/>
      <list-item v="hablar# por teléfono"/>
      <list-item v="comentar"/>
      <list-item v="opinar"/>
      <list-item v="creer"/>
      <list-item v="creer#"/>
      <list-item v="descubrir"/>
      <list-item v="proponer"/>
      <list-item v="querer"/>
      <list-item v="desear"/>
      <list-item v="emplear"/>
      <list-item v="conocer"/>
      <list-item v="requerir"/>
      <list-item v="obligar"/>
      <list-item v="aplicar"/>
      <list-item v="utilizar"/>
      <list-item v="usar"/>
      <list-item v="ver"/>
      <list-item v="golpear"/>
      <list-item v="exponer"/>
      <list-item v="notar"/>
      <list-item v="observar"/>
      <list-item v="fundar"/>
      <list-item v="inaugurar"/>
      <list-item v="fabricar"/>
      <list-item v="estimar"/>
      <list-item v="considerar"/>
      <list-item v="deber"/>
      <list-item v="poder"/>
      <list-item v="soler"/>
      <list-item v="acostumbrar"/> <!-- PERO: él no se acostumbra -->
      <list-item v="intentar"/>
      <list-item v="conocer"/>
      <list-item v="saber"/>
      <list-item v="tener"/>
      <list-item v="repatriar"/>
      <list-item v="necesitar"/>
      <list-item v="esperar"/>
      <list-item v="emplear"/>
      <list-item v="planificar"/>
      <list-item v="publicar"/>
      <list-item v="conciliar"/>
      <list-item v="reconciliar"/>
      <list-item v="enterrar"/>
      <list-item v="construir"/>
      <list-item v="edificar"/>
      <list-item v="cambiar"/>
      <list-item v="modificar"/>
      <list-item v="llegar# a"/>
      <list-item v="enviar"/>
      <list-item v="reenviar"/>
      <list-item v="transmitir"/>
      <list-item v="retransmitir"/>
      <list-item v="pronunciar"/>
      <list-item v="leer"/>
      <list-item v="escribir"/>
      <list-item v="prever"/>
      <list-item v="violar"/>
      <list-item v="forzar"/>
      <list-item v="obligar"/>
      <list-item v="guardar"/>
      <list-item v="almacenar"/>
      <list-item v="interpretar"/>
      <list-item v="promover"/>
      <list-item v="promocionar"/>
      <list-item v="aprovechar"/> <!-- pero: él se aprovecha = li profitas -->
      <list-item v="trabajar"/>
      <list-item v="lavar# en seco"/>
      <list-item v="poner# en peligro"/>
      <list-item v="provocar# un aborto"/>
      <list-item v="quitar# el polvo"/>
      <list-item v="quitar# la punta"/>
      <list-item v="firmar"/>
      <list-item v="identificar"/>
      <list-item v="administrar"/>
      <list-item v="respirar"/>
      <list-item v="nombrar"/>
      <list-item v="entender"/>
      <list-item v="comprender"/>
      <list-item v="recibir"/>
      <list-item v="traducir"/>
      <list-item v="interpretar"/>
      <list-item v="cazar"/>
      <list-item v="pescar"/>
      <list-item v="plantar"/>
      <list-item v="sembrar"/>
      <list-item v="cosechar"/>
      <list-item v="cantar"/>
      <list-item v="añadir"/>
      <list-item v="desheredar"/>
      <list-item v="entronizar"/>
      <list-item v="indultar"/>
      <list-item v="ejecutar"/>
      <list-item v="ejercer"/>
      <list-item v="elaborar"/>
      <list-item v="elegir"/>
      <list-item v="eliminar"/>
      <list-item v="elogiar"/>
      <list-item v="describir"/>
      <list-item v="explicar"/>
      <list-item v="contar"/>
      <list-item v="distinguir"/>
      <list-item v="introducir"/>
      <list-item v="apreciar"/>
      <list-item v="divisar"/>
      <list-item v="recurrir"/>
      <list-item v="cesar"/>
      <list-item v="desechar"/>
      <list-item v="desestimar"/>
      <list-item v="ningunear"/>
      <list-item v="pisotear"/>
      <list-item v="hacer# presente"/>
      <list-item v="sospechar"/>
      <list-item v="sospesar"/>
      <list-item v="reconocer"/>
      <list-item v="permitir"/>
      <list-item v="robar"/>
      <list-item v="incluir"/>
      <list-item v="excluir"/>
     <list-item v="bonificar"/>
    </def-list>

    <def-list n="verbs_igxi">
      <list-item v="mostrar"/>
      <list-item v="crear"/> 
      <list-item v="dividir"/>
      <list-item v="ocupar"/>
      <list-item v="formar"/>
      <list-item v="deformar"/>
      <list-item v="distorsionar"/>
      <list-item v="originar"/>
      <list-item v="abrir"/>
      <list-item v="cerrar"/>
      <list-item v="llamar"/>
      <list-item v="denominar"/>
      <list-item v="retirar"/>
      <list-item v="hacer"/>
      <list-item v="convertir"/>
      <list-item v="reflejar"/>
      <list-item v="hallar"/>
      <list-item v="asentar"/>
      <list-item v="concentrar"/>
      <list-item v="desarrollar"/>
      <list-item v="casar"/>
      <list-item v="desposar"/>
      <list-item v="enamorar"/>
      <list-item v="enamorar#"/>
      <list-item v="implantar"/>
      <list-item v="reimplantar"/>
      <list-item v="rehacer"/>
      <list-item v="reconvertir"/>
      <list-item v="reencontrar"/>
      <list-item v="iniciar"/>
      <list-item v="reiniciar"/>
      <list-item v="terminar"/>
      <list-item v="acabar"/>
      <list-item v="trasladar"/>
      <list-item v="levantar"/>
      <list-item v="acostar"/>
      <list-item v="tumbar"/>
      <list-item v="envolver"/>
      <list-item v="desenvolver"/>
      <list-item v="acercar"/>
      <list-item v="aproximar"/>
      <list-item v="retrasar"/>
      <list-item v="postergar"/>
      <list-item v="aplazar"/>
      <list-item v="atrasar"/>
      <list-item v="demorar"/>
      <list-item v="posponer"/>
      <list-item v="procrastinar"/>
      <list-item v="retardar"/>
      <list-item v="conservar"/>
      <list-item v="interesar"/>
      <list-item v="preocupar"/>
      <list-item v="interesar#"/>
      <list-item v="preocupar#"/>
      <list-item v="inquietar"/>
      <list-item v="animar"/>
      <list-item v="embarazar"/>
      <list-item v="joder"/>
      <list-item v="deber# a"/>
      <list-item v="denominar"/>
      <list-item v="estropear"/>
      <list-item v="romper"/>
      <list-item v="dirigir"/>
      <list-item v="sentar"/>
      <list-item v="tumbar"/>
      <list-item v="aficionar"/>
      <list-item v="trasladar"/>
      <list-item v="orientar"/>
      <list-item v="desorientar"/>
      <list-item v="expandir"/>
      <list-item v="expansionar"/>
      <list-item v="educar"/>
      <list-item v="basar"/>
      <list-item v="transferir"/>
      <list-item v="retrasar"/>
      <list-item v="retirar"/>
      <list-item v="generar"/>
      <list-item v="instalar"/>
      <list-item v="reinstalar"/>
      <list-item v="establecer"/>
      <list-item v="endeudar"/>
      <list-item v="abotonar"/>
      <list-item v="desabotonar"/>
      <list-item v="vestir"/>
      <list-item v="desvestir"/>
      <list-item v="travestir"/>
      <list-item v="despertar"/>
      <list-item v="acostar"/>
      <list-item v="matar"/>
      <list-item v="disgustar"/>
      <list-item v="enojar"/>
      <list-item v="distraer"/>
      <list-item v="divertir"/>
      <list-item v="electrocutar"/>
      <list-item v="empezar"/>
      <list-item v="comenzar"/>
      <list-item v="acabar"/>
      <list-item v="terminar"/>
      <list-item v="resentir"/>
      <list-item v="mover"/>
      <list-item v="estofar"/>
      <list-item v="alinear"/>
      <list-item v="encaminar"/>
      <list-item v="acentuar"/>
      <list-item v="transformar"/>
      <list-item v="asociar"/>
      <list-item v="diferenciar"/>
      <list-item v="oxidar"/>
      <list-item v="infiltrar"/>
      <list-item v="arrodillar"/>
      <list-item v="afligir"/>
      <list-item v="apesadumbrar"/>
      <list-item v="desencantar"/>
      <list-item v="extender"/>
      <list-item v="agotar"/>

     <list-item v="abaratar"/>
     <list-item v="abatir"/>
     <list-item v="abochornar"/>
     <list-item v="abreviar"/>
     <list-item v="abultar"/>
     <list-item v="acallar"/>
     <list-item v="accionar"/>
     <list-item v="achispar"/>
     <list-item v="aclarar"/>
     <list-item v="aclimatar"/>
     <list-item v="acortar"/>
     <list-item v="acostar"/>
     <list-item v="acrecentar"/>
     <list-item v="activar"/>
     <list-item v="acumular"/>
     <list-item v="afianzar"/>
     <list-item v="aficionar"/>
     <list-item v="afilar"/>
     <list-item v="agrandar"/>
     <list-item v="agravar"/>
     <list-item v="agrupar"/>
     <list-item v="aguzar"/>
     <list-item v="ajustar"/>
     <list-item v="alargar"/>
     <list-item v="albergar"/>
     <list-item v="alegrar"/>
     <list-item v="alejar"/>
     <list-item v="alentar"/>
     <list-item v="aligerar"/>
     <list-item v="alinear"/>
     <list-item v="alisar"/>
     <list-item v="aliviar"/>
     <list-item v="alojar"/>
     <list-item v="alumbrar"/>
     <list-item v="amargar"/>
     <list-item v="amarrar"/>
     <list-item v="amasar"/>
     <list-item v="amontonar"/>
     <list-item v="ampliar"/>
     <list-item v="angustiar"/>
     <list-item v="aniquilar"/>
     <list-item v="anular"/>
     <list-item v="apaciguar"/>
     <list-item v="aparentar"/>
     <list-item v="apartar"/>
     <list-item v="apasionar"/>
     <list-item v="aplastar"/>
     <list-item v="apresurar"/>
     <list-item v="apropiar"/>
     <list-item v="aproximar"/>
     <list-item v="archivar"/>
     <list-item v="arquear"/>
     <list-item v="arrimar"/>
     <list-item v="arromar"/>
     <list-item v="arruinar"/>
     <list-item v="asegurar"/>
     <list-item v="asombrar"/>
     <list-item v="asustar"/>
     <list-item v="atar"/>
     <list-item v="atenuar"/>
     <list-item v="atrofiar"/>
     <list-item v="aumentar"/>
     <list-item v="aunar"/>
     <list-item v="autentificar"/>
     <list-item v="autoinculpar"/>
     <list-item v="autojustificar"/>
     <list-item v="avergonzar"/>
     <list-item v="averiguar"/>
     <list-item v="avivar"/>
     <list-item v="azuzar"/>
     <list-item v="beneficiar"/>
     <list-item v="blanquear"/>
     <list-item v="broncear"/>
     <list-item v="cabrear"/>
     <list-item v="calmar"/>
     <list-item v="cancelar"/>
     <list-item v="cansar"/>
     <list-item v="capacitar"/>
     <list-item v="cartografiar"/>
     <list-item v="casar"/>
     <list-item v="desposar"/>
     <list-item v="cegar"/>
     <list-item v="certificar"/>
     <list-item v="chamuscar"/>
     <list-item v="circunscribir"/>
     <list-item v="cohesionar"/>
     <list-item v="colgar"/>
     <list-item v="colorar"/>
     <list-item v="compaginar"/>
     <list-item v="complementar"/>
     <list-item v="completar"/>
     <list-item v="conciliar"/>
     <list-item v="concretar"/>
     <list-item v="confinar"/>
     <list-item v="conformar"/>
     <list-item v="congelar"/>
     <list-item v="consolidar"/>
     <list-item v="contentar"/>
     <list-item v="continuar"/>
     <list-item v="convertir"/>
     <list-item v="convertir# en"/>
     <list-item v="coordinar"/>
     <list-item v="cuadriplicar"/>
     <list-item v="cuadruplicar"/>
     <list-item v="curvar"/>
     <list-item v="debilitar"/>
     <list-item v="decaer"/>
     <list-item v="decepcionar"/>
     <list-item v="deforestar"/>
     <list-item v="deponer"/>
     <list-item v="depurar"/>
     <list-item v="desacostumbrar"/>
     <list-item v="desacreditar"/>
     <list-item v="desactivar"/>
     <list-item v="desahuciar"/>
     <list-item v="desanimar"/>
     <list-item v="desarmar"/>
     <list-item v="desatar"/>
     <list-item v="desbaratar"/>
     <list-item v="descoordinar"/>
     <list-item v="descortezar"/>
     <list-item v="desencadenar"/>
     <list-item v="desengañar"/>
     <list-item v="desenmascarar"/>
     <list-item v="desenterrar"/>
     <list-item v="desenvainar"/>
     <list-item v="desequilibrar"/>
     <list-item v="desesperanzar"/>
     <list-item v="desesperar"/>
     <list-item v="desgranar"/>
     <list-item v="deshabilitar"/>
     <list-item v="deshabitar"/>
     <list-item v="desilusionar"/>
     <list-item v="desintoxicar"/>
     <list-item v="desnatar"/>
     <list-item v="desnudar"/>
     <list-item v="despedazar"/>
     <list-item v="despejar"/>
     <list-item v="desperdigar"/>
     <list-item v="desplumar"/>
     <list-item v="despoblar"/>
     <list-item v="desposeer"/>
     <list-item v="desprestigiar"/>
     <list-item v="despuntar"/>
     <list-item v="desregular"/>
     <list-item v="destituir"/>
     <list-item v="destronar"/>
     <list-item v="desunir"/>
     <list-item v="desvertebrar"/>
     <list-item v="desvestir"/>
     <list-item v="desvincular"/>
     <list-item v="detonar"/>
     <list-item v="detractar"/>
     <list-item v="devastar"/>
     <list-item v="dificultar"/>
     <list-item v="difundir"/>
     <list-item v="disculpar"/>
     <list-item v="disecar"/>
     <list-item v="disminuir"/>
     <list-item v="distanciar"/>
     <list-item v="diversificar"/>
     <list-item v="divulgar"/>
     <list-item v="duplicar"/>
     <list-item v="efectuar"/>
     <list-item v="electrificar"/>
     <list-item v="eliminar"/>
     <list-item v="embalsamar"/>
     <list-item v="embalsar"/>
     <list-item v="embarazar"/>
     <list-item v="embarcar"/>
     <list-item v="embellecer"/>
     <list-item v="emborrachar"/>
     <list-item v="embotellar"/>
     <list-item v="embriagar"/>
     <list-item v="empalmar"/>
     <list-item v="emparejar"/>
     <list-item v="empeorar"/>
     <list-item v="empequeñecer"/>
     <list-item v="empobrecer"/>
     <list-item v="enamorar"/>
     <list-item v="enamorar# "/>
     <list-item v="encaminar"/>
     <list-item v="encarcelar"/>
     <list-item v="encarecer"/>
     <list-item v="encarnar"/>
     <list-item v="encarrilar"/>
     <list-item v="encuadrar"/>
     <list-item v="enmarcar"/>
     <list-item v="enderezar"/>
     <list-item v="enemistar"/>
     <list-item v="enfocar"/>
     <list-item v="enfriar"/>
     <list-item v="enfurecer"/>
     <list-item v="engrandecer"/>
     <list-item v="engrosar"/>
     <list-item v="enjaular"/>
     <list-item v="enlazar"/>
     <list-item v="ennegrecer"/>
     <list-item v="enriquecer"/>
     <list-item v="enrojecer"/>
     <list-item v="ensanchar"/>
     <list-item v="ensilar"/>
     <list-item v="ensuciar"/>
     <list-item v="enterrar"/>
     <list-item v="entrecasar"/>
     <list-item v="enturbiar"/>
     <list-item v="entusiasmar"/>
     <list-item v="envainar"/>
     <list-item v="envasar"/>
     <list-item v="envilecer"/>
     <list-item v="equilibrar"/>
     <list-item v="erigir"/>
     <list-item v="erradicar"/>
     <list-item v="escalonar"/>
     <list-item v="escenificar"/>
     <list-item v="esclarecer"/>
     <list-item v="espabilar"/>
     <list-item v="espaciar"/>
     <list-item v="espantar"/>
     <list-item v="estratificar"/>
     <list-item v="evaporar"/>
     <list-item v="evidenciar"/>
     <list-item v="exacerbar"/>
     <list-item v="exagerar"/>
     <list-item v="excomulgar"/>
     <list-item v="eximir"/>
     <list-item v="expandir"/>
     <list-item v="expansionar"/>
     <list-item v="expatriar"/>
     <list-item v="expropiar"/>
     <list-item v="exterminar"/>
     <list-item v="extralimitar"/>
     <list-item v="facilitar"/>
     <list-item v="fatigar"/>
     <list-item v="fingir"/>
     <list-item v="fornir"/>
     <list-item v="fortalecer"/>
     <list-item v="fortificar"/>
     <list-item v="fragmentar"/>
     <list-item v="gangrenar"/>
     <list-item v="gasificar"/>
     <list-item v="habilitar"/>
     <list-item v="humillar"/>
     <list-item v="hundir"/>
     <list-item v="idolatrar"/>
     <list-item v="iluminar"/>
     <list-item v="impedir"/>
     <list-item v="implementar"/>
     <list-item v="imposibilitar"/>
     <list-item v="incapacitar"/>
     <list-item v="incitar"/>
     <list-item v="incrementar"/>
     <list-item v="inculcar"/>
     <list-item v="inculpar"/>
     <list-item v="indignar"/>
     <list-item v="inflamar"/>
     <list-item v="inflar"/>
     <list-item v="innovar"/>
     <list-item v="inquietar"/>
     <list-item v="instigar"/>
     <list-item v="instituir"/>
     <list-item v="intensificar"/>
     <list-item v="internar"/>
     <list-item v="interrelacionar"/>
     <list-item v="intrigar"/>
     <list-item v="invalidar"/>
     <list-item v="jorobar"/>
     <list-item v="juntar"/>
     <list-item v="juramentar"/>
     <list-item v="justificar"/>
     <list-item v="laminar"/>
     <list-item v="liberar"/>
     <list-item v="licuar"/>
     <list-item v="ligar"/>
     <list-item v="limitar"/>
     <list-item v="limpiar"/>
     <list-item v="llenar"/>
     <list-item v="llevar# a cabo"/>
     <list-item v="madurar"/>
     <list-item v="matar"/>
     <list-item v="mejorar"/>
     <list-item v="mitigar"/>
     <list-item v="moderar"/>
     <list-item v="mudar"/>
     <list-item v="multiplicar# por cinco"/>
     <list-item v="multiplicar# por cuatro"/>
     <list-item v="multiplicar# por diez"/>
     <list-item v="multiplicar# por dos"/>
     <list-item v="multiplicar# por nueve"/>
     <list-item v="multiplicar# por ocho"/>
     <list-item v="multiplicar# por seis"/>
     <list-item v="multiplicar# por siete"/>
     <list-item v="multiplicar# por tres"/>
     <list-item v="navegar"/>
     <list-item v="notificar"/>
     <list-item v="obligar"/>
     <list-item v="ocasionar"/>
     <list-item v="octuplicar"/>
     <list-item v="ordenar"/>
     <list-item v="originar"/>
     <list-item v="oscurecer"/>
     <list-item v="pacificar"/>
     <list-item v="pelar"/>
     <list-item v="perfeccionar"/>
     <list-item v="perpetuar"/>
     <list-item v="personificar"/>
     <list-item v="plastificar"/>
     <list-item v="poner# en valor"/>
     <list-item v="posibilitar"/>
     <list-item v="potenciar"/>
     <list-item v="precisar"/>
     <list-item v="preocupar"/>
     <list-item v="preocupar#"/>
     <list-item v="prestigiar"/>
     <list-item v="privar"/>
     <list-item v="prolongar"/>
     <list-item v="proporcionar"/>
     <list-item v="prorrogar"/>
     <list-item v="proseguir"/>
     <list-item v="proveer"/>
     <list-item v="quedar# huérfano"/>
     <list-item v="quemar"/>
     <list-item v="quintuplicar"/>
     <list-item v="ramificar"/>
     <list-item v="reafirmar"/>
     <list-item v="reagrupar"/>
     <list-item v="reanimar"/>
     <list-item v="reavivar"/>
     <list-item v="reciclar"/>
     <list-item v="reconciliar"/>
     <list-item v="rectificar"/>
     <list-item v="redondear"/>
     <list-item v="reenfocar"/>
     <list-item v="reforzar"/>
     <list-item v="refrescar"/>
     <list-item v="regular"/>
     <list-item v="reinsertar"/>
     <list-item v="reinsertar# socialmente"/>
     <list-item v="relacionar"/>
     <list-item v="renovar"/>
     <list-item v="reordenar"/>
     <list-item v="repatriar"/>
     <list-item v="resaltar"/>
     <list-item v="rescatar"/>
     <list-item v="rescindir"/>
     <list-item v="restablecer"/>
     <list-item v="resucitar"/>
     <list-item v="reunificar"/>
     <list-item v="revalidar"/>
     <list-item v="saciar"/>
     <list-item v="sanar"/>
     <list-item v="satisfacer"/>
     <list-item v="secar"/>
     <list-item v="segregar"/>
     <list-item v="sentar"/>
     <list-item v="separar"/>
     <list-item v="septuplicar"/>
     <list-item v="sepultar"/>
     <list-item v="sextuplicar"/>
     <list-item v="silenciar"/>
     <list-item v="simplificar"/>
     <list-item v="sobresaltar"/>
     <list-item v="sosegar"/>
     <list-item v="subordinar"/>
     <list-item v="suministrar"/>
     <list-item v="suplicar"/>
     <list-item v="suscitar"/>
     <list-item v="terrajar"/>
     <list-item v="triplicar"/>
     <list-item v="tumbar"/>
     <list-item v="unificar"/>
     <list-item v="unir"/>
     <list-item v="vaciar"/>
     <list-item v="validar"/>
     <list-item v="vertebrar"/>
     <list-item v="vincular"/>
     <list-item v="volver# conforme"/>
     <list-item v="entroncar"/>
     <list-item v="explicitar"/>
     <list-item v="apuntalar"/>
     <list-item v="plasmar"/>
     <list-item v="resaltar"/>
     <list-item v="clarificar"/>

      <list-item v="actualizar"/>
      <list-item v="agonizar"/>
      <list-item v="agudizar"/>
      <list-item v="alcoholizar"/>
      <list-item v="alunizar"/>
      <list-item v="amerizar"/>
      <list-item v="amortizar"/>
      <list-item v="analizar"/>
      <list-item v="armonizar"/>
      <list-item v="aromatizar"/>
      <list-item v="atemorizar"/>
      <list-item v="aterrizar"/>
      <list-item v="aterrorizar"/>
      <list-item v="atizar"/>
      <list-item v="automatizar"/>
      <list-item v="autorizar"/>
      <list-item v="bautizar"/>
      <list-item v="canalizar"/>
      <list-item v="canonizar"/>
      <list-item v="caracterizar"/>
      <list-item v="caricaturizar"/>
      <list-item v="catequizar"/>
      <list-item v="cauterizar"/>
      <list-item v="centralizar"/>
      <list-item v="cicatrizar"/>
      <list-item v="civilizar"/>
      <list-item v="colonizar"/>
      <list-item v="comercializar"/>
      <list-item v="cotizar"/>
      <list-item v="criminalizar"/>
      <list-item v="cristalizar"/>
      <list-item v="democratizar"/>
      <list-item v="descentralizar"/>
      <list-item v="descolonizar"/>
      <list-item v="desestabilizar"/>
      <list-item v="deslizar"/>
      <list-item v="desorganizar"/>
      <list-item v="despolitizar"/>
      <list-item v="desregularizar"/>
      <list-item v="dializar"/>
      <list-item v="digitalizar"/>
      <list-item v="electrizar"/>
      <list-item v="electrolizar"/>
      <list-item v="empanizar"/>
      <list-item v="enfatizar"/>
      <list-item v="enraizar"/>
      <list-item v="erizar"/>
      <list-item v="escandalizar"/>
      <list-item v="especializar"/>
      <list-item v="estabilizar"/>
      <list-item v="esterilizar"/>
      <list-item v="estilizar"/>
      <list-item v="estupidizar"/>
      <list-item v="evangelizar"/>
      <list-item v="exorcizar"/>
      <list-item v="exteriorizar"/>
      <list-item v="fertilizar"/>
      <list-item v="finalizar"/>
      <list-item v="formalizar"/>
      <list-item v="fraternizar"/>
      <list-item v="galvanizar"/>
      <list-item v="garantizar"/>
      <list-item v="gargarizar"/>
      <list-item v="generalizar"/>
      <list-item v="granizar"/>
      <list-item v="hechizar"/>
      <list-item v="helenizar"/>
      <list-item v="hipnotizar"/>
      <list-item v="horrorizar"/>
      <list-item v="hospitalizar"/>
      <list-item v="humanizar"/>
      <list-item v="idealizar"/>
      <list-item v="idiotizar"/>
      <list-item v="ilegalizar"/>
      <list-item v="indemnizar"/>
      <list-item v="industrializar"/>
      <list-item v="inestabilizar"/>
      <list-item v="inmortalizar"/>
      <list-item v="inmunizar"/>
      <list-item v="insoslayabilizar"/>
      <list-item v="institucionalizar"/>
      <list-item v="interiorizar"/>
      <list-item v="internacionalizar"/>
      <list-item v="inutilizar"/>
      <list-item v="ionizar"/>
      <list-item v="laicizar"/>
      <list-item v="legalizar"/>
      <list-item v="liberalizar"/>
      <list-item v="martirizar"/>
      <list-item v="materializar"/>
      <list-item v="matizar"/>
      <list-item v="maximizar"/>
      <list-item v="memorizar"/>
      <list-item v="minimizar"/>
      <list-item v="minorizar"/>
      <list-item v="modernizar"/>
      <list-item v="movilizar"/>
      <list-item v="nacionalizar"/>
      <list-item v="narcotizar"/>
      <list-item v="naturalizar"/>
      <list-item v="neutralizar"/>
      <list-item v="normalizar"/>
      <list-item v="estandarizar"/>
      <list-item v="obstaculizar"/>
      <list-item v="oficializar"/>
      <list-item v="organizar"/>
      <list-item v="paralizar"/>
      <list-item v="pasteurizar"/>
      <list-item v="penalizar"/>
      <list-item v="periodizar"/>
      <list-item v="personalizar"/>
      <list-item v="polarizar"/>
      <list-item v="polemizar"/>
      <list-item v="politizar"/>
      <list-item v="popularizar"/>
      <list-item v="preconizar"/>
      <list-item v="privatizar"/>
      <list-item v="profetizar"/>
      <list-item v="profundizar"/>
      <list-item v="protagonizar"/>
      <list-item v="puntualizar"/>
      <list-item v="racionalizar"/>
      <list-item v="radicalizar"/>
      <list-item v="regularizar"/>
      <list-item v="rehospitalizar"/>
      <list-item v="rentabilizar"/>
      <list-item v="reorganizar"/>
      <list-item v="responsabilizar"/>
      <list-item v="ridiculizar"/>
      <list-item v="rivalizar"/>
      <list-item v="rizar"/>
      <list-item v="romanizar"/>
      <list-item v="sacralizar"/>
      <list-item v="secularizar"/>
      <list-item v="sensibilizar"/>
      <list-item v="señalizar"/>
      <list-item v="simbolizar"/>
      <list-item v="simpatizar"/>
      <list-item v="sincronizar"/>
      <list-item v="sintetizar"/>
      <list-item v="sintonizar"/>
      <list-item v="suavizar"/>
      <list-item v="tapizar"/>
      <list-item v="tranquilizar"/>
      <list-item v="trivializar"/>
      <list-item v="urbanizar"/>
      <list-item v="verbalizar"/>
      <list-item v="visualizar"/>
      <list-item v="vulcanizar"/>
      <list-item v="inicializar"/>
      <list-item v="reinicializar"/>
      <list-item v="solidarizar"/>
      <list-item v="independizar"/>
      <list-item v="flexibilizar"/>
      <list-item v="divinizar"/>
      <list-item v="inmovilizar"/>
      <list-item v="atomizar"/>
      <list-item v="globalizar"/>
      <list-item v="laicalizar"/>
      <list-item v="sedentarizar"/>
    </def-list>

  <def-list n="transitivos_personales">
      <list-item v="abandonar"/>
      <list-item v="abatir"/>
      <list-item v="abochornar"/>
      <list-item v="abominar"/>
      <list-item v="abordar"/>
      <list-item v="aborrecer"/>
      <list-item v="abrazar"/>
      <list-item v="abrigar"/>
      <list-item v="abrumar"/>
      <list-item v="aburrir"/>
      <list-item v="acallar"/>
      <list-item v="acariciar"/>
      <list-item v="acaudillar"/>
      <list-item v="aceptar"/>
      <list-item v="aclimatar"/>
      <list-item v="acoger"/>
      <list-item v="acometer"/>
      <list-item v="acompañar"/>
      <list-item v="aconsejar"/>
      <list-item v="acosar"/>
      <list-item v="acostar"/>
      <list-item v="acunar"/>
      <list-item v="adiestrar"/>
      <list-item v="admirar"/>
      <list-item v="admitir"/>
      <list-item v="adorar"/>
      <list-item v="adormecer"/>
      <list-item v="adquirir"/>
      <list-item v="adular"/>
      <list-item v="advertir"/>
      <list-item v="afectar"/>
      <list-item v="afeitar"/>
      <list-item v="afligir"/>
      <list-item v="afrontar"/>
      <list-item v="agachar"/>
      <list-item v="agarrar"/>
      <list-item v="agitar"/>
      <list-item v="agotar"/>
      <list-item v="agradecer"/>
      <list-item v="agrandar"/>
      <list-item v="agregar"/>
      <list-item v="agrupar"/>
      <list-item v="aguantar"/>
      <list-item v="aguardar"/>
      <list-item v="agujerear"/>
      <list-item v="ahogar"/>
      <list-item v="ahorcar"/>
      <list-item v="airear"/>
      <list-item v="aislar"/>
      <list-item v="alabar"/>
      <list-item v="albergar"/>
      <list-item v="alcanzar"/>
      <list-item v="alcoholizar"/>
      <list-item v="alegrar"/>
      <list-item v="alejar"/>
      <list-item v="alentar"/>
      <list-item v="alimentar"/>
      <list-item v="alinear"/>
      <list-item v="alistar"/>
      <list-item v="aliviar"/>
      <list-item v="alojar"/>
      <list-item v="alterar"/>
      <list-item v="aludir"/>
      <list-item v="alumbrar"/>
      <list-item v="alzar"/>
      <list-item v="amamantar"/>
      <list-item v="amar"/>
      <list-item v="amargar"/>
      <list-item v="amarrar"/>
      <list-item v="amenazar"/>
      <list-item v="amonestar"/>
      <list-item v="amontonar"/>
      <list-item v="angustiar"/>
      <list-item v="animar"/>
      <list-item v="aniquilar"/>
      <list-item v="anular"/>
      <list-item v="apaciguar"/>
      <list-item v="apalear"/>
      <list-item v="apartar"/>
      <list-item v="apasionar"/>
      <list-item v="apelar"/>
      <list-item v="apesadumbrar"/>
      <list-item v="apetecer"/>
      <list-item v="aplastar"/>
      <list-item v="aplaudir"/>
      <list-item v="aporrear"/>
      <list-item v="apoyar"/>
      <list-item v="apreciar"/>
      <list-item v="apresurar"/>
      <list-item v="apretar"/>
      <list-item v="aprobar"/>
      <list-item v="aprovechar"/>
      <list-item v="aprovisionar"/>
      <list-item v="apuntar"/>
      <list-item v="apuñalar"/>
      <list-item v="apurar"/>
      <list-item v="armar"/>
      <list-item v="arrancar"/>
      <list-item v="arrasar"/>
      <list-item v="arrastrar"/>
      <list-item v="arrestar"/>
      <list-item v="arriesgar"/>
      <list-item v="arrimar"/>
      <list-item v="arrinconar"/>
      <list-item v="arrojar"/>
      <list-item v="arropar"/>
      <list-item v="arruinar"/>
      <list-item v="asalariar"/>
      <list-item v="asar"/>
      <list-item v="asediar"/>
      <list-item v="asegurar"/>
      <list-item v="asesorar"/>
      <list-item v="asir"/>
      <list-item v="asolar"/>
      <list-item v="asombrar"/>
      <list-item v="asustar"/>
      <list-item v="atacar"/>
      <list-item v="atar"/>
      <list-item v="atascar"/>
      <list-item v="atemorizar"/>
      <list-item v="atender"/>
      <list-item v="aterrar"/>
      <list-item v="aterrorizar"/>
      <list-item v="atizar"/>
      <list-item v="atormentar"/>
      <list-item v="atornillar"/>
      <list-item v="atraer"/>
      <list-item v="atrapar"/>
      <list-item v="atrasar"/>
      <list-item v="atravesar"/>
      <list-item v="atropellar"/>
      <list-item v="aunar"/>
      <list-item v="aupar"/>
      <list-item v="auscultar"/>
      <list-item v="autentificar"/>
      <list-item v="autoinculpar"/>
      <list-item v="automatizar"/>
      <list-item v="autorizar"/>
      <list-item v="auxiliar"/>
      <list-item v="avalar"/>
      <list-item v="aventajar"/>
      <list-item v="avergonzar"/>
      <list-item v="avisar"/>
      <list-item v="ayudar"/>
      <list-item v="azotar"/>
      <list-item v="azuzar"/>
      <list-item v="bailar"/>
      <list-item v="balancear"/>
      <list-item v="bañar"/>
      <list-item v="barrer"/>
      <list-item v="batir"/>
      <list-item v="bautizar"/>
      <list-item v="bendecir"/>
      <list-item v="beneficiar"/>
      <list-item v="besar"/>
      <list-item v="broncear"/>
      <list-item v="burlar"/>
      <list-item v="buscar"/>
      <list-item v="cabrear"/>
      <list-item v="calar"/>
      <list-item v="calcular"/>
      <list-item v="calentar"/>
      <list-item v="calmar"/>
      <list-item v="calumniar"/>
      <list-item v="cambiar"/>
      <list-item v="canjear"/>
      <list-item v="canonizar"/>
      <list-item v="cansar"/>
      <list-item v="capacitar"/>
      <list-item v="capar"/>
      <list-item v="capitanear"/>
      <list-item v="captar"/>
      <list-item v="capturar"/>
      <list-item v="caracterizar"/>
      <list-item v="cargar"/>
      <list-item v="casar"/>
      <list-item v="castigar"/>
      <list-item v="castrar"/>
      <list-item v="cautivar"/>
      <list-item v="cazar"/>
      <list-item v="cegar"/>
      <list-item v="cepillar"/>
      <list-item v="cercar"/>
      <list-item v="cercenar"/>
      <list-item v="cerrar"/>
      <list-item v="certificar"/>
      <list-item v="chamuscar"/>
      <list-item v="chillar"/>
      <list-item v="citar"/>
      <list-item v="civilizar"/>
      <list-item v="clasificar"/>
      <list-item v="clavar"/>
      <list-item v="cocer"/>
      <list-item v="cocinar"/>
      <list-item v="codiciar"/>
      <list-item v="coger"/>
      <list-item v="cohesionar"/>
      <list-item v="colgar"/>
      <list-item v="colocar"/>
      <list-item v="columpiar"/>
      <list-item v="combatir"/>
      <list-item v="comer"/>
      <list-item v="comisionar"/>
      <list-item v="compadecer"/>
      <list-item v="comparar"/>
      <list-item v="compartir"/>
      <list-item v="complementar"/>
      <list-item v="completar"/>
      <list-item v="comprar"/>
      <list-item v="comprender"/>
      <list-item v="concernir"/>
      <list-item v="conciliar"/>
      <list-item v="condenar"/>
      <list-item v="condicionar"/>
      <list-item v="condoler"/>
      <list-item v="conferir"/>
      <list-item v="confesar"/>
      <list-item v="confinar"/>
      <list-item v="confundir"/>
      <list-item v="congelar"/>
      <list-item v="conmemorar"/>
      <list-item v="conminar"/>
      <list-item v="conmover"/>
      <list-item v="conocer"/>
      <list-item v="conseguir"/>
      <list-item v="conservar"/>
      <list-item v="considerar"/>
      <list-item v="consolar"/>
      <list-item v="consolidar"/>
      <list-item v="consternar"/>
      <list-item v="constreñir"/>
      <list-item v="contactar"/>
      <list-item v="contar"/>
      <list-item v="contener"/>
      <list-item v="contentar"/>
      <list-item v="contraatacar"/>
      <list-item v="contradecir"/>
      <list-item v="contrarrestar"/>
      <list-item v="contratar"/>
      <list-item v="controlar"/>
      <list-item v="contusionar"/>
      <list-item v="convencer"/>
      <list-item v="convertir"/>
      <list-item v="convocar"/>
      <list-item v="coordinar"/>
      <list-item v="copiar"/>
      <list-item v="coronar"/>
      <list-item v="corregir"/>
      <list-item v="corroborar"/>
      <list-item v="corroer"/>
      <list-item v="corromper"/>
      <list-item v="cortar"/>
      <list-item v="cortejar"/>
      <list-item v="coser"/>
      <list-item v="cosquillear"/>
      <list-item v="crear"/>
      <list-item v="creer"/>
      <list-item v="criar"/>
      <list-item v="criminalizar"/>
      <list-item v="criticar"/>
      <list-item v="crucificar"/>
      <list-item v="cubrir"/>
      <list-item v="cuestionar"/>
      <list-item v="culpar"/>
      <list-item v="cultivar"/>
      <list-item v="curar"/>
      <list-item v="curtir"/>
      <list-item v="custodiar"/>
      <list-item v="debilitar"/>
      <list-item v="decepcionar"/>
      <list-item v="decorar"/>
      <list-item v="degradar"/>
      <list-item v="degustar"/>
      <list-item v="delatar"/>
      <list-item v="demandar"/>
      <list-item v="democratizar"/>
      <list-item v="demoler"/>
      <list-item v="denominar"/>
      <list-item v="denunciar"/>
      <list-item v="deponer"/>
      <list-item v="depurar"/>
      <list-item v="derretir"/>
      <list-item v="derribar"/>
      <list-item v="derrocar"/>
      <list-item v="derrotar"/>
      <list-item v="desacostumbrar"/>
      <list-item v="desacreditar"/>
      <list-item v="desactivar"/>
      <list-item v="desagradar"/>
      <list-item v="desahuciar"/>
      <list-item v="desanimar"/>
      <list-item v="desaprender"/>
      <list-item v="desaprobar"/>
      <list-item v="desaprovechar"/>
      <list-item v="desarmar"/>
      <list-item v="desarrollar"/>
      <list-item v="desarticular"/>
      <list-item v="desatar"/>
      <list-item v="desatender"/>
      <list-item v="desbancar"/>
      <list-item v="descargar"/>
      <list-item v="descartar"/>
      <list-item v="descentrar"/>
      <list-item v="desconocer"/>
      <list-item v="descoordinar"/>
      <list-item v="descubrir"/>
      <list-item v="desdoblar"/>
      <list-item v="desear"/>
      <list-item v="desenganchar"/>
      <list-item v="desengañar"/>
      <list-item v="desenmascarar"/>
      <list-item v="desenterrar"/>
      <list-item v="desequilibrar"/>
      <list-item v="desesperanzar"/>
      <list-item v="desesperar"/>
      <list-item v="desestabilizar"/>
      <list-item v="desestimar"/>
      <list-item v="desgastar"/>
      <list-item v="desheredar"/>
      <list-item v="desilusionar"/>
      <list-item v="desinfectar"/>
      <list-item v="desintoxicar"/>
      <list-item v="desmentir"/>
      <list-item v="desobedecer"/>
      <list-item v="desocultar"/>
      <list-item v="desordenar"/>
      <list-item v="desorientar"/>
      <list-item v="despachar"/>
      <list-item v="despedazar"/>
      <list-item v="despedir"/>
      <list-item v="despegar"/>
      <list-item v="despeinar"/>
      <list-item v="despejar"/>
      <list-item v="despeñar"/>
      <list-item v="desperdigar"/>
      <list-item v="despertar"/>
      <list-item v="desplazar"/>
      <list-item v="desplegar"/>
      <list-item v="desplumar"/>
      <list-item v="despojar"/>
      <list-item v="despolitizar"/>
      <list-item v="desposar"/>
      <list-item v="desposeer"/>
      <list-item v="despreciar"/>
      <list-item v="desprestigiar"/>
      <list-item v="destacar"/>
      <list-item v="destapar"/>
      <list-item v="desterrar"/>
      <list-item v="destituir"/>
      <list-item v="destronar"/>
      <list-item v="destrozar"/>
      <list-item v="destruir"/>
      <list-item v="desvestir"/>
      <list-item v="desvincular"/>
      <list-item v="detener"/>
      <list-item v="detentar"/>
      <list-item v="detestar"/>
      <list-item v="dibujar"/>
      <list-item v="diputar"/>
      <list-item v="disculpar"/>
      <list-item v="disfrazar"/>
      <list-item v="disgustar"/>
      <list-item v="dispensar"/>
      <list-item v="disponer"/>
      <list-item v="disputar"/>
      <list-item v="distanciar"/>
      <list-item v="distinguir"/>
      <list-item v="distraer"/>
      <list-item v="disuadir"/>
      <list-item v="divertir"/>
      <list-item v="domar"/>
      <list-item v="domesticar"/>
      <list-item v="dominar"/>
      <list-item v="dotar"/>
      <list-item v="echar"/>
      <list-item v="educar"/>
      <list-item v="ejecutar"/>
      <list-item v="electrocutar"/>
      <list-item v="elegir"/>
      <list-item v="eliminar"/>
      <list-item v="elogiar"/>
      <list-item v="embalsamar"/>
      <list-item v="embarazar"/>
      <list-item v="embarcar"/>
      <list-item v="embaucar"/>
      <list-item v="embellecer"/>
      <list-item v="embetunar"/>
      <list-item v="emborrachar"/>
      <list-item v="embozar"/>
      <list-item v="embriagar"/>
      <list-item v="embrollar"/>
      <list-item v="embrujar"/>
      <list-item v="empalar"/>
      <list-item v="empapar"/>
      <list-item v="empaquetar"/>
      <list-item v="emparejar"/>
      <list-item v="emplear"/>
      <list-item v="empobrecer"/>
      <list-item v="empujar"/>
      <list-item v="encaminar"/>
      <list-item v="encantar"/>
      <list-item v="encapuchar"/>
      <list-item v="encapuzar"/>
      <list-item v="encarcelar"/>
      <list-item v="encerrar"/>
      <list-item v="encontrar"/>
      <list-item v="enderezar"/>
      <list-item v="enemistar"/>
      <list-item v="enfrentar"/>
      <list-item v="enfurecer"/>
      <list-item v="engalanar"/>
      <list-item v="engañar"/>
      <list-item v="enjaular"/>
      <list-item v="enmascarar"/>
      <list-item v="enojar"/>
      <list-item v="enredar"/>
      <list-item v="enriquecer"/>
      <list-item v="enrojecer"/>
      <list-item v="ensalzar"/>
      <list-item v="enseñar"/>
      <list-item v="ensuciar"/>
      <list-item v="entender"/>
      <list-item v="enterrar"/>
      <list-item v="entrecasar"/>
      <list-item v="entregar"/>
      <list-item v="entrelazar"/>
      <list-item v="entremezclar"/>
      <list-item v="entretener"/>
      <list-item v="entristecer"/>
      <list-item v="entusiasmar"/>
      <list-item v="enumerar"/>
      <list-item v="envasar"/>
      <list-item v="envenenar"/>
      <list-item v="enviciar"/>
      <list-item v="envidiar"/>
      <list-item v="envilecer"/>
      <list-item v="equiparar"/>
      <list-item v="erigir"/>
      <list-item v="erradicar"/>
      <list-item v="escaldar"/>
      <list-item v="escoger"/>
      <list-item v="esconder"/>
      <list-item v="escuchar"/>
      <list-item v="escudar"/>
      <list-item v="esculpir"/>
      <list-item v="escupir"/>
      <list-item v="espabilar"/>
      <list-item v="espantar"/>
      <list-item v="especializar"/>
      <list-item v="esperar"/>
      <list-item v="espolear"/>
      <list-item v="esquivar"/>
      <list-item v="estabilizar"/>
      <list-item v="estampar"/>
      <list-item v="esterilizar"/>
      <list-item v="estilizar"/>
      <list-item v="estimar"/>
      <list-item v="estirar"/>
      <list-item v="estorbar"/>
      <list-item v="estrellar"/>
      <list-item v="estudiar"/>
      <list-item v="estupidizar"/>
      <list-item v="evaluar"/>
      <list-item v="evitar"/>
      <list-item v="evocar"/>
      <list-item v="exacerbar"/>
      <list-item v="examinar"/>
      <list-item v="exceptuar"/>
      <list-item v="excitar"/>
      <list-item v="excomulgar"/>
      <list-item v="exhibir"/>
      <list-item v="exhortar"/>
      <list-item v="eximir"/>
      <list-item v="explorar"/>
      <list-item v="exprimir"/>
      <list-item v="expropiar"/>
      <list-item v="expulsar"/>
      <list-item v="exterminar"/>
      <list-item v="extinguir"/>
      <list-item v="extorsionar"/>
      <list-item v="extralimitar"/>
      <list-item v="extrañar"/>
      <list-item v="fabricar"/>
      <list-item v="facturar"/>
      <list-item v="fascinar"/>
      <list-item v="fastidiar"/>
      <list-item v="fatigar"/>
      <list-item v="favorecer"/>
      <list-item v="felicitar"/>
      <list-item v="fertilizar"/>
      <list-item v="festejar"/>
      <list-item v="formar"/>
      <list-item v="fortalecer"/>
      <list-item v="fortificar"/>
      <list-item v="forzar"/>
      <list-item v="frotar"/>
      <list-item v="fundir"/>
      <list-item v="galardonar"/>
      <list-item v="ganar"/>
      <list-item v="gasear"/>
      <list-item v="glorificar"/>
      <list-item v="gobernar"/>
      <list-item v="golpear"/>
      <list-item v="grabar"/>
      <list-item v="graduar"/>
      <list-item v="guardar"/>
      <list-item v="guarnecer"/>
      <list-item v="guiar"/>
      <list-item v="habilitar"/>
      <list-item v="hallar"/>
      <list-item v="hechizar"/>
      <list-item v="helenizar"/>
      <list-item v="herir"/>
      <list-item v="hipnotizar"/>
      <list-item v="honrar"/>
      <list-item v="hospedar"/>
      <list-item v="hospitalizar"/>
      <list-item v="hostigar"/>
      <list-item v="humanizar"/>
      <list-item v="humillar"/>
      <list-item v="hundir"/>
      <list-item v="idealizar"/>
      <list-item v="identificar"/>
      <list-item v="idiotizar"/>
      <list-item v="idolatrar"/>
      <list-item v="igualar"/>
      <list-item v="iluminar"/>
      <list-item v="imaginar"/>
      <list-item v="imitar"/>
      <list-item v="impeler"/>
      <list-item v="importunar"/>
      <list-item v="impresionar"/>
      <list-item v="impulsar"/>
      <list-item v="incapacitar"/>
      <list-item v="incitar"/>
      <list-item v="inclinar"/>
      <list-item v="incomodar"/>
      <list-item v="incomunicar"/>
      <list-item v="increpar"/>
      <list-item v="incubar"/>
      <list-item v="inculpar"/>
      <list-item v="indignar"/>
      <list-item v="infamar"/>
      <list-item v="infectar"/>
      <list-item v="inflamar"/>
      <list-item v="influenciar"/>
      <list-item v="influir"/>
      <list-item v="iniciar"/>
      <list-item v="injuriar"/>
      <list-item v="inmolar"/>
      <list-item v="inmortalizar"/>
      <list-item v="inmunizar"/>
      <list-item v="inocular"/>
      <list-item v="inquietar"/>
      <list-item v="inscribir"/>
      <list-item v="inspirar"/>
      <list-item v="instigar"/>
      <list-item v="instituir"/>
      <list-item v="instruir"/>
      <list-item v="insultar"/>
      <list-item v="intercambiar"/>
      <list-item v="interesar"/>
      <list-item v="interiorizar"/>
      <list-item v="internar"/>
      <list-item v="interpelar"/>
      <list-item v="interponer"/>
      <list-item v="interpretar"/>
      <list-item v="interrogar"/>
      <list-item v="interrumpir"/>
      <list-item v="introducir"/>
      <list-item v="inutilizar"/>
      <list-item v="invalidar"/>
      <list-item v="inventar"/>
      <list-item v="invertir"/>
      <list-item v="invitar"/>
      <list-item v="involucrar"/>
      <list-item v="ionizar"/>
      <list-item v="jorobar"/>
      <list-item v="juntar"/>
      <list-item v="juramentar"/>
      <list-item v="juzgar"/>
      <list-item v="lamer"/>
      <list-item v="laurear"/>
      <list-item v="lavar"/>
      <list-item v="levantar"/>
      <list-item v="liar"/>
      <list-item v="liberar"/>
      <list-item v="librar"/>
      <list-item v="licuar"/>
      <list-item v="liderar"/>
      <list-item v="limpiar"/>
      <list-item v="liquidar"/>
      <list-item v="llamar"/>
      <list-item v="loar"/>
      <list-item v="malinterpretar"/>
      <list-item v="maltratar"/>
      <list-item v="mamar"/>
      <list-item v="manchar"/>
      <list-item v="mandar"/>
      <list-item v="mantener"/>
      <list-item v="marcar"/>
      <list-item v="martirizar"/>
      <list-item v="masacrar"/>
      <list-item v="mascar"/>
      <list-item v="matar"/>
      <list-item v="mecer"/>
      <list-item v="medir"/>
      <list-item v="mejorar"/>
      <list-item v="menospreciar"/>
      <list-item v="meter"/>
      <list-item v="mezclar"/>
      <list-item v="minar"/>
      <list-item v="minimizar"/>
      <list-item v="minusvalorar"/>
      <list-item v="mirar"/>
      <list-item v="modelar"/>
      <list-item v="moderar"/>
      <list-item v="modernizar"/>
      <list-item v="mojar"/>
      <list-item v="moler"/>
      <list-item v="molestar"/>
      <list-item v="morder"/>
      <list-item v="mortificar"/>
      <list-item v="mostrar"/>
      <list-item v="mover"/>
      <list-item v="multiplicar"/>
      <list-item v="naturalizar"/>
      <list-item v="necesitar"/>
      <list-item v="neutralizar"/>
      <list-item v="nivelar"/>
      <list-item v="nombrar"/>
      <list-item v="normalizar"/>
      <list-item v="notificar"/>
      <list-item v="numerar"/>
      <list-item v="nutrir"/>
      <list-item v="obedecer"/>
      <list-item v="obligar"/>
      <list-item v="obsequiar"/>
      <list-item v="obstaculizar"/>
      <list-item v="obstruir"/>
      <list-item v="obtener"/>
      <list-item v="ocasionar"/>
      <list-item v="ocultar"/>
      <list-item v="ocupar"/>
      <list-item v="odiar"/>
      <list-item v="ofender"/>
      <list-item v="oír"/>
      <list-item v="olvidar"/>
      <list-item v="omitir"/>
      <list-item v="oponer"/>
      <list-item v="oprimir"/>
      <list-item v="orientar"/>
      <list-item v="oscurecer"/>
      <list-item v="otorgar"/>
      <list-item v="pacificar"/>
      <list-item v="padecer"/>
      <list-item v="palpar"/>
      <list-item v="paralizar"/>
      <list-item v="parir"/>
      <list-item v="pasear"/>
      <list-item v="patentar"/>
      <list-item v="pegar"/>
      <list-item v="peinar"/>
      <list-item v="pellizcar"/>
      <list-item v="penalizar"/>
      <list-item v="penar"/>
      <list-item v="penetrar"/>
      <list-item v="perder"/>
      <list-item v="perdonar"/>
      <list-item v="perfeccionar"/>
      <list-item v="perfumar"/>
      <list-item v="permutar"/>
      <list-item v="perpetuar"/>
      <list-item v="perseguir"/>
      <list-item v="pesar"/>
      <list-item v="pescar"/>
      <list-item v="picar"/>
      <list-item v="pillar"/>
      <list-item v="pinchar"/>
      <list-item v="pintar"/>
      <list-item v="pisotear"/>
      <list-item v="plantar"/>
      <list-item v="podar"/>
      <list-item v="poder"/>
      <list-item v="politizar"/>
      <list-item v="popularizar"/>
      <list-item v="poseer"/>
      <list-item v="posibilitar"/>
      <list-item v="potenciar"/>
      <list-item v="precipitar"/>
      <list-item v="preferir"/>
      <list-item v="preguntar"/>
      <list-item v="premiar"/>
      <list-item v="preocupar"/>
      <list-item v="preparar"/>
      <list-item v="preservar"/>
      <list-item v="presionar"/>
      <list-item v="prestar"/>
      <list-item v="prestigiar"/>
      <list-item v="pretender"/>
      <list-item v="prevenir"/>
      <list-item v="primar"/>
      <list-item v="privar"/>
      <list-item v="privatizar"/>
      <list-item v="privilegiar"/>
      <list-item v="probar"/>
      <list-item v="procesar"/>
      <list-item v="proclamar"/>
      <list-item v="procrastinar"/>
      <list-item v="producir"/>
      <list-item v="proporcionar"/>
      <list-item v="propulsar"/>
      <list-item v="proveer"/>
      <list-item v="proyectar"/>
      <list-item v="pulir"/>
      <list-item v="quemar"/>
      <list-item v="querer"/>
      <list-item v="quitar"/>
      <list-item v="radicalizar"/>
      <list-item v="rajar"/>
      <list-item v="rapar"/>
      <list-item v="rascar"/>
      <list-item v="razonar"/>
      <list-item v="readmitir"/>
      <list-item v="reanimar"/>
      <list-item v="rearmar"/>
      <list-item v="rechazar"/>
      <list-item v="recibir"/>
      <list-item v="reciclar"/>
      <list-item v="recluir"/>
      <list-item v="reclutar"/>
      <list-item v="recobrar"/>
      <list-item v="recoger"/>
      <list-item v="recolectar"/>
      <list-item v="recombinar"/>
      <list-item v="recomprar"/>
      <list-item v="reconocer"/>
      <list-item v="rectificar"/>
      <list-item v="recubrir"/>
      <list-item v="recurrir"/>
      <list-item v="redimir"/>
      <list-item v="reelegir"/>
      <list-item v="reemplazar"/>
      <list-item v="reencontrar"/>
      <list-item v="reenviar"/>
      <list-item v="reformar"/>
      <list-item v="reforzar"/>
      <list-item v="refrenar"/>
      <list-item v="registrar"/>
      <list-item v="regular"/>
      <list-item v="regularizar"/>
      <list-item v="rehabilitar"/>
      <list-item v="rehospitalizar"/>
      <list-item v="rehusar"/>
      <list-item v="reinsertar"/>
      <list-item v="reintroducir"/>
      <list-item v="relacionar"/>
      <list-item v="relegar"/>
      <list-item v="rematar"/>
      <list-item v="remendar"/>
      <list-item v="remodelar"/>
      <list-item v="remolcar"/>
      <list-item v="remontar"/>
      <list-item v="remunerar"/>
      <list-item v="renovar"/>
      <list-item v="rentabilizar"/>
      <list-item v="reordenar"/>
      <list-item v="reorientar"/>
      <list-item v="repartir"/>
      <list-item v="repatriar"/>
      <list-item v="reportar"/>
      <list-item v="reprender"/>
      <list-item v="representar"/>
      <list-item v="reprimir"/>
      <list-item v="reprobar"/>
      <list-item v="reprochar"/>
      <list-item v="reproducir"/>
      <list-item v="repudiar"/>
      <list-item v="repugnar"/>
      <list-item v="repulsar"/>
      <list-item v="rescatar"/>
      <list-item v="reservar"/>
      <list-item v="resguardar"/>
      <list-item v="respaldar"/>
      <list-item v="respectar"/>
      <list-item v="respetar"/>
      <list-item v="responsabilizar"/>
      <list-item v="restablecer"/>
      <list-item v="resucitar"/>
      <list-item v="retener"/>
      <list-item v="retocar"/>
      <list-item v="retomar"/>
      <list-item v="retorcer"/>
      <list-item v="retrasar"/>
      <list-item v="retratar"/>
      <list-item v="reunificar"/>
      <list-item v="revalidar"/>
      <list-item v="ridiculizar"/>
      <list-item v="rifar"/>
      <list-item v="rizar"/>
      <list-item v="robar"/>
      <list-item v="rodear"/>
      <list-item v="rogar"/>
      <list-item v="romanizar"/>
      <list-item v="romper"/>
      <list-item v="rozar"/>
      <list-item v="saborear"/>
      <list-item v="saciar"/>
      <list-item v="sacralizar"/>
      <list-item v="sacrificar"/>
      <list-item v="sacudir"/>
      <list-item v="saludar"/>
      <list-item v="salvaguardar"/>
      <list-item v="salvar"/>
      <list-item v="sanar"/>
      <list-item v="sancionar"/>
      <list-item v="saquear"/>
      <list-item v="satisfacer"/>
      <list-item v="saturar"/>
      <list-item v="sazonar"/>
      <list-item v="secar"/>
      <list-item v="seccionar"/>
      <list-item v="secularizar"/>
      <list-item v="secundar"/>
      <list-item v="sedentarizar"/>
      <list-item v="seducir"/>
      <list-item v="segar"/>
      <list-item v="segregar"/>
      <list-item v="seguir"/>
      <list-item v="sensibilizar"/>
      <list-item v="sentar"/>
      <list-item v="sentenciar"/>
      <list-item v="sentir"/>
      <list-item v="separar"/>
      <list-item v="sepultar"/>
      <list-item v="silenciar"/>
      <list-item v="sobornar"/>
      <list-item v="sobrealimentar"/>
      <list-item v="sobrecargar"/>
      <list-item v="sobrepasar"/>
      <list-item v="socorrer"/>
      <list-item v="sofocar"/>
      <list-item v="solucionar"/>
      <list-item v="solventar"/>
      <list-item v="someter"/>
      <list-item v="soportar"/>
      <list-item v="sorprender"/>
      <list-item v="sortear"/>
      <list-item v="sosegar"/>
      <list-item v="sostener"/>
      <list-item v="suavizar"/>
      <list-item v="subestimar"/>
      <list-item v="subordinar"/>
      <list-item v="subyugar"/>
      <list-item v="sufrir"/>
      <list-item v="sujetar"/>
      <list-item v="superar"/>
      <list-item v="supervisar"/>
      <list-item v="suprimir"/>
      <list-item v="suspender"/>
      <list-item v="sustentar"/>
      <list-item v="tachar"/>
      <list-item v="temer"/>
      <list-item v="tentar"/>
      <list-item v="timar"/>
      <list-item v="tirar"/>
      <list-item v="tirotear"/>
      <list-item v="tocar"/>
      <list-item v="tolerar"/>
      <list-item v="tomar"/>
      <list-item v="torturar"/>
      <list-item v="traicionar"/>
      <list-item v="tranquilizar"/>
      <list-item v="transferir"/>
      <list-item v="transformar"/>
      <list-item v="transportar"/>
      <list-item v="trastornar"/>
      <list-item v="tratar"/>
      <list-item v="travestir"/>
      <list-item v="tumbar"/>
      <list-item v="ubicar"/>
      <list-item v="ultrajar"/>
      <list-item v="ungir"/>
      <list-item v="unir"/>
      <list-item v="usar"/>
      <list-item v="utilizar"/>
      <list-item v="velar"/>
      <list-item v="vencer"/>
      <list-item v="vender"/>
      <list-item v="vengar"/>
      <list-item v="ver"/>
      <list-item v="vestir"/>
      <list-item v="vigilar"/>
      <list-item v="vincular"/>
      <list-item v="violar"/>
      <list-item v="violentar"/>
      <list-item v="visitar"/>
      <list-item v="visualizar"/>
      <list-item v="vituperar"/>
      <list-item v="volcar"/>
      <list-item v="zarandear"/>
      <list-item v="zurrar"/>
  </def-list>

  </section-def-lists>


  <section-def-macros>

    <def-macro n="tipus_verbs" npar="1"> <!-- tots els verbs passen per aqui -->
      <choose>
        <when>
          <test><in caseless="yes"><clip pos="1" side="sl" part="lem"/><list n="agradar"/></in></test>
          <let><var n="tipus_verb"/><lit-tag v="like"/></let>
        </when>
        <when>
           <test><in caseless="yes"><clip pos="1" side="sl" part="lem"/><list n="moviment"/></in></test>
           <let><var n="tipus_verb"/><lit-tag v="moviment"/></let>
        </when>
        <when>
          <test><in caseless="yes"><clip pos="1" side="sl" part="lemh"/><list n="volition"/></in></test>
          <let><var n="tipus_verb"/><lit-tag v="volition"/></let>
        </when>
        <when>
          <test><in caseless="yes"><clip pos="1" side="tl" part="lem"/><list n="predikativo"/></in></test>
          <let><var n="tipus_verb"/><lit-tag v="predikativo"/></let>
        </when>
        <when>
          <test><in caseless="yes"><clip pos="1" side="sl" part="lemh"/><list n="reportingverb"/></in></test>
          <let><var n="tipus_verb"/><lit-tag v="reportingverb"/></let>
        </when>
<!-- no se usa
        <when>
          <test><equal><clip pos="1" side="sl" part="a_verb2"/><lit-tag v="vblex.pron"/></equal></test>
          <let><var n="tipus_verb2"/><lit-tag v="pron"/></let>
        </when>
-->
        <otherwise>
          <let><var n="tipus_verb"/><lit-tag v="res"/></let>
        </otherwise>
      </choose>

      <choose>
        <when>
          <test><in caseless="yes"><clip pos="1" side="sl" part="lem"/><list n="transitivos_personales"/></in></test>
          <let><var n="tipus_verb2"/><lit-tag v="eliminar_a"/></let>
        </when>
        <otherwise>
          <let><var n="tipus_verb2"/><lit-tag v="no_eliminar_a"/></let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="tipus_verbs_like" npar="1"> <!-- estas eraro en la analizo: verboj povas esti diverstipaj, sed nur unu oni elektas; tio aparte sentiĝas, en la verbogrupoj: me gusta leer, me gusta ir; ĉi tie, se verbo estas like-tipa, ĝi nepre fariĝas tia -->
      <choose>
        <when>
          <test><in caseless="yes"><clip pos="1" side="sl" part="lemh"/><list n="agradar"/></in></test>
          <let><var n="tipus_verb"/><lit-tag v="like"/></let>
        </when>
      </choose>
    </def-macro>

<def-macro n="pli_plej" npar="1">
   <choose>
        <when>
          <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="más"/></equal></test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="plej"/></let>
        </when>
        <when>
          <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="menos"/></equal></test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="malplej"/></let>
        </when>
   </choose>
</def-macro>

<def-macro n="pli_plej2" npar="1">
   <choose>
        <when>
          <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="mejor"/></equal></test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="plej bona"/></let>
        </when>
        <when>
          <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="peor"/></equal></test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="plej malbona"/></let>
        </when>
        <when>
          <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="mayor"/></equal></test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="plej granda"/></let>
        </when>
        <when>
          <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="menor"/></equal></test>
          <let><clip pos="1" side="tl" part="lem"/><lit v="plej malgranda"/></let>
        </when>
   </choose>
</def-macro>

  <def-macro n="f_bcond" npar="2"><!--Per mirar si el blanc conté o no format. Cal posar aquesta funció en les regles en què desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si conté format cal conservar-la, si no en conté cal eliminar-la perquè no apareguin dos espais seguits. -->
             <choose>
               <when>
                 <test><not><equal><b pos="1"/><lit v=" "/></equal></not></test>
            <out>
              <b pos="1"/>
            </out>
          </when>             
             </choose>
  </def-macro>


    <!-- analiza el pronombre y el verbo y actualiza variables que indican cómo tiene que generarse la salida y, eventualmente, el lema del verbo -->
    <!-- parametro 1 = pron, parametro 2 = pers verb, parametro 3 = lema verb -->
    <!-- variables de salida:
        forigi_ref: indica si hay que sacar el pronombre (valor = "") o no (valor = "forigi")
        aldoni_oni: indica si hay que añadir el pronombre impersonal "oni" (valor = "aldoni") o no (valor = "ne_aldoni")
        vimpers: indica si hay que el verbo es personal (valor = "pers") o impersonal (valor = "impers"); se utilizará posteriormente para la generación (o no) del pronombre sujeto
        vigxi1: indica si el verbo tiene el sufijo iĝi (valor = "iĝi") o no (valor = "ne_iĝi"); se utilizará posteriormente para la generación (o no) del acusativo
        vigxi2: en caso que vigxi1 = "iĝi", contiene código para añadir a <lu>
    -->
    <def-macro n="control_pron" npar="3">
        <let><var n="forigi_ref"/><lit v=""/></let>
        <let><var n="aldoni_oni"/><lit v="ne_aldoni"/></let>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
<!-- es podria fer inicial que en el cas de "había PP" (p1sg, p3sg) si el verb és de tipus pronominal, mirem el pron per desambiguar -->
<let><var n="debug1"/><lit-tag v="-1"/></let>
<let><var n="debug2"/><lit-tag v="-1"/></let>
<let><var n="debug3"/><lit-tag v="-1"/></let>
<let><var n="debug4"/><lit-tag v="-1"/></let>

        <call-macro n="correccion_lo"><with-param pos="1"/></call-macro>
        <call-macro n="control_ref"><with-param pos="1"/><with-param pos="2"/><with-param pos="3"/></call-macro>
        <call-macro n="control_pron_3p"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="control_igxi"><with-param pos="1"/><with-param pos="2"/><with-param pos="3"/></call-macro>
        <call-macro n="control_oni"><with-param pos="1"/><with-param pos="2"/><with-param pos="3"/></call-macro>
    </def-macro>

    <def-macro n="control_ref" npar="3">
      <!-- canvia el lema dels verbs ref i elimina el prn si cal-->
      <!-- par1 = pron, par2 = pers verb, par3 = lema verb -->
<let><var n="debug2"/><lit-tag v="0"/></let>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <and>
                  <equal><clip pos="1" side="sl" part="tipus_prn_ref"/><lit-tag v="ref"/></equal>
                  <or>
                    <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p3"/></equal>
                    <equal><clip pos="2" side="sl" part="temps"/><lit-tag v="inf"/></equal>
                    <equal><clip pos="2" side="sl" part="temps"/><lit-tag v="ger"/></equal>
                  </or>
                </and>
                <and>
                  <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p2"/></equal>
                  <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p2"/></equal>
                  <equal><clip pos="1" side="sl" part="nbr"/><clip pos="2" side="sl" part="nbr"/></equal>
                </and>
                <and>
                  <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                  <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                  <equal><clip pos="1" side="sl" part="nbr"/><clip pos="2" side="sl" part="nbr"/></equal>
                </and>
                <and> <!-- "me había", donde "había" analizado como 3a pers -->
                  <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                  <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p3"/></equal>
                  <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="sl" part="temps"/><lit-tag v="pii"/></equal>
                  <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="haber"/></equal>
                </and>
                <and> <!-- "se había", donde "había" analizado como 1a pers -->
                  <equal><clip pos="1" side="sl" part="tipus_prn_ref"/><lit-tag v="ref"/></equal>
                  <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                  <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="sl" part="temps"/><lit-tag v="pii"/></equal>
                  <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="haber"/></equal>
                </and>
              </or>
              <in caseless="yes"><clip pos="3" side="sl" part="lem"/><list n="verbs_ref"/></in>
            </and>
          </test>
<let><var n="debug2"/><lit-tag v="1"/></let>
          <!-- canvia aquests verbs-->
          <choose>
<!-- for -->
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="comer"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="formanĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="beber"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="fortrinki"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="tragar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="forgluti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="leer"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="forlegi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="ir"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="foriri"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="llevar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="forporti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>

<!-- ek -->
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="poner# en servicio"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="ekfunkcii"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="producir# dolor"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="ekdolori"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="enterar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="enterar#"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="ekscii"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="afincar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="ekloĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>

<!-- aliaj -->
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="volver"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="convertir"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="tornar"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="fariĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="aprovechar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="profiti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="traer"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="kunporti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="tratar#"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="temi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
              <let><var n="vimpers"/><lit-tag v="impers"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="producir"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="realizar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="celebrar"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="okazi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
              <let><var n="vimpers"/><lit-tag v="impers"/></let> <!-- para que no se genere pronombre sujeto -->
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="referir"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="rilati"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="parecer"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="simili"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="encargar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="okupiĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="fusionar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="kunfandiĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="pasar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="pasigi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="acordar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="acordar# de"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="rememori"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="adherir"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="aliĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="criar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="kreski"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="situar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="ubicar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="localizar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="encontrar"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="situi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="encontrar# presente"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="troviĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="negar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="rifuzi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="reunir"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="renkontiĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="dar# cuenta"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="rimarki"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="hospedar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="gasti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="incorporar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="incorporar#"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="aliĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="reincorporar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="reveni"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="licenciar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="graduar"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="diplomiĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="despedir"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="despedir# de"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="adiaŭi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="derrumbar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="desplomar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="desmoronar"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="disfali"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="matricular"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="enmatrikuliĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="desprender"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="seniĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="estrenar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="debuti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="concienciar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="ekkonscii"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="posicionar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="preni# partion"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="poner# en movimiento"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="ekmoviĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="poner# en marcha"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="poner# en funcionamiento"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="ekstarti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="apreciar"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="divisar"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="vidi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="desajustar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="panei"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="posicionar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="preni# starpunkton"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="disputar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="konkuri"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="distinguir#"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="elstari"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="esfumar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="malaperi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="sustraer# a"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="eviti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="sentir"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="farti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="congregar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="kuniĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test>
                <or>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="enfrentar# a"/></equal>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="enfrentar# contra"/></equal>
                </or>
              </test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="fronti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="acomodar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="instaliĝi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="asemejar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="simili"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="rumorear"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="kuri# la famo"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbntr"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
              <let><var n="vimpers"/><lit-tag v="impers"/></let> <!-- para que no se genere pronombre sujeto -->
            </when>

            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="poner# en evidencia"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="perfidi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v=""/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="desentrañar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="foroferi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v=""/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="ceñir"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="teni"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v=""/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="suicidar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="mortigi"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v=""/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="disponer"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="prepari"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><var n="forigi_ref"/><lit v=""/></let>
            </when>

            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="saludar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="saluti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><clip pos="1" side="tl" part="lem"/><lit v="unu la alian"/></let>
              <let><var n="forigi_ref"/><lit v=""/></let>
            </when>
            <when>
              <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="enfrentar"/></equal></test>
              <let><clip pos="3" side="tl" part="lem"/><lit v="fronti"/></let>
              <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
              <let><clip pos="1" side="tl" part="lem"/><lit v="unu la alian"/></let>
              <let><var n="forigi_ref"/><lit v=""/></let>
            </when>

            <otherwise>
<let><var n="debug2"/><lit-tag v="2"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </otherwise>
          </choose>
        </when>
<!--
<otherwise>
<let><var n="debug2"/><lit-tag v="3"/></let>
<choose>
<when>
<test><in caseless="yes"><clip pos="3" side="sl" part="lem"/><list n="verbs_ref"/></in></test>
<let><var n="debug2"/><lit-tag v="4"/></let>
</when>
</choose>
</otherwise>
-->
      </choose>
    </def-macro>

    <!-- en el caso que la persona y nombre del pronombre y del verbo coincidan y el verbo esté en la lista verbs_igxi, pone las variable vigxi1 y vigxi2 con valores para generar verbos con el sufijo igxi -->
    <def-macro n="control_igxi" npar="3">
      <choose>
        <when>
          <test>
            <or>
              <and>
                <equal><clip pos="1" side="sl" part="tipus_prn_ref"/><lit-tag v="ref"/></equal>
                <or>
                  <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p3"/></equal>
                  <equal><clip pos="2" side="sl" part="temps"/><lit-tag v="inf"/></equal>
                  <equal><clip pos="2" side="sl" part="temps"/><lit-tag v="ger"/></equal>
                </or>
              </and>
              <and>
                <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p2"/></equal>
                <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p2"/></equal>
                <equal><clip pos="1" side="sl" part="nbr"/><clip pos="2" side="sl" part="nbr"/></equal>
              </and>
              <and>
                <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                <equal><clip pos="1" side="sl" part="nbr"/><clip pos="2" side="sl" part="nbr"/></equal>
              </and>
                <and> <!-- "me había", donde "había" analizado como 3a pers -->
                  <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                  <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p3"/></equal>
                  <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="sl" part="temps"/><lit-tag v="pii"/></equal>
                  <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="haber"/></equal>
                </and>
                <and> <!-- "se había", donde "había" analizado como 1a pers -->
                  <equal><clip pos="1" side="sl" part="tipus_prn_ref"/><lit-tag v="ref"/></equal>
                  <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                  <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
                  <equal><clip pos="2" side="sl" part="temps"/><lit-tag v="pii"/></equal>
                  <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="haber"/></equal>
                </and>
            </or>
          </test>
          <choose>
            <when>
              <test><in caseless="yes"><clip pos="3" side="sl" part="lem"/><list n="verbs_igxi"/></in></test>
              <let><var n="vigxi1"/><lit-tag v="iĝi"/></let>
              <let><var n="vigxi2"/><lit-tag v="iĝi"/></let>
              <let><var n="forigi_ref"/><lit v="forigi"/></let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="control_oni" npar="3">
      <!-- indica que cal afegir oni (i eliminar el prn) si cal-->
      <!-- par1 = pron, par2 = pers verb, par3 = lema verb -->
<let><var n="debug4"/><lit-tag v="0"/></let>
      <choose>
        <when>
          <test>
            <and>
              <equal><clip pos="1" side="sl" part="tipus_prn_ref"/><lit-tag v="ref"/></equal>
              <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p3"/></equal>
              <in caseless="yes"><clip pos="3" side="sl" part="lem"/><list n="verbs_oni"/></in>
            </and>
          </test>
          <let><var n="aldoni_oni"/><lit v="aldoni"/></let>
          <let><var n="forigi_ref"/><lit v="forigi"/></let>
<let><var n="debug4"/><lit-tag v="1"/></let>
        </when>
      </choose>
    </def-macro>

    <!-- cambia la raíz en el caso que pronombre sea "lo, la, los, las" y el verbo perteneza a la lista verbs_pron -->
    <def-macro n="control_pron_3p" npar="2">
<let><var n="debug3"/><lit-tag v="0"/></let>
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="prpers"/></equal> <!-- lo, la, los, las -->
              <equal><clip pos="1" side="sl" part="a_prn"/><lit-tag v="prn.pro"/></equal>
              <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p3"/></equal>
              <in caseless="yes"><clip pos="2" side="sl" part="lem"/><list n="verbs_pron"/></in>
            </and>
          </test>
<let><var n="debug3"/><lit-tag v="1"/></let>
          <choose>
            <when>
              <test><equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="pasar"/></equal></test>
              <let><clip pos="2" side="tl" part="lem"/><lit v="pasigi"/></let>
              <let><clip pos="2" side="tl" part="a_verb"/><lit-tag v="vbtr"/></let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="firstWord" npar="1">
      <choose>
        <when>
          <test><equal><clip pos="1" side="sl" part="a_np_acr"/><lit v=""/></equal></test>
          <choose>
            <when><test><equal><var n="EOS"/><lit v="true"/></equal></test> <!-- post punkto, majusklo -->
              <let><var n="caseFirstWord"/><lit v="Aa"/></let>
              <modify-case><clip pos="1" side="tl" part="lem"/><lit v="aa"/></modify-case>
            </when>
            <when><test><equal><var n="EOS_soft"/><lit v="true"/></equal></test> <!-- post dupunkto k.s., tiel kiel la aŭtoro faras -->
              <let><var n="caseFirstWord"/><case-of pos="1" side="sl" part="lem"/></let>
              <modify-case><clip pos="1" side="tl" part="lem"/><lit v="aa"/></modify-case>
            </when>
          </choose>
        </when>
        <otherwise>
          <let><var n="caseFirstWord"/><lit v="aa"/></let>
        </otherwise>
      </choose>
      <let><var n="EOS"/><lit v="false"/></let>
      <let><var n="EOS_soft"/><lit v="false"/></let>
    </def-macro>

    <def-macro n="correccion_lo" npar="1"> <!-- cambia lo<prn><tn><mf> a prpers<prn><pro><p3><m> -->
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="lo"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="tipus_prn"/>
                <lit-tag v="tn"/>
              </equal>
            </and>
          </test>
          <let>
          <clip pos="1" side="tl" part="whole"/>
          <concat>
            <lit v="prpers"/>
            <lit-tag v="prn.obj.p3.m.sg"/>
          </concat>
          </let>
        </when>
      </choose>
    </def-macro>


    <def-macro n="default_nombro" npar="0"> <!-- ŝanĝas nombre al sg, se ĝi estas ND aŭ sp -->
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <var n="nombre"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <var n="nombre"/>
                <lit-tag v="sp"/>
              </equal>
              <equal>
                <var n="nombre"/>
                <lit-tag v=""/>
              </equal>
            </or>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="sg"/>
          </let>
        </when>
      </choose>
    </def-macro>


    <def-macro n="nombro1" npar="1">
      <let>
        <var n="nombre"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <not>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v=""/>
              </equal>
            </not>
<!--
            <or>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
            </or>
-->
          </test>
          <let>
            <var n="nombre"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="nombro2" npar="2">
        <!-- par1 = NOM (prioritata), par2 = DET/ADJ (malprioritata); eliro: nombre -->
        <!-- ĝi ŝanĝas <clip pos="1" side="tl" part="nbr"/> por eventuala konsulto en makrooj nombro3, 4 ktp. -->
      <let>
        <var n="nombre"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="nbr"/>
            </equal>
          </test>
          <let>
            <var n="nombre"/>
            <clip pos="2" side="tl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </equal>
                <equal>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="pl"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="nbr"/>
          </let>
          <let>
            <var n="nombre"/>
            <clip pos="2" side="tl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="nombre"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="nombre"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="nombro3" npar="3"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
    </def-macro>

    <def-macro n="nombro4" npar="4"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
        <call-macro n="nombro3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
    </def-macro>

    <def-macro n="nombro5" npar="5"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
        <call-macro n="nombro4">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
    </def-macro>

    <def-macro n="nombro6" npar="6"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
        <call-macro n="nombro5">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
    </def-macro>

    <def-macro n="nom_cas" npar="1"> <!-- EO: marca els SN que si són objecte estaran en acusatiu (les regles del t2x s'encarreguen; també marca els dets interrogatius 'quin' per a tractar-los al t2x)-->
        <choose>
          <when>
            <test>
              <or>
                <in caseless="yes"><clip pos="1" side="tl" part="lem"/><list n="detsprep"/></in>
                <in caseless="yes"><clip pos="1" side="sl" part="lem"/><list n="quien"/></in>
              </or>
            </test>
            <let><var n="changecase"/><lit-tag v="sense"/></let>
          </when>
          <when>
            <test>
               <in caseless="yes"><clip pos="1" side="sl" part="lem"/><list n="quin"/></in>
            </test>
              <let><var n="changecase"/><lit-tag v="nomi2"/></let>
          </when>
          <otherwise>
              <let><var n="changecase"/><lit-tag v="nom"/></let>
          </otherwise>
        </choose>
              <let>
                <var n="case"/>
                <lit-tag v="nom"/>
              </let>
    </def-macro>

    <def-macro n="nombre_nom" npar="1">
      <let>
        <var n="nombre"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="sp"/>
          </let>
        </when>
       <when>
        <test>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="sg"/>
          </let>
        </when>

        <otherwise>
          <let>
            <var n="nombre"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="nombre_nom2" npar="1">
      <let>
        <var n="nombre2"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="nombre2"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="nombre2"/>
            <lit-tag v="sp"/>
          </let>
        </when>
       <when>
        <test>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
          </test>
          <let>
            <var n="nombre2"/>
            <lit-tag v="sg"/>
          </let>
        </when>

        <otherwise>
          <let>
            <var n="nombre2"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="set_temps" npar="1">
        <let><var n="nverb"/><lit v="verbcj"/></let>
        <choose>
              <when>  <!-- traduccions a present -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
<!-- tro da eraroj de la senambiguigilo, tamen estas problemo en la persona 2p.imp = 3p.pri
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="imp"/>
                    </equal>
-->
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pres"/> <!-- present -->
                </let>
              </when>
              <when>           <!-- traduccions a passat -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
              </when>

              <when>           <!-- traduccions a futur -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
              </when>

              <when>           <!-- traduccions a condicional -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fts"/><!--fuéremos -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
              </when>

              <when>           <!-- traduccions a infinitiu -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let><var n="nverb"/><lit v="inf"/></let>
              </when>

              <when>           <!-- traduccions a gerundi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="ger"/>
                </let>
                <let><var n="nverb"/><lit v="verbger"/></let>
              </when>

              <when>           <!-- traduccions a pp -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
                <let><var n="nverb"/><lit v="pp"/></let>
              </when>
            </choose>
    </def-macro>

    <def-macro n="set_temps2" npar="2">
        <let><var n="nverb"/><lit v="verbcj_perif"/></let>
            <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fts"/><!--fuéremos -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de gerundi -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="ger"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbger"/></let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="inf"/></let>
              </when>
             </choose>
    </def-macro>

    <def-macro n="haber__pp" npar="2">
        <let><var n="nverb"/><lit v="verbcj_perif"/></let>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                    <and><!-- ni evitas "estis estinta" -->
                      <or>
                        <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="ser"/></equal>
                        <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="estar"/></equal>
                      </or>
                      <or>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="ifi"/><!--digué -->
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="pii"/><!--deia -->
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="pis"/><!--digués -->
                        </equal>
                      </or>
                    </and>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="vigxi1"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV01"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <var n="vigxi2"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="vigxi1"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV02"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <var n="vigxi2"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="haya"/><!--TAGGER-->
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj2" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="prs"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="vigxi1"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV03"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <var n="vigxi2"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

            <otherwise>
            <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fts"/><!--fuéremos -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTI + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="inf"/></let>
              </when>
              <when>      <!-- traduccions des de gerundi -> ESTANTE + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="ger"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="ger"/></let>
              </when>
             </choose>

                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="vigxi1"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV04"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <var n="vigxi2"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
    </def-macro>

    <def-macro n="haber__pp_ek" npar="2">  <!-- kiel supre, sed kun aldono de la prefikso ek -->
        <let><var n="nverb"/><lit v="verbcj_perif"/></let>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                    <and><!-- ni evitas "estis estinta" -->
                      <or>
                        <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="ser"/></equal>
                        <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="estar"/></equal>
                      </or>
                      <or>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="ifi"/><!--digué -->
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="pii"/><!--deia -->
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="pis"/><!--digués -->
                        </equal>
                      </or>
                    </and>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV05"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV06"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="haya"/><!--TAGGER-->
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj2" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="prs"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV07"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

            <otherwise>
            <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fts"/><!--fuéremos -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTI + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="inf"/></let>
              </when>
              <when>      <!-- traduccions des de gerundi -> ESTANTE + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="ger"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="ger"/></let>
              </when>
             </choose>

                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV08"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
    </def-macro>

    <def-macro n="haber__pp_igxi" npar="2">
        <let><var n="nverb"/><lit v="verbcj_perif"/></let>
        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                    <and><!-- ni evitas "estis estiĝinta" -->
                      <or>
                        <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="ser"/></equal>
                        <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="estar"/></equal>
                      </or>
                      <or>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="ifi"/><!--digué -->
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="pii"/><!--deia -->
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="temps"/>
                          <lit-tag v="pis"/><!--digués -->
                        </equal>
                      </or>
                    </and>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbntr"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                      <tag><lit-tag v="iĝi"/></tag>
<tag><lit-tag v="SV09"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="iĝi"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbntr"/></tag>
                      <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                      <tag><lit-tag v="iĝi"/></tag>
<tag><lit-tag v="SV10"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="iĝi"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="haya"/><!--TAGGER-->
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj2" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbntr"/></tag>
                      <tag><lit-tag v="prs"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                      <tag><lit-tag v="iĝi"/></tag>
<tag><lit-tag v="SV11"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="iĝi"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
              </when>

            <otherwise>
            <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fts"/><!--fuéremos -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="verbcj_perif"/></let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTI + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="inf"/></let>
              </when>
              <when>      <!-- traduccions des de gerundi -> ESTANTE + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="ger"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
                <let><var n="nverb"/><lit v="ger"/></let>
              </when>
             </choose>

                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbntr"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                      <tag><lit-tag v="iĝi"/></tag>
<tag><lit-tag v="SV12"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="iĝi"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
    </def-macro>

  </section-def-macros>

  <section-rules>




<!--*************************************** REGLES DE SN ******************************************** -->


<rule comment="REGLA: ANTROPÒNIM (Barcelona)">
      <pattern>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ART ANTROPÓNIMO (La María - María; se elimina el artículo)">
      <pattern>
        <pattern-item n="def"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="2" side="tl" part="nbr"/>
        </let>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!--
    <rule comment="REGLA: ANTROPÒNIM ANTROPÒNIM (Pierre Dupont)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="antunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM ANTROPÒNIM (Pierre Dupont)">
      <pattern>
        <pattern-item n="antunk"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


    <rule comment="REGLA: ANTROPÒNIM de NP (Pierre de Bretagne, Alexander von Humboldt)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="de_von"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <let><var n="nombre"/><clip pos="1" side="tl" part="nbr"/></let>
   <choose>
     <when>
      <test>
        <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="ir"/></equal>
      </test>
        <let><clip pos="2" side="tl" part="lem"/><lit v="van"/></let>
     </when>
   </choose>
        <out>
          <chunk name="ant2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!--
    <rule comment="REGLA: Saint-NP (Saint-Pierre)">
      <pattern>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="loc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NP-Saint-NP (Lay-Saint-Pierre)">
      <pattern>
        <pattern-item n="npunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="loc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="sl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="sl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: Saint-NP-any-NP (Saint-Etienne-les-Remiremont)">
      <pattern>
        <pattern-item n="Saint"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="any"/>
        <pattern-item n="guio"/>
        <pattern-item n="npunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="loc333" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><lit-tag v="sg.nom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="sl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="sl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="sl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="sl" part="lem"/>
              <clip pos="5" side="tl" part="tags"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="sl" part="lem"/>
              <clip pos="6" side="tl" part="tags"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="7" side="sl" part="lem"/>
              <clip pos="7" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


<!--
    <rule comment="REGLA: ANTROPÒNIM-ANTROPÒNIM (Jean-Michel)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="guio"/>
        <pattern-item n="antunk"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM-ANTROPÒNIM (Jean-Michel)">
      <pattern>
        <pattern-item n="antunk"/>
        <pattern-item n="guio"/>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="1" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="ant3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="sl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


<rule comment="REGLA: ART TOPÓNIMO (Los Pirineos - Pireneoj; se elimina el artículo)">
      <pattern>
        <pattern-item n="def"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="2" side="tl" part="nbr"/>
        </let>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="np"/>
              <lit-tag v="loc"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: todo TOPÓNIMO (toda Europa -> la tuta Eŭropo)">
      <pattern>
        <pattern-item n="tot"/>
        <pattern-item n="loc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="nombre"/>
          <clip pos="2" side="tl" part="nbr"/>
        </let>
        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><lit-tag v="nom"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
              <lit v="la tuta"/>
              <lit-tag v="det"/>
              <lit-tag v="ind"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="np"/>
              <lit-tag v="loc"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<!-- KOMENCO DATOJ -->

<rule comment="REGLA: NUM-NUM DE MES (2-3 de juliol -> 2an-3an de julio)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="guio"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NUM-NUM DE MES DE ANY (2-3 de juliol de 1930 -> 2an-3an de julio 1930)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="guio"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="7" side="tl" part="lem"/>
              <clip pos="7" side="tl" part="a_num"/>
              <clip pos="7" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="6"/><with-param pos="7"/></call-macro>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<rule comment="REGLA: NUM DE MES (2 de juliol -> 2an de julio)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM DE MES (el 2 de juliol -> la 2an de julio)">
      <pattern>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NUM DE MES DE ANY (2 de juliol de 1930 -> 2an de julio 1930)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM DE MES DE ANY (el 2 de juliol de 1930 -> la 2an de julio de 1930)">
      <pattern>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_num"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<rule comment="REGLA: PREP NUM DE MES (de 2 de juliol -> de 2a de julio)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="dato">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: PREP NUM DE MES DE ANY (de 2 de juliol de 1930 -> de 2a de julio 1930)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="dato">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_num"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="5"/><with-param pos="6"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<!-- FINO KOMENCO DATOJ -->


<rule comment="REGLA: NOMda DE (millón de -> miliono da)">
      <pattern>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>   <!--<clip pos="1" side="tl" part="whole"/> Per a compostos: -->
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="da">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NUM NOMda DE (15 millons de -> 15 milionoj da)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="2"/>
          <chunk name="da">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<!-- muchos problemas, p. ej.: a 50 km de Gijón 
<rule comment="REGLA: UN NUM NOMda DE (unos 15 millones de -> ĉirkaŭ 15 milionoj da)">
      <pattern>
        <pattern-item n="un_pl"/>
        <pattern-item n="num"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombro2"><with-param pos="3"/><with-param pos="2"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="3"/></call-macro>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="3"/>
          <chunk name="da">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>
-->

<rule comment="REGLA: A NUM NOMdist DE (a 15 quilòmetres de -> je 15 kilometroj el)">
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="num"/>
        <pattern-item n="nom_dist"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="je">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="je"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="3"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: ART NOM más ADJ (EOes, más -> plej ex: la casa más grande -> la plej granda domo)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="nom"/>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
         <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="2"/></call-macro>
        <call-macro n="pli_plej"><with-param pos="3"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<rule comment="REGLA: ART ADJ NOM más ADJ (EOes, más -> plej ex: la segunda casa más grande -> la dua plej granda domo)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
         <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="3"/></call-macro>
        <call-macro n="pli_plej"><with-param pos="4"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<rule comment="REGLA: ART más ADJ (EOes, más -> plej ex: la más grande -> la plej granda)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="1"/></call-macro>
        <call-macro n="pli_plej"><with-param pos="2"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: ART ADJ más ADJ (más -> plej ex: la segunda más grande -> la dua plej granda)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="adj"/>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="1"/></call-macro>
        <call-macro n="pli_plej"><with-param pos="3"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: ART NOM más ADJ de (EOes, más -> plej ex: la casa más grande de -> la plej granda domo el)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="nom"/>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="2"/></call-macro>
        <call-macro n="pli_plej"><with-param pos="3"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<rule comment="REGLA: ART más ADJ de (EOes, más -> plej ex: la más grande de -> la plej granda el)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="1"/></call-macro>
        <call-macro n="pli_plej"><with-param pos="2"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: ART ART NOM más ADJ de (más -> plej ex: la segunda casa más grande de -> la dua plej granda domo el)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="3"/></call-macro>
        <call-macro n="pli_plej"><with-param pos="4"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="5"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<rule comment="REGLA: ART ADJ más ADJ de (más -> plej ex: la segunda más grande de -> la dua plej granda el)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="adj"/>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="1"/></call-macro>
        <call-macro n="pli_plej"><with-param pos="3"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: ART mejor (EOes, más -> plej ex: la mejor -> la plej bona)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="mejor"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="2"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="2"/></call-macro>
        <call-macro n="pli_plej2"><with-param pos="2"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: ART ADJ mejor (más -> plej ex: la segunda mejor -> la dua plej bona)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="adj"/>
        <pattern-item n="mejor"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="3"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="3"/></call-macro>
        <call-macro n="pli_plej2"><with-param pos="3"/></call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: LO ADJ (EOes, lo bueno -> tio bona, lo mejor -> tio plej bona)">
      <pattern>
        <pattern-item n="lo_det"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="prn.tn.sg.4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ART mejor de (EOes, más -> plej ex: la mejor de -> la plej bona el)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="mejor"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: LO mejor de (EOes, lo mejor de -> tio plej bona el)">
      <pattern>
        <pattern-item n="lo_det"/>
        <pattern-item n="mejor"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="prn.tn.sg.4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADV_DA NOM (EOes ex. mucho tiempo -> multe da tagoj)">
      <pattern>
        <pattern-item n="adv_da"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="2"/></call-macro>

        <choose>
          <when>
           <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="bastante"/></equal></test>
           <let><clip pos="1" side="tl" part="lem"/><lit v="sufiĉe"/></let>
          </when>
          <when>
           <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="mucho"/></equal></test>
           <let><clip pos="1" side="tl" part="lem"/><lit v="multe"/></let>
          </when>
          <when>
           <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="poco"/></equal></test>
           <let><clip pos="1" side="tl" part="lem"/><lit v="malmulte"/></let>
          </when>
          <when>
           <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="demasiado"/></equal></test>
           <let><clip pos="1" side="tl" part="lem"/><lit v="tro"/></let>
          </when>
          <when>
           <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="demasiado poco"/></equal></test>
           <let><clip pos="1" side="tl" part="lem"/><lit v="tro malmulte"/></let>
          </when>
          <when>
           <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="tanto"/></equal></test>
           <let><clip pos="1" side="tl" part="lem"/><lit v="tiom"/></let>
          </when>
        </choose>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>



<rule comment="REGLA: DET NOM (EOes ex. los libros, las casas -> la libroj, la domoj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>

   <choose>
     <when>   <!-- article indefinit s'elimina -->
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!-- altres (amb cas)-->

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



<rule comment="REGLA: DET NUM (EOes, ex. las dos , estos tres -> la du, ĉi tiuj tri)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM (EOes, ex. las dos chicas, estos tres libros -> la du knaboj, ĉi tiuj tri libroj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_num_nom1" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADJ NOM (EO, ex. les dues últimes noies, aquests tres últims llibres -> la du lastaj knabinoj, ĉi tiuj tri lastaj libroj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADJ NOM ADJ (EO, ex. els tres últims corrents polítics -> la tri lastaj politikaj kurentoj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADJ ADJ NOM (EO, ex. aquests tres últims grans llibres -> ĉi tiuj tri lastaj grandaj libroj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADV ADJ NOM (EO, ex. els tres més grans llibres -> la tri plej grandaj libroj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADV ADJ NOM ADJ (EO, ex. els tres més grans llibres infantils -> la tri plej grandaj infanaj libroj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM (EOes, todos los niños-> ĉiuj knaboj; la majoria de los niños -> la plimulto da knaboj)">
      <pattern>
        <pattern-item n="tot"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'todas las niñas : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratius i altres -->
        <out>
          <chunk name="ĉiunom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJ NOM (EO) grans persones -> grandaj homoj">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADV ADJ NOM (EO) molt grans persones -> tre grandaj homoj">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADV ADJ NOM ADJ (EO) molt diferents tendències socialistes -> tre malsamaj socialismaj tendencoj">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJ ADJ NOM (EO) primer gran concert -> unua granda concerto ">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJ ADJ NOM ADJ (EO) primer gran concert públic -> unua granda publika concerto">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJ conj ADJ NOM (EO) primer i últim concert -> unua kaj lasta koncerto">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJ conj ADJ NOM ADJ (EO) primer i últim concert públic -> unua kaj lasta publika koncerto">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM (EOes) el mismo chico; una gran persona -> la sama knabo, granda homo">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJ NOM (EOes) nuestra casa">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET ADV ADJ NOM (EO) la plus grande variété -> la plej granda vario">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <call-macro n="pli_plej">
          <with-param pos="2"/>
        </call-macro>
     </when>
   </choose>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET ADV ADJ NOM ADJ (EO) la plus grande variété animale -> la plej granda besta vario">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <call-macro n="pli_plej">
          <with-param pos="2"/>
        </call-macro>
     </when>
   </choose>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ ADJ NOM (EO) el primer gran concert -> la unua granda concerto">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ ADJ NOM ADJ (EO) el primer gran concert públic -> la unua granda publika koncerto">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ ADV ADJ NOM (EO) el tercer més gran concert -> la tria plej granda concerto">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ ADV ADJ NOM ADJ (EO) el tercer més gran grup bancari -> la tria plej granda banka grupo">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ conj ADJ NOM (EO) el primer i darrer concert -> la unua kaj lasta concerto">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ conj ADJ NOM ADJ (EO) el primer i darrer concert públic -> la unua kaj lasta publika concerto">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ conj ADJ ADJ NOM (EO) el primer i darrer gran concert -> la unua kaj lasta granda concerto">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="6"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="6"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="6" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_nom"/>
              <clip pos="6" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="6" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_nom"/>
              <clip pos="6" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ conj ADJ ADJ NOM ADJ (EO) el primer i darrer gran concert públic -> la unua kaj lasta granda publika concerto">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="6"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj3" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="6" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_nom"/>
              <clip pos="6" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="6" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="tags"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_nom"/>
              <clip pos="6" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ (EOes, aquella casa grande, un libro interesante, algunos coches viejos -> tiu granda domo, interesa libro, iuj verdaj aŭtoj)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM-NOM ADJ (EO, aquella ciudad-jardín moderna -> tiu moderna urbo-ĝardeno, para evitar *tiu urbo-moderna ĝardeno)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="guio"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="4"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="5"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-ADJ (EO, la clase media-alta -> la meza-alta klaso para evitar *la meza klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ ADJ-ADJ (EO, la clase socia media-alta -> la meza-alta socia klaso para evitar *la meza socia klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-UNK (EO, aquella classe mitjana-alta -> tiu meza-alta klaso, per evitar *tiu meza klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ ADJ-UNK (EO, aquella classe social mitjana-alta -> tiu meza-alta socia klaso, per evitar *tiu meza socia klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-ADJ-UNK (EO, el diccionari català-valencià-balear -> la kataluna-valencia-baleara vortaro, per evitar *la kataluna-valencia vortaro-baleara)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_adj"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_adj"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ-UNK (EO, classe mitjana-alta -> meza-alta klaso, per evitar *meza klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ ADJ-UNK (EO, classe social mitjana-alta -> meza-alta socia klaso, per evitar *meza socia klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ-ADJ-UNK (EO, diccionari català-valencià-balear -> kataluna-valencia-baleara vortaro, per evitar *kataluna-valencia vortaro-baleara)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM ADJ (EOes, ex. aquellas tres casas pequeñas, los tres libros viejos, todos los coches grandes -> tiuj tri malgrandaj domoj, la tri malnovaj libroj, ĉiuj grandaj aŭtoj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="det_num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM ADJ (EOes, ex. todos los coches blancos -> ĉiuj blankaj aŭtoj)">
      <pattern>
        <pattern-item n="tot"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratiu (dividim el SN en tot/ĉiu + PP(le ...)-->
        <out>
          <chunk name="ĉiunom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
             <b/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
             <b/>
          <chunk name="det_nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADV ADJ (EOes, una niña extremadamente bonita -ekstreme bela knabino )">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>-->
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>

        <out>
          <chunk name="nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
  </when>
  <otherwise>
        <call-macro n="pli_plej">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADV ADJ (EO, ex. las dos casas tan altas -> la du domoj tiel altaj - mantenim l'ordre perquè en comparacions hi ha a vegades problemes: otra diez veces más pesada -> #alia dek pli peza fojoj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="det_num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADV ADJ conj ADJ (EO, una noia molt maca i simpàtica ; una noia increïblement maca i simpàtica -> tre bela kaj simpatia knabino; nekredeble bela kaj simpatia knabino)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>

        <out>
          <chunk name="nom_adv_adj_coo_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
  </when>
  <otherwise>
        <out>
          <chunk name="det_nom_adv_adj_coo_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ conj ADJ (EOes, coordinació d'adjectius modificant el mateix nom, ex. una mujer alta y delgada  -> alta kaj maldika virino)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>                
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
            <out>
              <chunk name="nom_adj_coo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adj"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
</when>
<otherwise>           <!-- article definit-->
            <out>
              <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adj"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM ADJ conj ADJ (EOes, coordinació d'ajectius las dos mujeres altas y delgadas -> la du altaj kaj maldikaj virinoj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>                
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
            <out>
              <chunk name="nom_adj_coo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="sl" part="gen"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adj"/>
                  <clip pos="6" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
</when>
<otherwise>           <!-- article definit-->
            <out>
              <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="sl" part="gen"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_det"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adj"/>
                  <clip pos="6" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM (per a col·locar la cua en les multiparaules amb g (EO)">
      <pattern>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ (EOes, sintagmes nominals sense especificadors)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NOM-NOM ADJ (EO, ciutat-jardí moderna -> moderna urbo-ĝardeno, per evitar *urbo-moderna ĝardeno)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="guio"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ-ADJ (EO, clase media-alta -> meza-alta klaso para evitar *meza klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ ADJ-ADJ (EO, clase social media-alta -> meza-alta socia klaso para evitar *meza socia klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ ADJ (Federació Anarquista Ibèrica -> Iberia Anarkiisma Federacio)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ ADV ADJ (una pressió fiscal molt baixa -> tre malalta fiska premo)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="tags"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM ADJ (el gran parc industrial -> la granda industria parko)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ ADJ (EOes, sintagmes nominals sense especificadors)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJ NOM ADJ (EO, sintagmes nominals sense especificadors)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ Y ADJ (EOes, sintagmes nominals sense especificadors)">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj_i_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ ADJ ADJ (EO, sintagmes nominals sense especificadors)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ ADJ ADJ (les primeres eleccions municipals democràtiques -> la unuaj demokratiaj urbaj elektoj">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ, ADJ Y ADJ (els escriptors catalans, gallecs i bascos -> la katalunaj, galegaj kaj eŭskaj verkistoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="nom_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ, ADJ Y ADJ (els escriptors catalans, gallecs i bascos -> la katalunaj, galegaj kaj eŭskaj verkistoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_adj"/>
              <clip pos="7" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_adj"/>
              <clip pos="7" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ, ADJ, ADJ I ADJ (soldats soviétiques, américains, britanniques et français -> sovetiaj, usonaj, britaj kaj francaj soldatoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro5">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="6"/>
          <with-param pos="8"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="8" side="tl" part="lemh"/>
              <clip pos="8" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="8" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ, ADJ, ADJ I ADJ (les soldats soviétiques, américains, britanniques et français -> la sovetiaj, usonaj, britaj kaj francaj soldatoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro6">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
          <with-param pos="7"/>
          <with-param pos="9"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="9" side="tl" part="lemh"/>
              <clip pos="9" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="9" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="7" side="tl" part="lemh"/>
              <clip pos="7" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="7" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="9" side="tl" part="lemh"/>
              <clip pos="9" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="9" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM ADJ ADJ (la primera revista literària flamenca -> la unua flandra literatura revuo)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET ADJ NOM ADJ-ADJ (la deuxième guerre Anglo-néerlandaise -> la dua angla-flandra milito)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="guio"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="kiu">
            <tags>
              <tag><lit-tag v="SNrelatiu"/></tag>
              <tag><var n="case"/></tag>
            </tags>
            <lu>
              <lit v="kiu"/>
              <lit-tag v="prn"/>
              <lit-tag v="rel"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="2"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM QUE (EOes) el mismo chico; una gran persona -> la sama knabo, granda homo; regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
                <b pos="1"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

        </out>
    </when>
<otherwise>           <!-- article definit-->
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
                <b pos="1"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>

   <choose>
     <when>   <!-- article indefinit s'elimina -->
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!-- altres (amb cas)-->

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <out>
                <b pos="1"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                              <clip pos="2" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>

        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM QUE (EOes regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>-->

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_num_nom2" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
                <out>
                <b pos="3"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>

        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



<rule comment="REGLA: QNT DET NOM QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
        <pattern-item n="tot"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratius i altres -->
        <out>
          <chunk name="ĉiunom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <out>
                <b pos="3"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <out>
                <b pos="3"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu'  )">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <out>
                <b pos="4"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
        <pattern-item n="tot"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratiu (dividim el SN en tot/ĉiu + PP(le ...)-->
        <out>
          <chunk name="ĉiunom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
             <b/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
             <b/>
          <chunk name="det_nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <out>
                <b pos="4"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADV ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>        
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <!--<call-macro n="canvia_det">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>-->
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>

        <out>
          <chunk name="nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
  </when>
  <otherwise>
        <out>
          <chunk name="det_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <out>
                <b pos="4"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADV ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
        <out>
          <chunk name="det_num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>        
     </otherwise>
      </choose>
        <out>
                <b pos="5"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>
        </out>        
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ conj ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>                
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
        <and>
           <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
           <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
        </and>
      </test>
            <out>
              <chunk name="nom_adj_coo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adj"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
</when>
<otherwise>           <!-- article definit-->
            <out>
              <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adj"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
     </otherwise>
      </choose>
        <out>
                <b pos="5"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM ADJ conj ADJ QUE (EOes, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>                
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="uno"/>
        </equal>
      </test>
            <out>
              <chunk name="nom_adj_coo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="sl" part="gen"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adj"/>
                  <clip pos="6" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
</when>
<otherwise>           <!-- article definit-->
            <out>
              <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="sl" part="gen"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_det"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adj"/>
                  <clip pos="6" side="tl" part="nbr" link-to="3"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
     </otherwise>
      </choose>
        <out>
                <b pos="6"/>
                 <chunk name="kiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
                              <lit-tag v="2"/>
                        </lu>
                        </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DE MANERA ADJ (de forma escandalosa -> skandale)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="forma_manera"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DE MANERA ADV ADJ (de forma muy escandalosa -> tre skandale)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="forma_manera"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DE MANERA ADJ I ADJ (de forma escandalosa i monstruosa -> skandale kaj monstre)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="forma_manera"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DE FORMA QUE (de forma que -> tiel ke) (EO)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="forma_manera"/>
        <pattern-item n="cnjcorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
            <out>
                 <chunk name="adv" case="caseFirstWord">
                            <tags>
                              <tag><lit-tag v="adv"/></tag>
                            </tags>
                <lu>
                  <lit v="tiel"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="2"/>
                 <chunk name="ke">
                            <tags>
                              <tag><lit-tag v="cnjsub"/></tag>
                            </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DE FORMA A INF (de forma a fer -> por fari)">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="forma_manera"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
            <out>
                 <chunk name="por" case="caseFirstWord">
                            <tags>
                              <tag><lit-tag v="pr"/></tag>
                            </tags>
                <lu>
                  <lit v="por"/>
                  <lit-tag v="pr"/>
                </lu>
              </chunk>
              <b pos="3"/>
                  <chunk name="inf">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
<tag><lit-tag v="SV100"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJFSG Y ADV (econónica y políticamente -> ekonomie kaj politike)">
      <pattern>
        <pattern-item n="adjfsg"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADJFSG, ADJFSG Y ADV (social, económica y políticamente -> ekonomie kaj politike)">
      <pattern>
        <pattern-item n="adjfsg"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adjfsg"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: A EL INF (al encontrar -> trovinte)">
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
            <out>
                  <chunk name="inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV13"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: A EL HABERinf + PP (al haber encontrado -> trovinte)">
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="haber_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <out>
          <chunk name="inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><lit-tag v="gerpast"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV14"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <lit-tag v="gerpast"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: A EL NO INF (al no encontrar -> ne trovinte)">
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="no"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><lit-tag v="gerpast"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV13b"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <lit-tag v="gerpast"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: A EL NO HABERinf + PP (al no haber encontrado -> ne trovinte)">
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="no"/>
        <pattern-item n="haber_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><lit-tag v="gerpast"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV14b"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <lit-tag v="gerpast"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NADA MÁS INF (nada más encontrar -> ĵus trovinte)">
      <pattern>
        <pattern-item n="nada"/>
        <pattern-item n="mas"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
            <out>
                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV15"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NADA MÁS HABERinf + PP (nada más haber encontrado -> ĵus trovinte)">
      <pattern>
        <pattern-item n="nada"/>
        <pattern-item n="mas"/>
        <pattern-item n="haber_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
            <out>
                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="gerpast"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV16"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <lit-tag v="gerpast"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>





<rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda) (EOes)">
      <pattern>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: PARTICIPI (quan no acompanya res o va amb desconeguda) (EOes)">
      <pattern>
        <pattern-item n="pp"/>
      </pattern>
      <action>             
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJECTIU (ĉefe por eviti duoblajn spacojn pro memstare analizitaj nedeterminitaj artikoloj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjADJ"/>
      </pattern>
      <action>             
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>        
        <call-macro n="nom_cas"><with-param pos="2"/></call-macro>        

        <choose>
          <when>   <!-- article indefinit s'elimina -->
           <test>
            <and>
              <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
              <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
            </and>
           </test>
           <out>
             <chunk name="adj" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SA"/></tag>
                 <tag><clip pos="2" side="sl" part="gen"/></tag>
                 <tag><clip pos="2" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
               </tags>
               <lu>
                 <clip pos="2" side="tl" part="lemh"/>
                 <clip pos="2" side="tl" part="a_adj"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
             </chunk>
           </out>
           <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
         </when>
         <otherwise>
           <out>
             <chunk name="det_adj" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SA"/></tag>
                 <tag><clip pos="2" side="sl" part="gen"/></tag>
                 <tag><clip pos="2" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
               </tags>
               <lu>
                 <clip pos="1" side="tl" part="lem"/>
                 <clip pos="1" side="tl" part="a_det"/>
                 <clip pos="1" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
               </lu>
               <b pos="1"/>
               <lu>
                 <clip pos="2" side="tl" part="lemh"/>
                 <clip pos="2" side="tl" part="a_adj"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
             </chunk>
           </out>
         </otherwise>
       </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: DET PARTICIPI (ĉefe por eviti duoblajn spacojn pro memstare analizitaj nedeterminitaj artikoloj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>             
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>        
        <call-macro n="nom_cas"><with-param pos="2"/></call-macro>        

        <choose>
          <when>   <!-- article indefinit s'elimina -->
           <test>
            <and>
              <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
              <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
            </and>
           </test>
           <out>
             <chunk name="pp" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SA"/></tag>
                 <tag><clip pos="2" side="sl" part="gen"/></tag>
                 <tag><clip pos="2" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
               </tags>
               <lu>
                 <clip pos="2" side="tl" part="lemh"/>
                 <clip pos="2" side="tl" part="a_verb"/>
                 <clip pos="2" side="tl" part="temps"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
             </chunk>
           </out>
           <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
         </when>
         <otherwise>
           <out>
             <chunk name="det_pp" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SA"/></tag>
                 <tag><clip pos="2" side="sl" part="gen"/></tag>
                 <tag><clip pos="2" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
               </tags>
               <lu>
                 <clip pos="1" side="tl" part="lem"/>
                 <clip pos="1" side="tl" part="a_det"/>
                 <clip pos="1" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
               </lu>
               <b pos="1"/>
               <lu>
                 <clip pos="2" side="tl" part="lemh"/>
                 <clip pos="2" side="tl" part="a_verb"/>
                 <clip pos="2" side="tl" part="temps"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
             </chunk>
           </out>
         </otherwise>
       </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: DET PARTICIPI POR (ĉefe por eviti duoblajn spacojn pro memstare analizitaj nedeterminitaj artikoloj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
      </pattern>
      <action>             
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>        
        <call-macro n="nom_cas"><with-param pos="2"/></call-macro>        

        <choose>
          <when>   <!-- article indefinit s'elimina -->
           <test>
            <and>
              <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
              <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
            </and>
           </test>
           <out>
             <chunk name="pp" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SA"/></tag>
                 <tag><clip pos="2" side="sl" part="gen"/></tag>
                 <tag><clip pos="2" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
               </tags>
               <lu>
                 <clip pos="2" side="tl" part="lemh"/>
                 <clip pos="2" side="tl" part="a_verb"/>
                 <clip pos="2" side="tl" part="temps"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
             </chunk>
           </out>
           <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
         </when>
         <otherwise>
           <out>
             <chunk name="det_pp" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SA"/></tag>
                 <tag><clip pos="2" side="sl" part="gen"/></tag>
                 <tag><clip pos="2" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
               </tags>
               <lu>
                 <clip pos="1" side="tl" part="lem"/>
                 <clip pos="1" side="tl" part="a_det"/>
                 <clip pos="1" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
               </lu>
               <b pos="1"/>
               <lu>
                 <clip pos="2" side="tl" part="lemh"/>
                 <clip pos="2" side="tl" part="a_verb"/>
                 <clip pos="2" side="tl" part="temps"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
             </chunk>
           </out>
         </otherwise>
       </choose>
       <out>
          <b pos="2"/> <!-- ŝanĝo al DE-->
          <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: DET UNK (ĉefe por eviti duoblajn spacojn pro memstare analizitaj nedeterminitaj artikoloj)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>             
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>        

        <choose>
          <when>   <!-- article indefinit s'elimina -->
           <test>
            <and>
              <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
              <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
            </and>
           </test>
           <out>
             <chunk name="unk" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SN"/></tag>
                 <tag><clip pos="1" side="sl" part="gen"/></tag>
                 <tag><clip pos="1" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
               </tags>
               <lu>
                 <clip pos="2" side="tl" part="whole"/>
               </lu>
             </chunk>
           </out>
           <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
         </when>
         <otherwise>
           <out>
             <chunk name="det_unk" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SN"/></tag>
                 <tag><clip pos="1" side="sl" part="gen"/></tag>
                 <tag><clip pos="1" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
               </tags>
               <lu>
                 <clip pos="1" side="tl" part="lem"/>
                 <clip pos="1" side="tl" part="a_det"/>
                 <clip pos="1" side="tl" part="nbr"/>
                 <lit-tag v="4"/>
               </lu>
               <b pos="1"/>
               <lu>
                 <clip pos="2" side="tl" part="whole"/>
               </lu>
             </chunk>
           </out>
         </otherwise>
       </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: MÁS ADJECTIU QUE ('más/menos grande que - ') (EOes)">
      <pattern>
        <pattern-item n="mas"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adj_comparatiu" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><clip pos="2" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: MÁS ADV QUE ('más/menos grande que - ') (EOes)">
      <pattern>
        <pattern-item n="mas"/>
        <pattern-item n="adv"/>
        <pattern-item n="cnjcorregir"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adv"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: MEJOR QUE ('mayor/menor que - pli granda/pli malgranda ol') (EOes)">
      <pattern>
        <pattern-item n="mejor_muchomejor_adj"/>
        <pattern-item n="cnjcoopercorregir2"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="adj_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SA"/></tag>
                   <tag><clip pos="1" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: MEJOR NOM QUE ('mayor/menor libertad que - pli granda/pli malgranda libereco ol') (EOes)">
      <pattern>
        <pattern-item n="mejor_muchomejor_adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcoopercorregir2"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><clip pos="2" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: MEJOR NOM ADJ QUE ('mayor/menor libertad individual que - pli granda/pli malgranda libereco ol') (EOes)">
      <pattern>
        <pattern-item n="mejor_muchomejor_adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir2"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><clip pos="2" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: MEJOR QUE ('mayor/menor que - pli granda/pli malgranda ol') (EOes)">
      <pattern>
        <pattern-item n="mejor_muchomejor_adv"/>
        <pattern-item n="cnjcoopercorregir2"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nadv"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nadv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="ol"/>
              <lit-tag v="cnjsub"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: EL MEJOR ('el mayor/menor - la plej granda/plej malgranda') (EOes)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="mejor"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="det_adj" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SA"/></tag>
                   <tag><clip pos="2" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: EL MEJOR DE ('el mayor/menor de - la plej granda/plej malgranda el') (EOes)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="mejor"/>
        <pattern-item n="de"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="det_adj_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SA"/></tag>
                   <tag><clip pos="2" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
              <chunk name="el">
                <tags>
                  <tag><lit-tag v="pr"/></tag>
                </tags>
                <lu>
                  <lit v="el"/>
                  <lit-tag v="pr"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!--
Ne funkcias sufiĉe bone: ekz. "el mayor productor de maiz del mundo"
Necesus io simila al "EL MEJOR NOM DE EL", tamen tio fuŝus la analizon de la dua SN
<rule comment="REGLA: EL MEJOR NOM DE ('la mayor/menor libertad de - la plej granda/plej malgranda libereco el') (EOes)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="mejor"/>
        <pattern-item n="nom"/>
        <pattern-item n="de"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="det_nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><clip pos="3" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="el">
                <tags>
                  <tag><lit-tag v="pr"/></tag>
                </tags>
                <lu>
                  <lit v="el"/>
                  <lit-tag v="pr"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: EL MEJOR NOM ADJ DE ('la mayor/menor libertad individual que - la plej granda/plej malgranda libereco el') (EOes)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="mejor"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="de"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="pli_plej2">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="det_nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><clip pos="3" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="el">
                <tags>
                  <tag><lit-tag v="pr"/></tag>
                </tags>
                <lu>
                  <lit v="el"/>
                  <lit-tag v="pr"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


<rule comment="REGLA: MÁS NOM ('más/menos libertad - pli/malpli da libereco') (EOes)">
      <pattern>
        <pattern-item n="mas"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="da" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        <b/>
          <chunk name="nom">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><clip pos="2" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: MÁS NOM QUE ('más/menos libertad que - pli/malpli da libereco ol') (EOes)">
      <pattern>
        <pattern-item n="mas"/>
        <pattern-item n="nom"/>
        <pattern-item n="cnjcorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><clip pos="2" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b/>
                <lu>
                  <lit v="da"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: MÁS NOM ADJ QUE ('más/menos libertad individual que - pli/malpli da individua libereco ol') (EOes)">
      <pattern>
        <pattern-item n="mas"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcorregir"/>
      </pattern>
      <action>                  
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
            <out>
              <chunk name="nom_comparatiu" case="caseFirstWord">
                <tags>
                   <tag><lit-tag v="SN"/></tag>
                   <tag><clip pos="2" side="sl" part="gen"/></tag>
                   <tag><var n="nombre"/></tag>
                   <tag><var n="case"/></tag>
                   <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b/>
                <lu>
                  <lit v="da"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: MAS QUE ('más/menos que - ') (EOes)">
      <pattern>
        <pattern-item n="mas"/>
        <pattern-item n="cnjcorregir"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nadv"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nadv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="ol"/>
              <lit-tag v="cnjsub"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: DETERMINANT (perquè no doni error si va davant de desconegudes i no es pot assignar nombre) (EO)">
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>                
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

   <choose>
     <when>   <!-- article indefinit s'elimina -->
      <test>
       <and>
         <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="uno"/></equal>
         <not><equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal></not>
       </and>
      </test>
    </when>

     <when>   <!-- numeral sol es tracta com a SN -->
      <test>
         <equal><clip pos="1" side="sl" part="a_det"/><lit-tag v="num"/></equal>
      </test>
        <out>
          <chunk name="num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
    </when>

    <otherwise>
        <out>
          <chunk name="det" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="DET"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: EL DE (el de -> tiu de)">
      <pattern>
        <pattern-item n="el"/>
        <pattern-item n="de"/>
      </pattern>
      <action>                
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <let><var n="nprep"/><clip pos="2" side="tl" part="lem"/></let>

        <out>
          <chunk name="tiu" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="tiu"/>
              <lit-tag v="det.dem"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nprep">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <!-- *************************************** REGLES DE SV *********************************************** -->

<rule comment="REGLA: , VERBhecho QUE (únicament per corregir al tagger quan s'equivoca amb FAKTO i amb KE) (EO)">
      <pattern>
        <pattern-item n="sent_coma"/>
        <pattern-item n="hecho"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="cm">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
           <b pos="1"/>
           <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="m"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
                <lit v="fakto"/>
                <lit-tag v="n"/>
                <lit-tag v="sg"/>
                <lit-tag v="4"/>
            </lu>
           </chunk>
           <b pos="2"/>
         <chunk name="kiu">
            <tags>
            <tag><lit-tag v="SNrelatiu"/></tag>
            <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
                <lit v="kiu"/>
                <lit-tag v="prn"/>
                <lit-tag v="rel"/>
                <lit-tag v="sg"/>
                <lit-tag v="2"/>
            </lu>
          </chunk>
          </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



<rule comment="REGLA: VERB QUE ( únicament per corregir al tagger quan s'equivoca amb el KE) (EOes)">
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>

        <choose>
          <when>
            <test><equal><clip pos="1" side="sl" part="temps"/><lit-tag v="pp"/></equal></test>
            <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
            <call-macro n="nombre_nom"><with-param pos="1"/></call-macro>
            <out>
              <chunk name="pp" case="caseFirstWord">
                <tags>
                 <tag><lit-tag v="SA"/></tag>
                 <tag><clip pos="1" side="sl" part="gen"/></tag>
                 <tag><clip pos="1" side="sl" part="nbr"/></tag>
                 <tag><var n="case"/></tag>
                 <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="kiu">
                <tags>
                  <tag><lit-tag v="SNrelatiu"/></tag>
                  <tag><var n="nombre"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn"/>
                  <clip pos="2" side="tl" part="nbr" link-to="2"/>
                  <lit-tag v="3"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk namefrom="nverb" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipus_verb"/></tag>
                  <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV17b"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="sep"/>
                  <lit-tag v="3"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="ke">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<rule comment="REGLA: VERB ADV QUE ( únicament per corregir al tagger quan s'equivoca amb el KE) (EOes)">
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="adv"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nadv"/><clip pos="2" side="tl" part="lem"/></let>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV18"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nadv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        <b pos="2"/>
        </out>
        <choose>
          <when>
            <test>
              <or>
                <equal><clip pos="2" side="sl" part="lem"/><lit v="mejor"/></equal>
                <equal><clip pos="2" side="sl" part="lem"/><lit v="peor"/></equal>
                <equal><clip pos="2" side="sl" part="lem"/><lit v="mayor"/></equal>
                <equal><clip pos="2" side="sl" part="lem"/><lit v="mejor"/></equal>
                <equal><clip pos="2" side="sl" part="lem"/><lit v="mucho mejor"/></equal>
                <equal><clip pos="2" side="sl" part="lem"/><lit v="mucho peor"/></equal>
                <equal><clip pos="2" side="sl" part="lem"/><lit v="mucho mayor"/></equal>
                <equal><clip pos="2" side="sl" part="lem"/><lit v="mucho mejor"/></equal>
              </or>
            </test>
            <out>
              <chunk name="ol">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
               </chunk>
             </out>
          </when>
          <otherwise>
            <out>
              <chunk name="ke">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
               </chunk>
             </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERB COMA ADV COMA QUE ( únicament per corregir al tagger quan s'equivoca amb el KE) (EOes)">
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="adv_cnjadv"/>
        <pattern-item n="sent_coma"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nadv"/><clip pos="2" side="tl" part="lem"/></let>

                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV19"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cm">
                        <tags>
                        <tag><lit-tag v="sent"/></tag>
                        </tags>
                        <lu>
                        <lit v=","/>
                        <lit-tag v="cm"/>
                        </lu>
                        </chunk>
                <b pos="2"/>
                  <chunk namefrom="nadv">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                <b pos="3"/>
                 <chunk name="cm">
                        <tags>
                        <tag><lit-tag v="sent"/></tag>
                        </tags>
                        <lu>
                        <lit v=","/>
                        <lit-tag v="cm"/>
                        </lu>
                        </chunk>
                <b pos="4"/>
                 <chunk name="ke">
                            <tags>
                              <tag><lit-tag v="cnjsub"/></tag>
                            </tags>
                            <lu>
                              <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                            </lu>
                          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: VERBestar + GERUNDI (está cantando > kantas)">
      <pattern>
        <pattern-item n="estar"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV20"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBestar + ADV + GERUNDI (estar siempre/constantemente cantando EOes -> ĉiam kantas)">
      <pattern>
        <pattern-item n="estar"/>
        <pattern-item n="adv"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nadv"/><clip pos="2" side="tl" part="lem"/></let>

                <out>
                  <chunk namefrom="nadv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                   <b pos="1"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV21"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: VERBir + GERUNDI (fue cantando > iom post iom kantis)">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>

        <out>
          <chunk name="iom post iom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="iom post iom"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV20d"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<rule comment="REGLA: HABER VERBestar + GERUNDI (habían estado diciendo > estis dirintaj )">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="estar-pp"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>

<let><var n="debug1"/><lit-tag v="53"/></let>
        <call-macro n="haber__pp"><with-param pos="1"/><with-param pos="3"/></call-macro>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<rule comment="REGLA: HABER VERBir + GERUNDI (habían ido diciendo > iom post iom estis dirintaj )">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="ir-pp"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>

        <out>
          <chunk name="iom post iom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="iom post iom"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b/>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>

<let><var n="debug1"/><lit-tag v="54"/></let>
        <call-macro n="haber__pp"><with-param pos="1"/><with-param pos="3"/></call-macro>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

<!--
<rule comment="REGLA: VERBestar + GERUNDI + QUE (per corregir el ke) (estar diciendo que  EOes)">
      <pattern>
        <pattern-item n="estar"/>
        <pattern-item n="ger"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV22"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="2"/>
                 <chunk name="ke">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBestar + ADV + GERUNDI + QUE (per corregir el ke) (estar siempre diciendo que EOes)">
      <pattern>
        <pattern-item n="estar"/>
        <pattern-item n="adv"/>
        <pattern-item n="ger"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nadv"/><clip pos="2" side="tl" part="lem"/></let>

                <out>
                  <chunk namefrom="nadv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                   <b pos="2"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV23"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="3"/>
                 <chunk name="ke">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: VERBestar_a_punto_de + INF + QUE (per corregir el ke) (estar a punto de que EOes)">
      <pattern>
        <pattern-item n="estarapuntode"/>
        <pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV24"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                <b pos="2"/>
                 <chunk name="ke">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBacabarde + INF + QUE (per corregir el ke) (acabar de EO)">
      <pattern>
        <pattern-item n="acabarde"/>
        <pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b/>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV101"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV25"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="ke">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


<rule comment="VERBvenirde + INF (vengo de hacer -> mi ĵus faris)">
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="2"/>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV102"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>

            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <choose>
              <when> <!-- korekto: je viens de faire -> mi ĵus faras -> mi ĵus faris -->
                <test>
                    <equal>
                      <clip pos="1" side="tl" part="temps"/>
                      <lit-tag v="pres"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
              </when>
        </choose>
                <out>
                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="2"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
<tag><lit-tag v="SV103"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: VERBestar_a_punto_de + INF (está a punto de venir -> estas venonta EOes)">
      <pattern>
        <pattern-item n="estarapuntode"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV26"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBllegara + INF (ha llegado a hacer -> eĉ faris EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="llegara"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

            <out>
                 <chunk name="eĉ" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="eĉ"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="2"/>
            </out>
          <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
          </let>
<let><var n="debug1"/><lit-tag v="01"/></let>
        <call-macro n="haber__pp">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
      </action>
    </rule>

<rule comment="REGLA: VERBllegara + INF (llegó a hacer -> eĉ faris EOes)">
      <pattern>
        <pattern-item n="llegara"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
         <chunk name="eĉ" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="eĉ"/>
              <lit-tag v="adv"/>
            </lu>
        </chunk>
        <b pos="1"/>
        </out>
        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV104"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV27"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: NO + VERBllegara + INF (no llegó a hacer -> ne faris EOes)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="llegara"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV104b"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV27b"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBvolvera + INF (ha vuelto a hacer > denove faris EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="volver"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
            <out>
                 <chunk name="denove" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="2"/>
            </out>
          <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
          </let>
<let><var n="debug1"/><lit-tag v="02"/></let>
        <call-macro n="haber__pp">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
      </action>
    </rule>

<rule comment="REGLA: VERBvolvera + INF (volvió a hacer > denove faris EOes)">
      <pattern>
        <pattern-item n="volver"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
            <out>
                 <chunk name="denove" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="2"/>
            </out>
        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV105"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV28"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBpasara + INF (ha pasado a hacer > ekfaris EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pasar"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
<let><var n="debug1"/><lit-tag v="03"/></let>
        <call-macro n="haber__pp_ek">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
          <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
          </let>
      </action>
    </rule>

<rule comment="REGLA: VERBpasara + INF (pasó a hacer > ekfaris EOes)">
      <pattern>
        <pattern-item n="pasar"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV106"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV29"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: SE + HABER VERBechar + INF (se ha echado a cantar/se ha puesto a cantar > ekkantis EOes)">
      <pattern>
        <pattern-item n="prnref"/>
        <pattern-item n="haber"/>
        <pattern-item n="echar"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
<let><var n="debug1"/><lit-tag v="04"/></let>
        <call-macro n="haber__pp_ek">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
          <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
          </let>
      </action>
    </rule>

<rule comment="REGLA: SE + VERBechar + INF (se echó a cantar/se puso a cantar > ekkantis EOes)">
      <pattern>
        <pattern-item n="prnref"/>
        <pattern-item n="echar"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV107"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV30"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBpasara + INF (ha pasado a hacer > ekfaris EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pasar"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
<let><var n="debug1"/><lit-tag v="05"/></let>
        <call-macro n="haber__pp_ek">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
          <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
          </let>
      </action>
    </rule>

<rule comment="REGLA: VERBpasara + INF (pasó a hacer > ekfaris EOes)">
      <pattern>
        <pattern-item n="pasar"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <choose>
              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV108"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV31"/></tag>
                    </tags>
                    <lu>
                      <lit v="ek"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBacabarde + INF (acabar de EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="acabarde"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>


                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
            <out>
                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV32"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
          <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
          </let>
      </action>
    </rule>

<rule comment="REGLA: VERBacabarde + INF (acabar de EOes)">
      <pattern>
        <pattern-item n="acabarde"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b/>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV109"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                 <chunk name="ĵus" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV33"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBdejarde + INF (dejar de EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="dejarde"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>


                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>

            <out>
                  <chunk name="verb_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV34"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉesi"/>
                      <lit-tag v="vbntr"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
          <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
          </let>
      </action>
    </rule>

<rule comment="REGLA: VERBdejarde + INF (dejar de EOes)">
      <pattern>
        <pattern-item n="dejarde"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                  <chunk name="pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV110"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉesi"/>
                      <lit-tag v="vbntr"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>

                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV36"/></tag>
                    </tags>
                    <lu>
                      <lit v="ĉesi"/>
                      <lit-tag v="vbntr"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: HABER VERBparecer + INF (parecer EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="parecer"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>


                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>

            <out>
                  <chunk name="verb_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV37"/></tag>
                    </tags>
                    <lu>
                      <lit v="ŝajni"/>
                      <lit-tag v="vbntr"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
          <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
          </let>
      </action>
    </rule>

<rule comment="REGLA: VERBparecer + INF (parecer EOes)">
      <pattern>
        <pattern-item n="parecer"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                  <chunk name="pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="case"/></tag>
<tag><lit-tag v="SV111"/></tag>
                    </tags>
                    <lu>
                      <lit v="ŝajni"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>

                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV38"/></tag>
                    </tags>
                    <lu>
                      <lit v="ŝajni"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBseguir + GER (sigue siendo EOes)">
      <pattern>
        <pattern-item n="seguir"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                 <chunk name="daŭre" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="daŭre"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV39"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                 <chunk name="daŭre" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="daŭre"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV40"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBseguir + GER + QUE (sigue siendo; para corregir el KE EOes)">
      <pattern>
        <pattern-item n="seguir"/>
        <pattern-item n="ger"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>
                 <chunk name="daŭre" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="daŭre"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk name="pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV41"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <lit-tag v="5"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                 <chunk name="daŭre" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="daŭre"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b pos="1"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV42"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <out>
        <b pos="2"/>
        <chunk name="ke">
          <tags>
            <tag><lit-tag v="cnjsub"/></tag>
          </tags>
          <lu>
            <lit v="ke"/>
            <lit-tag v="cnjsub"/>
          </lu>
        </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBdeber + DE + INF (deber + de + inf -> debe de comer -> eble manĝas)">
      <pattern>
        <pattern-item n="deber"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="3" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                 <chunk name="eble" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <lit v="eble"/>
                      <lit-tag v="adv"/>
                    </lu>
                </chunk>
                <b/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV43"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERBhayque + INF (hay que + inf EOes)">
      <pattern>
        <pattern-item n="hayque"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <out>
                 <chunk name="prpers" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><lit-tag v="subj"/></tag>
                      <tag><lit-tag v="p1"/></tag>
                      <tag><lit-tag v="mf"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                    </tags>
                    <lu>
                      <lit v="oni"/>
                      <lit-tag v="prn"/>
                      <lit-tag v="tn"/>
                      <lit-tag v="sg"/>
                      <lit-tag v="nom"/>
                    </lu>
                </chunk>
                <b/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV44"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: IR + A + INF (voy a leer -> estos legonta)">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>

        <choose>
          <when>
            <test>
              <and>
                <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="ser"/></equal>
                <equal caseless="yes"><clip pos="1" side="tl" part="temps"/><lit-tag v="pres"/></equal>
              </and>
            </test> 

            <let><clip pos="3" side="tl" part="temps"/><lit-tag v="fti"/></let>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
            <out>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipus_verb"/></tag>
                  <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV45"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <lit-tag v="3"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>

          <otherwise>
            <out>
             <chunk namefrom="nverb" case="caseFirstWord">
               <tags>
                 <tag><lit-tag v="SV"/></tag>
                 <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                 <tag><clip pos="1" side="tl" part="temps"/></tag>
                 <tag><clip pos="1" side="tl" part="pers"/></tag>
                 <tag><clip pos="1" side="tl" part="nbr"/></tag>
                 <tag><var n="tipus_verb"/></tag>
                 <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV45b"/></tag>
               </tags>
               <lu>
                 <lit v="esti"/>
                 <lit-tag v="vbser.3"/>
               </lu>
               <b pos="1"/>
               <lu>
                 <clip pos="3" side="tl" part="lemh"/>
                 <clip pos="3" side="tl" part="a_verb"/>
                 <lit-tag v="pp2"/>
                 <clip pos="1" side="tl" part="nbr"/>
                 <clip pos="3" side="tl" part="lemq"/>
               </lu>
             </chunk>
            </out>
          </otherwise>
        </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: VERB + ADJ + INF (el ADJ passa a ADV: siempre es interesante leer -> ĉiam estas interese legi EOes)">
      <pattern>
        <pattern-item n="verbcj2"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV46"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                <chunk name="adv">
                        <tags>
                        <tag><lit-tag v="adv"/></tag>
                        </tags>
                        <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="adv"/>
                        </lu>
                </chunk>
                <b pos="2"/>
            <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
<tag><lit-tag v="SV114"/></tag>
            </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="sep"/>
                  <lit-tag v="3"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
            </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: VERB + ADV + ADJ + INF (el ADJ passa a ADV: es muy interesante leer ->  estas tre interese legi EOes)">
      <pattern>
        <pattern-item n="verbcj2"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV47"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>


                <chunk name="adv">
                        <tags>
                        <tag><lit-tag v="adv"/></tag>
                        </tags>
                            <lu>
                              <clip pos="2" side="tl" part="lem"/>
                              <clip pos="2" side="tl" part="a_adv"/>
                            </lu>
                            <b/>
                        <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="adv"/>
                        </lu>
                </chunk>
                <b pos="2"/>
            <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
<tag><lit-tag v="SV115"/></tag>
            </tags>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="sep"/>
                  <lit-tag v="3"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
            </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="REGLA: VERBhaber + VERBser-pp + PP (kompleksa pasivo: ha estat llegit - estis legita ; forfalas unu helpverbo) (EO)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV48"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV49"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: VERBhaber + VERBser-pp + PP + POR (kompleksa pasivo: ha estat llegit per - estis legita de; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV50"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV51"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="3"/> <!-- ŝanĝo al DE-->
          <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: VERBhaber + VERBser-pp + PP + POR + INF (kompleksa pasivo: ha estat llegit per riure - estis legita por ridi; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV52"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV53"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="3"/> <!-- ŝanĝo al POR-->
          <chunk name="por">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="5" side="tl" part="temps"/></tag>
<tag><lit-tag v="SV116"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: VERBhaber + VERBser-pp + PP + ADV + POR (kompleksa pasivo: ha estat llegit també per - estis legita ankaŭ de; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
        <pattern-item n="por"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV54"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV55"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="3"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
              <tag><clip pos="4" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="4"/> <!-- ŝanĝo al DE-->
          <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: VERBhaber + VERBser-pp + PP + ADV + POR + INF (kompleksa pasivo: ha estat llegit també per riure - estis legita ankaŭ por ridi; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
        <pattern-item n="por"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV56"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
<tag><lit-tag v="SV57"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <out>
          <b pos="3"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
              <tag><clip pos="4" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="4"/> <!-- ŝanĝo al POR-->
          <chunk name="por">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="5"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="6" side="tl" part="a_verb"/></tag>
              <tag><clip pos="6" side="tl" part="temps"/></tag>
<tag><lit-tag v="SV117"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_verb"/>
              <clip pos="6" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADV ADJECTIU ('muy/poco//bastante//increiblemente grande - ') (EOes)">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>                  
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>        
            <out>
              <chunk name="adv_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><clip pos="2" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERB conjugat ( pinto ) (EO)">
      <pattern>
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"> <with-param pos="1"/></call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV58"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: VERB QUE (creo que -> kredas ke)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"> <with-param pos="1"/></call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV358"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="ke">
            <tags>
              <tag><lit-tag v="cnjsub"/></tag>
            </tags>
            <lu>
              <lit v="ke"/>
              <lit-tag v="cnjsub"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<!-- reglas de adverbialización del atributo, predicativo et sim -->

    <rule comment="REGLA: VERB ADJ QUE (es bueno que -> estas bone ke; (no) es otro que -> (ne) estas alia ol)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"> <with-param pos="1"/></call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV158"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>

        <choose>
          <when>
            <test><equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="otro"/></equal></test>
            <call-macro n="nom_cas"><with-param pos="2"/></call-macro>        
            <out>
              <chunk name="adj">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><clip pos="2" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
              <chunk name="ol">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
              <chunk name="ke">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: VERB ADV ADJ QUE (es muy bueno que -> estas tre bone ke)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"> <with-param pos="1"/></call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV258"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>

        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="más"/></equal>
                <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="menos"/></equal>
                <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="mucho más"/></equal>
                <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="mucho menos"/></equal>
              </or>
            </test>
            <call-macro n="nom_cas"><with-param pos="3"/></call-macro>        
            <out>
              <chunk name="adj">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="3" side="sl" part="gen"/></tag>
                  <tag><clip pos="3" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="ol">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="ke">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: HABER PP ADJ QUE (ha sido bueno que -> estis bone ke; (no) ha sido otro que -> (ne) estis alia ol)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"> <with-param pos="1"/></call-macro>

<let><var n="debug1"/><lit-tag v="71"/></let>
        <call-macro n="haber__pp"><with-param pos="1"/><with-param pos="2"/></call-macro>

        <choose>
          <when>
            <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="otro"/></equal></test>
            <call-macro n="nom_cas"><with-param pos="3"/></call-macro>        
            <out>
              <b pos="2"/>
              <chunk name="adj">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="3" side="sl" part="gen"/></tag>
                  <tag><clip pos="3" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="ol">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="ke">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: HABER PP ADV ADJ QUE (ha sido muy bueno que -> estis tre bone ke)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"> <with-param pos="1"/></call-macro>

<let><var n="debug1"/><lit-tag v="72"/></let>
        <call-macro n="haber__pp"><with-param pos="1"/><with-param pos="2"/></call-macro>

        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="más"/></equal>
                <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="menos"/></equal>
                <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="mucho más"/></equal>
                <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="mucho menos"/></equal>
              </or>
            </test>
            <call-macro n="nom_cas"><with-param pos="4"/></call-macro>        
            <out>
              <b pos="2"/>
              <chunk name="adj">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="4" side="sl" part="gen"/></tag>
                  <tag><clip pos="4" side="sl" part="nbr"/></tag>
                  <tag><var n="case"/></tag>
                  <tag><var n="changecase"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="4"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="ol">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <lit-tag v="adv"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="ke">
                <tags>
                  <tag><lit-tag v="cnjsub"/></tag>
                </tags>
                <lu>
                  <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <!-- reglas de pasivas reflejas -->

<!--
de momento aparto las reglas porque tienen que pasarse a la forma actual de tratamiento, con pattern-item de pronoms y de verbo generales (para no tenen listas por triplicado o cuadruplicado
-->
    <rule comment="REGLA: REF + VERB tipo pasiva refleja reflexivo (se observa a sí mismo -> observas sin)">
      <pattern>
        <pattern-item n="prnref"/>
        <pattern-item n="verbcj"/>
        <pattern-item n="a"/>
        <pattern-item n="si_mismo"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV60"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <b pos="3"/>
          <chunk name="pro_obj">
            <tags>
              <tag><lit-tag v="SN.ref.p3.mf.sp"/></tag>
            </tags>
            <lu>
              <lit v="prpers"/>
              <lit-tag v="prn.pro.ref.p3.mf.sp"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: REF + HABER + PP (se ha observado a sí mismo -> observis sin)">
      <pattern>
        <pattern-item n="prnref"/>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="a"/>
        <pattern-item n="si_mismo"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
<let><var n="debug1"/><lit-tag v="07"/></let>
        <call-macro n="haber__pp">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <out>
          <b pos="4"/>
          <chunk name="pro_obj">
            <tags>
              <tag><lit-tag v="SN.ref.p3.mf.sp"/></tag>
            </tags>
            <lu>
              <lit v="prpers"/>
              <lit-tag v="prn.pro.ref.p3.mf.sp"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <!-- otras reglas de pronombres (pronominales o no) -->

    <rule comment="REGLA: PRON VERB ( me como -> formanĝas; lo como -> manĝas lin ) (EO)">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="2"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV66"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out> 

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="1"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_prn"/>
                  <clip pos="1" side="tl" part="tipus_prn_tn"/>
                  <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: VERB ENC ( comerme -> formanĝi; comerlo -> manĝi lin )">
      <pattern>
        <pattern-item n="inf_ger_imp"/>
        <pattern-item n="enc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="1"/><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV266"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out> 

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
          </when>
          <otherwise>
            <out>
              <b/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn_tn"/>
                  <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: PRON HABER + PP (lo ha leído -> legis lin; traducido a pasado) (EOes)">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="3"/></call-macro>
<let><var n="debug1"/><lit-tag v="11"/></let>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <call-macro n="haber__pp"><with-param pos="2"/><with-param pos="3"/></call-macro>

        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
          </when>
          <otherwise>
        <out>
          <b pos="2"/>
          <chunk name="pro_obj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn_tn"/>
              <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
          </otherwise>
        </choose>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: NO PRON VERB ( no me como -> ne formanĝas; no lo como -> ne manĝas lin ) (EO)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="3"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV66b"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out> 

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn_tn"/>
                  <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: NO PRON HABER + PP (no lo ha leído -> ne legis lin; traducido a pasado) (EOes)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="4"/></call-macro>
<let><var n="debug1"/><lit-tag v="11b"/></let>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>

        <call-macro n="haber__pp"><with-param pos="3"/><with-param pos="4"/></call-macro>

        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
          </when>
          <otherwise>
        <out>
          <b/>
          <chunk name="pro_obj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
              <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn_tn"/>
              <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
          </otherwise>
        </choose>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: PRON VERBhacer PP ( se hace venir -> venigas sin )">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="hacer"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbtr"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV166"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="igi"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="pro_obj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn_tn"/>
              <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          </out>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: PRON VERBhacer PP ( se ha hecho venir -> venigis sin )">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="hacer-pp"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <let><var n="vigxi2"/><lit-tag v="igi"/></let>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <call-macro n="haber__pp"><with-param pos="2"/><with-param pos="4"/></call-macro>
        <out>
          <b pos="3"/>
          <chunk name="pro_obj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn_tn"/>
              <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          </out>

        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: PRON VERBestar + GERUNDI (me está cantando > kantas al mi)">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="estar"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>
        <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="3"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV20b"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="1"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_prn"/>
                  <clip pos="1" side="tl" part="tipus_prn_tn"/>
                  <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: PRON VERBestar + ADV + GERUNDI (me está constantemente cantando > senĉese kantas al mi)">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="estar"/>
        <pattern-item n="adv"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>
        <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="4"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk namefrom="nadv" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV21b"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_prn"/>
                  <clip pos="1" side="tl" part="tipus_prn_tn"/>
                  <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: NO PRON VERBestar + GERUNDI (no me está cantando > ne kantas al mi)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="estar"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="4"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV20e"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn_tn"/>
                  <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: NO PRON VERBestar + ADV + GERUNDI (no me está constantemente cantando > ne senĉese kantas al mi)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="estar"/>
        <pattern-item n="adv"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="5"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="5"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nadv">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV21f"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="3"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn_tn"/>
                  <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: PRON VERBir + GERUNDI (me fue cantando > iom post iom kantis al mi)">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="ir"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>
        <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="3"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="iom post iom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="iom post iom"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV20c"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="1"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_prn"/>
                  <clip pos="1" side="tl" part="tipus_prn_tn"/>
                  <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: PRON HABER VERBestar + GERUNDI (se habían estado diciendo > oni estis dirinta )">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="estar-pp"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>
        <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="4"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

<let><var n="debug1"/><lit-tag v="51"/></let>
        <call-macro n="haber__pp"><with-param pos="2"/><with-param pos="4"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="1"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_prn"/>
                  <clip pos="1" side="tl" part="tipus_prn_tn"/>
                  <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: PRON HABER VERBir + GERUNDI (se habían ido diciendo > oni iom post iom estis dirinta )">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="ir-pp"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>
        <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="4"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="iom post iom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="iom post iom"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b/>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>

<let><var n="debug1"/><lit-tag v="52"/></let>
        <call-macro n="haber__pp"><with-param pos="2"/><with-param pos="4"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="1"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_prn"/>
                  <clip pos="1" side="tl" part="tipus_prn_tn"/>
                  <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: NO PRON VERBir + GERUNDI (no me fue cantando > ne kantis al mi iom post iom)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="ir"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="4"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV20g"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn_tn"/>
                  <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <out>
          <b pos="3"/>
          <chunk name="iom post iom">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="iom post iom"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: NO PRON HABER VERBestar + GERUNDI (no se habían estado diciendo > oni ne estis dirinta )">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="estar-pp"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="5"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="5"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>

<let><var n="debug1"/><lit-tag v="55"/></let>
        <call-macro n="haber__pp"><with-param pos="3"/><with-param pos="5"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn_tn"/>
                  <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: NO PRON HABER VERBir + GERUNDI (no se habían ido diciendo > oni ne estis dirinta iom post iom )">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="ir-pp"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="5"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="5"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="ne"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b/>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>

<let><var n="debug1"/><lit-tag v="56"/></let>
        <call-macro n="haber__pp"><with-param pos="3"/><with-param pos="5"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn_tn"/>
                  <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <out>
          <b pos="3"/>
          <chunk name="iom post iom">
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="iom post iom"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<!-- kaŭzas pli da strangaĵoj, ol ĝi riparas (ĉefe, sed ne nur, pro "como = pr")
    <rule comment="REGLA: PREP PRON VERB ( en sí mismo fue -> en si mem estis ) - evitas la antaŭan ŝanĝon">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="pro"/>
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>
        <call-macro n="correccion_lo"><with-param pos="2"/></call-macro>
        <call-macro n="nombro1"><with-param pos="2"/></call-macro>
        <call-macro n="default_nombro"></call-macro>
        <call-macro n="nom_cas"><with-param pos="2"/></call-macro>

        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="pro_obj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
              <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn_tn"/>
              <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->



<!-- montriĝas, ke ofte temas pri verboj mankantaj en nia vortaro; ni konsideras la nekonataĵon kiel verbon por helpi la postan sintaksan analizon -->
    <rule comment="REGLA: PRON UNK ( lo komo -> *komo lin ) ">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="unknown"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="correccion_lo">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="default_nombro">
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="pro_obj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn_tn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV.vblex.pri.p3.sg.res"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PARA + INF (EOes regla exlusivamente para error del tagger">
      <pattern>
        <pattern-item n="verbprep_para"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="por" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
        </chunk>
        <b pos="1"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="sl" part="pers"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
<tag><lit-tag v="SV118"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
         </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERB conjugat + INF (quería cantar; EOes)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <call-macro n="tipus_verbs_like"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>

     <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="hacer"/>
            </equal>
          </test>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbtr"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV67"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="igi"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </when>
        <otherwise>
        <choose>
           <when>
             <test>
               <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="caber"/></equal>
             </test>
           <let><clip pos="1" side="tl" part="lemh"/><lit v="indi"/></let>
           <let><clip pos="1" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
           <let><var n="tipus_verb2"/><lit-tag v="imp"/></let>
           <let><var n="vimpers"/><lit-tag v="impers"/></let>
           </when>
        </choose>
        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV68"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </otherwise>
     </choose>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: VERB conjugat + a + INF (sacar a bailar -> eltiri danci; EOes)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="a_de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

     <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
     <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="hacer"/>
            </equal>
          </test>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><lit-tag v="vbtr"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV69"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="igi"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </when>
        <otherwise>
        <choose>
           <when>
             <test>
               <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="caber"/></equal>
             </test>
           <let><clip pos="1" side="tl" part="lemh"/><lit v="indi"/></let>
           <let><clip pos="1" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
           <let><var n="tipus_verb2"/><lit-tag v="imp"/></let>
           <let><var n="vimpers"/><lit-tag v="impers"/></let>
           </when>
        </choose>
        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV70"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        </otherwise>
     </choose>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- en esta regla básicamente suponemos que PRON está ligado al verbo conjugado, cuando puede estarlo con el infinitivo; si es así, lo hacemos mal -->
    <rule comment="REGLA: PRON + VERB conjugat + a + INF (se fue a bailar -> foriris danci; se volvió a casar -> denove geedziĝis; se iba a casar -> estis edziĝonta)">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="verbcj"/>
        <pattern-item n="a_de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="volver"/></equal>
            </test> 

            <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="4"/></call-macro>
            <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>

            <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
            <choose>
              <when>
                <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
                <out>
                  <chunk name="prpers" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                    </tags>
                    <lu>
                      <lit v="oni"/>
                      <lit-tag v="prn.tn.sg.nom"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let><var n="caseFirstWord"/><lit v="aa"/></let>
              </when>
            </choose>

            <out>
              <chunk name="denove" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <lit v="denove"/>
                  <lit-tag v="adv"/>
                </lu>
             </chunk>
             <b pos="1"/>
             <chunk namefrom="nverb">
               <tags>
                 <tag><lit-tag v="SV"/></tag>
                 <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                 <tag><clip pos="2" side="tl" part="temps"/></tag>
                 <tag><clip pos="2" side="tl" part="pers"/></tag>
                 <tag><clip pos="2" side="tl" part="nbr"/></tag>
                 <tag><var n="vimpers"/></tag>
                 <tag><var n="vigxi1"/></tag>
                 <tag><var n="tipus_verb"/></tag>
                 <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV172"/></tag>
               </tags>
               <lu>
                 <clip pos="4" side="tl" part="lemh"/>
                 <clip pos="4" side="tl" part="a_verb"/>
                 <var n="vigxi2"/>
                 <clip pos="4" side="tl" part="sep"/>
                 <lit-tag v="3"/>
                 <clip pos="4" side="tl" part="lemq"/>
               </lu>
             </chunk>
           </out>

           <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
           <choose>
             <when>
               <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
               <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
             </when>
             <otherwise>
               <out>
                 <b pos="2"/>
                 <chunk name="pro_obj">
                   <tags>
                     <tag><lit-tag v="SN"/></tag>
                     <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                     <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                     <tag><clip pos="1" side="tl" part="pers"/></tag>
                     <tag><clip pos="1" side="tl" part="gen"/></tag>
                     <tag><clip pos="1" side="tl" part="nbr"/></tag>
                   </tags>
                   <lu>
                     <clip pos="1" side="tl" part="lem"/>
                     <clip pos="1" side="tl" part="a_prn"/>
                     <clip pos="1" side="tl" part="tipus_prn_tn"/>
                     <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                     <clip pos="1" side="tl" part="pers"/>
                     <clip pos="1" side="tl" part="gen"/>
                     <clip pos="1" side="tl" part="nbr"/>
                   </lu>
                 </chunk>
               </out>
             </otherwise>
           </choose>
           <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>

          <when>
            <test>
              <and>
                <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="ir"/></equal>
                <not><equal><clip pos="2" side="sl" part="temps"/><lit-tag v="ifi"/></equal></not>
                <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="a"/></equal>
              </and>
            </test> 

            <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="4"/></call-macro>
            <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>

            <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
            <choose>
              <when>
                <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
                <out>
                  <chunk name="prpers" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                    </tags>
                    <lu>
                      <lit v="oni"/>
                      <lit-tag v="prn.tn.sg.nom"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let><var n="caseFirstWord"/><lit v="aa"/></let>
              </when>
            </choose>

            <out>
             <chunk namefrom="nverb">
               <tags>
                 <tag><lit-tag v="SV"/></tag>
                 <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                 <tag><clip pos="2" side="tl" part="temps"/></tag>
                 <tag><clip pos="2" side="tl" part="pers"/></tag>
                 <tag><clip pos="2" side="tl" part="nbr"/></tag>
                 <tag><var n="vimpers"/></tag>
                 <tag><var n="vigxi1"/></tag>
                 <tag><var n="tipus_verb"/></tag>
                 <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV173"/></tag>
               </tags>
               <lu>
                 <lit v="esti"/>
                 <lit-tag v="vbser.3"/>
               </lu>
               <b pos="1"/>
               <lu>
                 <clip pos="4" side="tl" part="lemh"/>
                 <clip pos="4" side="tl" part="a_verb"/>
                 <var n="vigxi2"/>
                 <lit-tag v="pp2"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <clip pos="4" side="tl" part="lemq"/>
               </lu>
             </chunk>
           </out>

           <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
           <choose>
             <when>
               <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
               <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
             </when>
             <otherwise>
               <out>
                 <b pos="2"/>
                 <chunk name="pro_obj">
                   <tags>
                     <tag><lit-tag v="SN"/></tag>
                     <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                     <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                     <tag><clip pos="1" side="tl" part="pers"/></tag>
                     <tag><clip pos="1" side="tl" part="gen"/></tag>
                     <tag><clip pos="1" side="tl" part="nbr"/></tag>
                   </tags>
                   <lu>
                     <clip pos="1" side="tl" part="lem"/>
                     <clip pos="1" side="tl" part="a_prn"/>
                     <clip pos="1" side="tl" part="tipus_prn_tn"/>
                     <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                     <clip pos="1" side="tl" part="pers"/>
                     <clip pos="1" side="tl" part="gen"/>
                     <clip pos="1" side="tl" part="nbr"/>
                   </lu>
                 </chunk>
               </out>
             </otherwise>
           </choose>
           <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>

          </when>

          <otherwise>

            <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="2"/></call-macro>
            <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
            <choose>
               <when>
                 <test>
                   <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="caber"/></equal>
                 </test>
               <let><clip pos="2" side="tl" part="lemh"/><lit v="indi"/></let>
               <let><clip pos="2" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
               <let><var n="tipus_verb2"/><lit-tag v="imp"/></let>
               <let><var n="vimpers"/><lit-tag v="impers"/></let>
               </when>
               <when>
                 <test>
                  <and>
                    <or>
                      <and>
                        <equal><clip pos="1" side="sl" part="tipus_prn_ref"/><lit-tag v="ref"/></equal>
                        <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p3"/></equal>
                      </and>
                      <and>
                        <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p2"/></equal>
                        <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p2"/></equal>
                        <equal><clip pos="1" side="sl" part="nbr"/><clip pos="2" side="sl" part="nbr"/></equal>
                      </and>
                      <and>
                        <equal><clip pos="1" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                        <equal><clip pos="2" side="sl" part="pers"/><lit-tag v="p1"/></equal>
                        <equal><clip pos="1" side="sl" part="nbr"/><clip pos="2" side="sl" part="nbr"/></equal>
                      </and>
                    </or>
                    <or>
                      <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="empezar"/></equal>
                      <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="comenzar"/></equal>
                      <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="acabar"/></equal>
                      <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="terminar"/></equal>
                    </or>
                  </and>
                 </test>
                 <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
                 <let><var n="vigxi2"/><lit v=""/></let>
                 <let><var n="aldoni_oni"/><lit v="aldoni"/></let>
               </when>
            </choose>

            <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
            <choose>
              <when>
                <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
                <out>
                  <chunk name="prpers" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                    </tags>
                    <lu>
                      <lit v="oni"/>
                      <lit-tag v="prn.tn.sg.nom"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let><var n="caseFirstWord"/><lit v="aa"/></let>
              </when>
            </choose>

            <out>
              <chunk namefrom="nverb" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="vimpers"/></tag>
                  <tag><var n="vigxi1"/></tag>
                  <tag><var n="tipus_verb"/></tag>
                  <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV174"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <var n="vigxi2"/>
                  <clip pos="2" side="tl" part="sep"/>
                  <lit-tag v="3"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
            </out>

            <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
            <choose>
              <when>
                <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_obj">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn_tn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                </out>
              </otherwise>
            </choose>

            <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
            <out>
              <chunk name="inf">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>

                  <tag><var n="tipus_verb"/></tag>
                  <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV175"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="sep"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<!-- en esta regla básicamente suponemos que PRON está ligado al verbo conjugado, cuando puede estarlo con el infinitivo; si es así, lo hacemos mal -->
    <rule comment="REGLA: PRON + HABER + PP + a + INF (se ha ido a bailar -> foriris danci; se ha vuelto a casar -> denove geedziĝis)">
      <pattern>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="a_de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="volver"/></equal>
            </test> 

            <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="5"/></call-macro>
            <call-macro n="tipus_verbs"><with-param pos="5"/></call-macro>

            <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
            <choose>
              <when>
                <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
                <out>
                  <chunk name="prpers" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                    </tags>
                    <lu>
                      <lit v="oni"/>
                      <lit-tag v="prn.tn.sg.nom"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let><var n="caseFirstWord"/><lit v="aa"/></let>
              </when>
            </choose>

            <out>
              <chunk name="denove" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="adv"/></tag>
                </tags>
                <lu>
                  <lit v="denove"/>
                  <lit-tag v="adv"/>
                </lu>
             </chunk>
             <b pos="1"/>
           </out>
<let><var n="debug1"/><lit-tag v="12b"/></let>
            <call-macro n="haber__pp"><with-param pos="2"/><with-param pos="3"/></call-macro>

           <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
           <choose>
             <when>
               <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
               <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
             </when>
             <otherwise>
               <out>
                 <b pos="3"/>
                 <chunk name="pro_obj">
                   <tags>
                     <tag><lit-tag v="SN"/></tag>
                     <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                     <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                     <tag><clip pos="1" side="tl" part="pers"/></tag>
                     <tag><clip pos="1" side="tl" part="gen"/></tag>
                     <tag><clip pos="1" side="tl" part="nbr"/></tag>
                   </tags>
                   <lu>
                     <clip pos="1" side="tl" part="lem"/>
                     <clip pos="1" side="tl" part="a_prn"/>
                     <clip pos="1" side="tl" part="tipus_prn_tn"/>
                     <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                     <clip pos="1" side="tl" part="pers"/>
                     <clip pos="1" side="tl" part="gen"/>
                     <clip pos="1" side="tl" part="nbr"/>
                   </lu>
                 </chunk>
               </out>
             </otherwise>
           </choose>
           <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
          </when>

          <otherwise>

            <call-macro n="control_pron"><with-param pos="1"/><with-param pos="2"/><with-param pos="3"/></call-macro>
            <call-macro n="tipus_verbs"><with-param pos="5"/></call-macro>
            <choose>
               <when>
                 <test>
                   <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="caber"/></equal>
                 </test>
               <let><clip pos="3" side="tl" part="lemh"/><lit v="indi"/></let>
               <let><clip pos="3" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
               <let><var n="tipus_verb2"/><lit-tag v="imp"/></let>
               <let><var n="vimpers"/><lit-tag v="impers"/></let>
               </when>
               <when>
                 <test>
                  <or>
                    <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="empezar"/></equal>
                    <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="comenzar"/></equal>
                    <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="acabar"/></equal>
                    <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="terminar"/></equal>
                  </or>
                 </test>
                 <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
                 <let><var n="vigxi2"/><lit v=""/></let>
               <let><var n="aldoni_oni"/><lit v="aldoni"/></let>
               </when>
            </choose>

            <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
            <choose>
              <when>
                <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
                <out>
                  <chunk name="prpers" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                    </tags>
                    <lu>
                      <lit v="oni"/>
                      <lit-tag v="prn.tn.sg.nom"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let><var n="caseFirstWord"/><lit v="aa"/></let>
              </when>
            </choose>

            <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
<let><var n="debug1"/><lit-tag v="12c"/></let>
            <call-macro n="haber__pp"><with-param pos="2"/><with-param pos="3"/></call-macro>

            <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
            <choose>
              <when>
                <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
                <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
              </when>
              <otherwise>
                <out>
                  <b pos="3"/>
                  <chunk name="pro_obj">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn_tn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>

            <call-macro n="tipus_verbs"><with-param pos="5"/></call-macro>
            <out>
              <b pos="4"/>
              <chunk name="inf">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="5" side="tl" part="temps"/></tag>
                  <tag><var n="tipus_verb"/></tag>
                  <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV175b"/></tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="sep"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<!-- cuidado: no funciona bien con doble ENC: se necesita una regla más: jura quitársela a Rhodes -->
    <rule comment="REGLA: VERB conjugat INF ENC (quería casarse -> volis geedziĝi)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="inf"/>
        <pattern-item n="enc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>
        <call-macro n="control_pron"><with-param pos="3"/><with-param pos="1"/><with-param pos="2"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <choose>
           <when>
             <test>
               <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="caber"/></equal>
             </test>
           <let><clip pos="1" side="tl" part="lemh"/><lit v="indi"/></let>
           <let><clip pos="1" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
           <let><var n="tipus_verb2"/><lit-tag v="imp"/></let>
           <let><var n="vimpers"/><lit-tag v="impers"/></let>
           </when>
        </choose>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV274"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>

        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <out>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV275"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="2" side="tl" part="sep"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_prn"/>
                  <clip pos="3" side="tl" part="tipus_prn_tn"/>
                  <clip pos="3" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


<!-- cuidado: no funciona bien con doble ENC: se necesita una regla más: ha jurado quitársela a Rhodes -->
    <rule comment="REGLA: HABER PP INF ENC (quería casarse -> volis geedziĝi)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="inf"/>
        <pattern-item n="enc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"><with-param pos="1"/></call-macro>
        <call-macro n="control_pron"><with-param pos="4"/><with-param pos="1"/><with-param pos="3"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <choose>
           <when>
             <test>
               <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="caber"/></equal>
             </test>
           <let><clip pos="1" side="tl" part="lemh"/><lit v="indi"/></let>
           <let><clip pos="1" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
           <let><var n="tipus_verb2"/><lit-tag v="imp"/></let>
           <let><var n="vimpers"/><lit-tag v="impers"/></let>
           </when>
        </choose>

<let><var n="debug1"/><lit-tag v="81"/></let>
        <call-macro n="haber__pp"><with-param pos="1"/><with-param pos="2"/></call-macro>

        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <out>
          <b pos="2"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV276"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="3"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="4" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="4" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="4" side="tl" part="pers"/></tag>
                  <tag><clip pos="4" side="tl" part="gen"/></tag>
                  <tag><clip pos="4" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_prn"/>
                  <clip pos="4" side="tl" part="tipus_prn_tn"/>
                  <clip pos="4" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: VERB conjugat + HABERinf + PP (quería haber cantado; EOes)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="haber_inf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV73"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser.inf"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="pp3"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERB conjugat + HABERinf + VERBser-pp + PP (kompleksa pasivo: pudo haber sido cantado; EOes)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="haber_inf"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
-->
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV74"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser.inf"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: VERB conjugat + HABERinf + VERBser-pp + PP + POR  (kompleksa pasivo: pudo haber sido cantado; EOes)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="haber_inf"/>
        <pattern-item n="ser-pp"/>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><lit-tag v="vbser"/></tag>        <!-- pasivo -->
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV75"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="esti"/>
              <lit-tag v="vbser.inf"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <out>
          <b pos="4"/> <!-- ŝanĝo al DE-->
          <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: HABER + PP (él ha leído aquel libro -> Li legis tiun libron; traducido a pasado) (EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
<let><var n="debug1"/><lit-tag v="12"/></let>
        <call-macro n="haber__pp">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: HABER + PP + QUE (ha dicho que -> diris ke;  para corregir el KE) (EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
<let><var n="debug1"/><lit-tag v="13"/></let>
        <call-macro n="haber__pp"><with-param pos="1"/><with-param pos="2"/></call-macro>

        <out>
        <b pos="2"/>
        <chunk name="ke">
          <tags>
            <tag><lit-tag v="cnjsub"/></tag>
          </tags>
          <lu>
            <lit v="ke"/>
            <lit-tag v="cnjsub"/>
          </lu>
        </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERB conjugat + INF + QUE (quería decir que; EOes)">
      <pattern>
        <pattern-item n="verbcj"/>
        <pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
        <choose>
           <when>
             <test>
               <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="caber"/></equal>
             </test>
           <let><clip pos="1" side="tl" part="lemh"/><lit v="indi"/></let>
           <let><clip pos="1" side="tl" part="a_verb"/><lit-tag v="vbser"/></let>
           <let><var n="vimpers"/><lit-tag v="impers"/></let>
           </when>
        </choose>
        <out>
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="vimpers"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV78"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="2"/>
                 <chunk name="ke">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: HAVER + PP + INF (ha decidido marchar -> decidis marŝi ) (EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verbs_like">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV79"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
          </when>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="haya"/><!--TAGGER-->
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV80"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
          </when>
            <otherwise>
            <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fts"/><!--fuéremos -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
             </choose>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV81"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: HAVER + PP + a + INF (ha sacado a bailar -> elitiris danci ) (EOes)">
      <pattern>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="a_de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV82"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
          </when>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="haya"/><!--TAGGER-->
                    </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV83"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
          </when>
            <otherwise>
            <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fts"/><!--fuéremos -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
             </choose>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV84"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="sep"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
            </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>




    <rule comment="REGLA: PROCLITIC PROCLITIC VERB conj (se le dijo -> oni diris al li; se lo dijo -> diris ĝin al li; me lo dijo -> diris ĝin al mi')">
      <pattern>
        <pattern-item n="proenc"/>
        <pattern-item n="proenc"/>
        <pattern-item n="verbcj"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>

          <choose>
              <when>  <!-- mirem si el primer pronom és SE -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
               <choose>
                <when>  <!-- mirem si el segon pronom és me/te/le/nos/os -->
                  <test>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                  </test>
                  <out> <!-- se le dijo -> oni diris al li -->
                    <chunk name="prn" case="caseFirstWord">
                      <tags>
                        <tag><lit-tag v="SN"/></tag>
                        <tag><lit-tag v="tn"/></tag>
                        <tag><lit-tag v="sg"/></tag>
                        <tag><lit-tag v="nom"/></tag>
                      </tags>
                      <lu>
                        <lit v="oni"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="tn"/>
                        <lit-tag v="3"/>
                        <lit-tag v="4"/>
                      </lu>
                    </chunk>
                    <b pos="2"/>
                    <chunk namefrom="nverb">
                      <tags>
                        <tag><lit-tag v="SV"/></tag>
                        <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                        <tag><clip pos="3" side="tl" part="temps"/></tag>
                        <tag><clip pos="3" side="tl" part="pers"/></tag>
                        <tag><clip pos="3" side="tl" part="nbr"/></tag>
                        <tag><var n="tipus_verb"/></tag>
                        <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV85"/></tag>
                      </tags>
                      <lu>
                        <clip pos="3" side="tl" part="lemh"/>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="sep"/>
                        <lit-tag v="3"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                    </chunk>
                    <b pos="1"/>
                    <!-- poso directe perquè si és indirecte, sovint pot funcionar amb directe, però no al revés -->
                    <chunk name="pro_obj">
                      <tags>
                        <tag><lit-tag v="SN"/></tag>
                        <tag><lit-tag v="obj"/></tag>
                        <tag><clip pos="2" side="sl" part="pers"/></tag>
                        <tag><clip pos="2" side="tl" part="gen"/></tag>
                        <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      </tags>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <clip pos="2" side="tl" part="a_prn"/>
                        <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                        <clip pos="2" side="sl" part="pers"/>
                        <clip pos="2" side="tl" part="gen"/>
                        <clip pos="2" side="tl" part="nbr"/>
                      </lu>
                    </chunk>
<!-- amb objecte indirecte
                    <chunk name="pro_indirecte">
                      <tags>
                        <tag><lit-tag v="SP"/></tag>
                        <tag><lit-tag v="subj"/></tag>
                        <tag><clip pos="2" side="sl" part="pers"/></tag>
                        <tag><clip pos="2" side="tl" part="gen"/></tag>
                        <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      </tags>
                      <lu>
                        <lit v="al"/>
                        <lit-tag v="pr"/>
                      </lu>
                      <b pos="1"/>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <clip pos="2" side="tl" part="a_prn"/>
                        <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                        <clip pos="2" side="sl" part="pers"/>
                        <clip pos="2" side="tl" part="gen"/>
                        <clip pos="2" side="tl" part="nbr"/>
                      </lu>
                    </chunk>
-->
                  </out>
                </when>
                <otherwise>
                <out> <!-- se lo dijo -> diris ĝin al mi -->
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV86"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="pro_directe">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="2" side="sl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SP"/></tag>
                      <tag><lit-tag v="subj"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="sl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="prpers"/>
                      <lit-tag v="prn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="sl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="3" side="sl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
                </otherwise>
               </choose>
              </when>
              <otherwise>
                <out> <!-- me lo dijo -> diris ĝin al mi -->
                  <chunk namefrom="nverb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV87"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="pro_directe">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="2" side="sl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SP"/></tag>
                      <tag><lit-tag v="subj"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="sl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PROCLITIC PROCLITIC (me los; te los; se la EOes)">
      <pattern>
        <pattern-item n="proenc"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
          <choose>
              <when>  <!-- mirem si és SE -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
                <out>
                  <chunk name="prn" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><lit-tag v="tn"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                      <tag><lit-tag v="nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="oni"/>
                      <lit-tag v="prn"/>
                      <lit-tag v="tn"/>
                      <lit-tag v="3"/>
                      <lit-tag v="4"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_directe">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="2" side="sl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="2" side="sl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
                <let>
                  <clip pos="1" side="tl" part="tipus_prn"/>
                  <lit-tag v="subj"/>
                </let>
                <out>
                  <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SP"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PRO_FUERTE PROCLITIC (a mi me, a ella le, ... regla para simplirficar el clitic doubling EOes 'a mi me' -> min)">
      <pattern>
        <pattern-item n="profort"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="sl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PRO_FUERTE ADV PROCLITIC (a mi me, a ella le, ... regla para simplirficar el clitic doubling EOes 'a mi no me' -> min ne)">
      <pattern>
        <pattern-item n="profort"/>
        <pattern-item n="adv"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
         <b pos="1"/>
          <chunk name="pro_directe">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="1" side="sl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PRO_FUERTE PROCLITIC (a mi)">
      <pattern>
        <pattern-item n="profort"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="pro_obj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn_tn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="sl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PRO_FUERTE PROCLITIC PROCLITIC (a mi me lo, a ella se los, ... regla para simplificar el clitic doubling EOes 'a mi me lo' -> lin al mi )">
      <pattern>
        <pattern-item n="profort"/>
        <pattern-item n="proenc"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="3" side="sl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="3" side="sl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                    <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SP"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                  </chunk>

                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PROCLITIC (EO)">
      <pattern>
        <pattern-item n="proenc"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

          <choose>
              <when>  <!-- mirem si és SE o EN per no fer res-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="refXXX"/>
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="adv"/>
                    </equal>
                  </or>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: el traduim) -->        
                <out>
                  <chunk name="pro_obj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                   <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_prn"/>
                      <clip pos="1" side="tl" part="tipus_prn_tn"/>
                      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="1" side="sl" part="pers"/>
                      <clip pos="1" side="tl" part="gen"/>
                      <clip pos="1" side="tl" part="nbr"/>
                   </lu>

                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: INF_IMP + ENCL + ENCL + INF (haver-los de comprar; poder-los comprar; voler-los comprar; deixa'l llegir. El clític passa al final EO- )">
      <pattern>
        <pattern-item n="inf_ger_imp"/>
        <pattern-item n="enc"/>
        <pattern-item n="enc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>

        <out> <!-- primer pintem els vebrs -->
          <chunk name="verb_enc_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV122"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
             <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
             </lu>
          </chunk>
         <b/>
        </out>

                <out>
                  <chunk name="pro_directe">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="3" side="sl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_prn"/>
                      <clip pos="3" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="3" side="sl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
     <!-- Si el primer clitic és SE: l'eliminem; si no el fem objecte indirecte (eliminem les formes SE ja que estadísticament sembla justificat, la majoria de vegades són benefactius, etc...-->

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="2" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->
                <let>
                  <clip pos="2" side="tl" part="tipus_prn"/>
                  <lit-tag v="subj"/>
                </let>
                <out>
                  <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SP"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: INF_IMP + ENCL + INF (EOes; poderlos comprar; EO- )">
      <pattern>
        <pattern-item n="inf_ger_imp"/>
        <pattern-item n="enc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>

        <out> <!-- primer pintem els vebrs -->
          <chunk name="verb_enc_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV123"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
             <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
             </lu>

          </chunk>
        </out>

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="2" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_prn"/>
                      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                      <clip pos="2" side="sl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERBMOD + ENCL + INF (haver-los de comprar EO- )">
      <pattern>
        <pattern-item n="verbm"/>
        <pattern-item n="enc"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>                      
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="imp"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="temps"/>
              <lit-tag v="inf"/>
            </let>
          </when>
        </choose>
        <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                        <clip pos="2" side="sl" part="lem"/>
                        <lit v="es"/><!--és 'sp' -->
                      </equal>
                </test>

        <out>
          <chunk name="mod_x" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV124"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>        
            <b pos="1"/>
             <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
             </lu>
          </chunk>
        </out>
             </when>
<otherwise>
        <out>
          <chunk name="mod_enc_x" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV125"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>        
            <b pos="1"/>
             <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
             </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<!--
    <rule comment="REGLA: VERBMOD + ENCL (per quan va davant desconegudes, perquè no peti: poder-ho xxx - )">
      <pattern>
        <pattern-item n="verbm"/>
        <pattern-item n="enc"/>
      </pattern>
      <action>                      
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="imp"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="temps"/>
              <lit-tag v="inf"/>
            </let>
          </when>
        </choose>
        <choose>
              <when> 
                <test>
                    <equal>
                        <clip pos="2" side="sl" part="lem"/>
                        <lit v="es"/>
                      </equal>
                </test>

        <out>
          <chunk name="mod_x" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
<tag><lit-tag v="SV126"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>        
          </chunk>
        </out>
             </when>
<otherwise>
        <out>
          <chunk name="mod_enc_x" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
<tag><lit-tag v="SV127"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>        
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


    <rule><!--VERBMOD + ENCL + ENCL (per quan va davant desconegudes, perquè almenys no peti: poder-los-ho xxx - )-->
      <pattern>
        <pattern-item n="verbm"/>
        <pattern-item n="enc"/>
        <pattern-item n="enc"/>
      </pattern>
      <action>                      
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="imp"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="temps"/>
              <lit-tag v="inf"/>
            </let>
          </when>
        </choose>
        <out>
          <chunk name="mod_enc_enc_x" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="sl" part="pers"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV128"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + POR -> querido por -> amata de">
      <pattern>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
      </pattern>
      <action>               
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="1" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + POR + INF -> volgut per menjar -> dezirita por manĝi">
      <pattern>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>               
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="1" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="por">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV129"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + ADV + POR -> querido también por -> amata ankaŭ de">
      <pattern>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
        <pattern-item n="por"/>
      </pattern>
      <action>               
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="1" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + ADV + POR + INF -> volgut també per menjar -> dezirita ankaŭ por manĝi">
      <pattern>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
        <pattern-item n="adv"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>               
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="1" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="2" side="tl" part="a_adv"/></tag>
              <tag><clip pos="2" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="por">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV130"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADV + PARTICIPI + POR -> molt estimat per -> tre amata de">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
      </pattern>
      <action>               
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="2" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADV + PARTICIPI + POR + INF -> molt volgut per menjar -> tre dezirita por manĝi">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>               
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="2"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="2" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="por">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV132"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADV + PARTICIPI + ADV + POR -> molt estimat també per -> tre amata ankaŭ de">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv"/>
        <pattern-item n="por"/>
      </pattern>
      <action>               
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="2" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
              <tag><clip pos="3" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="3"/> <!-- ŝanĝo al DE-->
          <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADV + PARTICIPI + ADV + POR + INF -> molt volgut també per menjar -> tre dezirita ankaŭ por manĝi">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
        <pattern-item n="por"/>
        <pattern-item n="adv"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>               
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="2"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="5"/></call-macro>
        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="2" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
              <tag><clip pos="3" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="3"/> <!-- ŝanĝo al POR-->
          <chunk name="por">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="inf">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="5" side="tl" part="a_verb"/></tag>
              <tag><clip pos="5" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV133"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI (perquè no enviï gènere ni nombre quan va sol (per tal que no doni error). Caldrà posar-lo tb en les regles d'adjectiu">
      <pattern>
        <pattern-item n="pp"/>
      </pattern>
      <action>               
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>         
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pp"/>
              <clip pos="1" side="sl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERBinf no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
        <pattern-item n="inf"/>
      </pattern>
      <action>             
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="1"/></call-macro>

        <out>
          <chunk name="inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV131"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: VERBger no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
        <pattern-item n="ger"/>
      </pattern>
      <action>             
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"> <with-param pos="1"/></call-macro>
        <out>
          <chunk name="verbger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV88"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- *** duoblaj neoj *** -->

    <rule comment="NO VERBconj ADVNEG ( no canta nunca -> neniam kantas )">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="verbcj"/>
        <pattern-item n="advneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV89"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO VERBhaber ADVNEG + PP (no ha nunca leído - neniam legis ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="haber"/>
        <pattern-item n="advneg"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV90"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV91"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NO PRON VERB ADVNEG ( no me como nunca -> neniam formanĝas; no lo como nunca -> neniam manĝas lin ) (EO)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="verbcj"/>
        <pattern-item n="advneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="3"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <call-macro n="set_temps"><with-param pos="3"/></call-macro>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
              <tag><clip pos="4" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nverb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="vimpers"/></tag>
              <tag><var n="vigxi1"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV166b"/></tag>
<tag><var n="debug1"/></tag>
<tag><var n="debug2"/></tag>
<tag><var n="debug3"/></tag>
<tag><var n="debug4"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <var n="vigxi2"/>
              <clip pos="3" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out> 

        <!-- ni certiĝas, ĉu necesas aldoni la pronomon -->
        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="pro_obj">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn_tn"/>
                  <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>

        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>

    <rule comment="REGLA: NO PRON HABER + PP ADVNEG (no lo ha leído nunca -> neniam legis ĝin)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="pro"/>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="advneg"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="4"/></call-macro>
        <call-macro n="control_pron"><with-param pos="2"/><with-param pos="3"/><with-param pos="4"/></call-macro>
<let><var n="debug1"/><lit-tag v="11b"/></let>

        <!-- ni certiĝas, ĉu necesas aldoni "oni" -->
        <choose>
          <when>
            <test><equal><var n="aldoni_oni"/><lit v="aldoni"/></equal></test>
            <out>
              <chunk name="prpers" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.subj.p3.mf.sg"/></tag>
                </tags>
                <lu>
                  <lit v="oni"/>
                  <lit-tag v="prn.tn.sg.nom"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
        </choose>

        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="5" side="tl" part="a_adv"/></tag>
              <tag><clip pos="5" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
        <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>

        <call-macro n="haber__pp"><with-param pos="3"/><with-param pos="4"/></call-macro>

        <choose>
          <when>
            <test><equal><var n="forigi_ref"/><lit v="forigi"/></equal></test>
          </when>
          <otherwise>
        <out>
          <b/>
          <chunk name="pro_obj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="tipus_prn_ref"/></tag>
              <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn_tn"/>
              <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
          </otherwise>
        </choose>

        <call-macro n="f_bcond"><with-param pos="4"/><with-param pos="5"/></call-macro>
        <let><var n="vimpers"/><lit-tag v="pers"/></let>
        <let><var n="vigxi1"/><lit-tag v="ne_iĝi"/></let>
        <let><var n="vigxi2"/><lit v=""/></let>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="NO VERBconj PRONNEG ( no canta nada -> kantas nenion; no canta nadie -> neniu kantas )">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="verbcj"/>
        <pattern-item n="pronneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>

        <choose>
          <when>
            <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="nadie"/></equal></test>
            <out>
              <chunk name="prn_nosubj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.tn.3.4"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
          <otherwise>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
          </otherwise>
        </choose>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV95"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <choose>
          <when>
            <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="nadie"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="2"/><with-param pos="3"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="2"/>
              <chunk name="prn_nosubj">
                <tags>
                  <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.tn.3.4"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="NO VERBhaber PRONNEG + PP (no ha leído nada - legis nenion; no ha leído nadie - neniu legis )">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="pronneg"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>

        <choose>
          <when>
            <test><equal caseless="yes"><clip pos="4" side="sl" part="lem"/><lit v="nadie"/></equal></test>
            <out>
              <chunk name="prn_nosubj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.tn.3.4"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <let><var n="caseFirstWord"/><lit v="aa"/></let>
          </when>
          <otherwise>
            <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>
          </otherwise>
        </choose>

<let><var n="debug1"/><lit-tag v="61"/></let>
        <call-macro n="haber__pp"><with-param pos="2"/><with-param pos="3"/></call-macro>

        <choose>
          <when>
            <test><equal caseless="yes"><clip pos="4" side="sl" part="lem"/><lit v="nadie"/></equal></test>
            <call-macro n="f_bcond"><with-param pos="3"/><with-param pos="4"/></call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="3"/>
              <chunk name="prn_nosubj">
                <tags>
                  <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.tn.3.4"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="NO VERBconj PREP PRONNEG ( no canta por nada -> kantas por nenio; no canta con nadie -> kantas kun neniu)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="verbcj"/>
        <pattern-item n="prep"/>
        <pattern-item n="pronneg"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>
        <let><var n="nprep"/><clip pos="3" side="tl" part="lem"/></let>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>

        <out>
          <chunk namefrom="nverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipus_verb"/></tag>
              <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV95"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="sep"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk namefrom="nprep">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <lit-tag v="prn.tn.3.4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="NO VERBhaber + PP PREP PRONNEG (no ha cantado por nada - kantis por nenio; no ha cantado con nadie - kantis kun neniu )">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="haber"/>
        <pattern-item n="pp"/>
        <pattern-item n="prep"/>
        <pattern-item n="pronneg"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="3"/></call-macro>
        <let><var n="nprep"/><clip pos="5" side="tl" part="lem"/></let>

        <call-macro n="f_bcond"><with-param pos="1"/><with-param pos="2"/></call-macro>

<let><var n="debug1"/><lit-tag v="62"/></let>
        <call-macro n="haber__pp"><with-param pos="2"/><with-param pos="3"/></call-macro>

        <out>
          <b pos="3"/>
          <chunk namefrom="nprep">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="4"/>
          <chunk name="prn_nosubj">
            <tags>
              <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <lit-tag v="prn.tn.3.4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="NO VERBconj ADVNEG PRONNEG ( no canta nunca nada -> neniam kantas ion )">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="verbcj"/>
        <pattern-item n="advneg"/>
        <pattern-item n="nada"/>
      </pattern>
      <action>            
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="2"/></call-macro>
        <call-macro n="set_temps"><with-param pos="2"/></call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV98"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <lit-tag v="3"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO VERBhaber ADVNEG PRONNEG PP (n'a jamais rien lu - neniam legis ion ; es tradueix per passat) (EO)">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="haber"/>
        <pattern-item n="advneg"/>
        <pattern-item n="nada"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="tipus_verbs"><with-param pos="5"/></call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV99"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
          </when>
            <otherwise>
        <call-macro n="set_temps2"><with-param pos="2"/><with-param pos="5"/></call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="3" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk namefrom="nverb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
<tag><lit-tag v="SV02"/></tag>
                    </tags>
                    <lu>
                      <lit v="esti"/>
                      <lit-tag v="vbser"/>
                      <lit-tag v="3"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="prn_nosubj">
                    <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
                    </tags>
                    <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <!--********************************** HACER + TIEMPO ********************************************* -->

    <rule comment="VERBhacer NUM NOMtemps (fa tres setmanes -> antaŭ tri semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="num"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="3"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="3"/></call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_num"/>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_nom"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer DET NOMtemps (hace algunas semanas -> antaŭ kelkaj semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="det"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="3"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="3"/></call-macro>

        <choose>
           <when> 
            <test><equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="alguno"/></equal></test>
            <let><clip pos="2" side="tl" part="lem"/><lit v="kelka"/></let>
            <let><clip pos="2" side="tl" part="a_det"/><lit-tag v="det.qnt"/></let>
           </when> 
           <when> 
             <test><equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="uno"/></equal></test>
             <choose>
               <when> 
                 <test><equal><clip pos="2" side="sl" part="nbr"/><lit-tag v="sg"/></equal></test>
                 <choose>
                   <when> 
                     <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="tiempo"/></equal></test>
                     <let><clip pos="2" side="tl" part="lem"/><lit v="kelka"/></let>
                     <let><clip pos="2" side="tl" part="a_det"/><lit-tag v="det.qnt"/></let>
                   </when> 
                   <otherwise> 
                     <let><clip pos="2" side="tl" part="lem"/><lit v="unu"/></let>
                     <let><clip pos="2" side="tl" part="a_det"/><lit-tag v="det.ind"/></let>
                   </otherwise> 
                 </choose>
               </when> 
               <otherwise> 
                 <let><clip pos="2" side="tl" part="lem"/><lit v="kelka"/></let>
                 <let><clip pos="2" side="tl" part="a_det"/><lit-tag v="det.qnt"/></let>
               </otherwise> 
             </choose>
           </when> 
        </choose>
        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_det"/>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_nom"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer ADJ NOMtemps (hace pocas semanas -> antaŭ malmultaj semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="3"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="3"/></call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer UNO NUM NOMtemps (hace unas tres semanas -> antaŭ ĉirkaŭ tri semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="un_pl"/>
        <pattern-item n="num"/>
        <pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="4"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="4"/></call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_num"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer NOM_DA DE NOMtemps (hace millones de años -> antaŭ milionoj da jaroj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
        <pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="4"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="4"/></call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer DET NOM_DA DE NOMtemps (hace unos millones de años -> antaŭ kelkaj milionoj da jaroj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="det"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
        <pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="5"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="5"/></call-macro>

        <choose>
           <when> 
            <test><equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="alguno"/></equal></test>
            <let><clip pos="2" side="tl" part="lem"/><lit v="kelka"/></let>
            <let><clip pos="2" side="tl" part="a_det"/><lit-tag v="det.qnt"/></let>
           </when> 
           <when> 
             <test><equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="uno"/></equal></test>
             <choose>
               <when> 
                 <test><equal><clip pos="2" side="sl" part="nbr"/><lit-tag v="sg"/></equal></test>
                 <choose>
                   <when> 
                     <test><equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="tiempo"/></equal></test>
                     <let><clip pos="2" side="tl" part="lem"/><lit v="kelka"/></let>
                     <let><clip pos="2" side="tl" part="a_det"/><lit-tag v="det.qnt"/></let>
                   </when> 
                   <otherwise> 
                     <let><clip pos="2" side="tl" part="lem"/><lit v="unu"/></let>
                     <let><clip pos="2" side="tl" part="a_det"/><lit-tag v="det.ind"/></let>
                   </otherwise> 
                 </choose>
               </when> 
               <otherwise> 
                 <let><clip pos="2" side="tl" part="lem"/><lit v="kelka"/></let>
                 <let><clip pos="2" side="tl" part="a_det"/><lit-tag v="det.qnt"/></let>
               </otherwise> 
             </choose>
           </when> 
        </choose>
        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer ADJ NOM_DA DE NOMtemps (hace algunos millones de años -> antaŭ pluraj milionoj da jaroj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="adjADJ"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
        <pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="5"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="5"/></call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer NUM NOM_DA DE NOMtemps (hace cinco millones de años -> antaŭ kvin milionoj da jaroj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="num"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
        <pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="5"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="5"/></call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer NUM UN NOM_DA DE NOMtemps (hace unos cinco millones de años -> antaŭ ĉirkaŭ kvin milionoj da jaroj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="un_pl"/>
        <pattern-item n="num"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
        <pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="6"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="6"/></call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_num"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_nom"/>
              <clip pos="6" side="tl" part="gen"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="VERBhacer MAS DE NUM NOMtemps (fa menys de tres setmanes -> antaŭ malpli tri semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="mas"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="5"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
                <b pos="2"/>
            <lu>
              <lit v="ol"/>
              <lit-tag v="cnjsub"/>
            </lu>
                <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_num"/>
                      <clip pos="4" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                    </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_nom"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer QNT NOMtemps (fa algunes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="qnt"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
                    <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_det"/>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                    </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer IND NOMtemps (fa una setmana -> antaŭ unu semajno)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="un_sg"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
            <lu>
              <lit v="unu"/>
              <lit-tag v="num.sg.nom"/>
            </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer IND NOMtemps (fa unes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="un_pl"/>
        <pattern-item n="n_temps"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
            <lu>
              <lit v="kelka"/>
              <lit-tag v="det.qnt.pl.nom"/>
            </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer NOMtemps (fa setmanes -> antaŭ semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <!-- idem + que -->

    <rule comment="VERBhacer NUM NOMtemps (fa tres setmanes -> antaŭ tri semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="num"/>
        <pattern-item n="n_temps"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_num"/>
                      <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                    </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer MAS DE NUM NOMtemps (fa menys de tres setmanes -> antaŭ malpli tri semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="mas"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
        <pattern-item n="n_temps"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="5"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
                <b pos="2"/>
            <lu>
              <lit v="ol"/>
              <lit-tag v="cnjsub"/>
            </lu>
                <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_num"/>
                      <clip pos="4" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                    </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_nom"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer QNT NOMtemps (fa algunes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="qnt"/>
        <pattern-item n="n_temps"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
                    <lu>
                <clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_det"/>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
                    </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer IND NOMtemps (fa una setmana -> antaŭ unu semajno)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="un_sg"/>
        <pattern-item n="n_temps"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
            <lu>
              <lit v="unu"/>
              <lit-tag v="num.sg.nom"/>
            </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer IND NOMtemps (fa unes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="un_pl"/>
        <pattern-item n="n_temps"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
            <lu>
              <lit v="kelka"/>
              <lit-tag v="det.qnt.pl.nom"/>
            </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERBhacer NOMtemps (fa setmanes -> antaŭ semajnoj)">
      <pattern>
        <pattern-item n="hacer"/>
        <pattern-item n="n_temps_pl"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
            <tags>
              <tag><lit-tag v="adv"/></tag>
            </tags>
            <lu>
              <lit v="antaŭ"/>
              <lit-tag v="pr"/>
            </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="nom"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <!--************************************ ALTRES ************************************************ -->

    <rule comment="UNK">
      <pattern>
        <pattern-item n="unknown"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="unknown" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="unknown"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: ADV">
      <pattern>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nadv"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nadv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
              <tag><clip pos="1" side="tl" part="neg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: ADV ITG">
      <pattern>
        <pattern-item n="advitg"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>        
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: PRONOM tònic/interrogatiu/possessiu EO">
      <pattern>
        <pattern-item n="tn_itg_pos"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="prn_int" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: PRONOM indefinit i companyia (EO)">
      <pattern>
        <pattern-item n="tn"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="prn_nosubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: PRONOM relatiu EO">
      <pattern>
        <pattern-item n="relatiu"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="nom_cas"><with-param pos="1"/></call-macro>
        <call-macro n="nombre_nom"><with-param pos="1"/></call-macro>
  <choose>
     <when>   <!-- identificamos 'lo que' para reglas t2x-->
      <test>
       <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="lo que"/></equal>
      </test>
        <out>
          <chunk name="prn" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SNloque"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr" link-to="2"/>
              <lit-tag v="3"/>
            </lu>
          </chunk>
        </out>
     </when>

     <when>   <!-- identificamos 'el cual', el cual fijamos en nominativo -->
      <test>
       <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="el cual"/></equal>
      </test>
        <out>
          <chunk name="prn" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SNloque"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr" link-to="2"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
     </when>

     <otherwise>
        <let><var n="nrel"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nrel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SNrelatiu"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr" link-to="2"/>
              <lit-tag v="3"/>
            </lu>
          </chunk>
        </out>
     </otherwise>
      </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- ERROR: no funciona qd VERB + PREP + REL: se entera de que; caldria passar-ho a antaux1_t2x per tractar SV/SN + PREP + REL -->
<rule comment="REGLA: PREP + PRONOM relatiu EO( dels quals, pels que, als que ...)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="relatiu_prep"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="2"/>
        </call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <let><var n="nrel"/><clip pos="2" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="nrel">
            <tags>
              <tag><lit-tag v="SNrelatiu"/></tag>
              <tag><lit-tag v="rel"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn"/>
              <clip pos="2" side="tl" part="nbr" link-to="3"/>
                <lit-tag v="4"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PRN personal">
      <pattern>
        <pattern-item n="prpers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prpers" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: PRN personal MISMO">
      <pattern>
        <pattern-item n="prpers"/>
        <pattern-item n="mismo"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prpers" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="mem"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let><var n="caseFirstWord"/><lit v="aa"/></let>
      </action>
    </rule>


    <rule comment="REGLA: PRN obj">
      <pattern>
        <pattern-item n="pro"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_obj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn_ref"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn_tn"/>
              <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


 <rule comment="REGLA: CNJ">
      <pattern>
        <pattern-item n="cnj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="ncnj"/><clip pos="1" side="tl" part="lem"/></let>
        <!-- identificamos los 'ke' que no vienen de 'que' para que no sean convertidos después a 'kiu' -->
        <choose>
           <when>
            <test>
              <and>
                <equal caseless="yes"><clip pos="1" side="tl" part="lem"/><lit v="ke"/> </equal>
                <not><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="que"/> </equal></not>
              </and>
            </test>
           <let><var n="ncnj"/><clip pos="1" side="sl" part="lem"/></let>
           </when>
        </choose>
        <out>
          <chunk namefrom="ncnj" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="tags"/></tag>                
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

 <rule comment="REGLA: IJ">
      <pattern>
        <pattern-item n="ij"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>        
        <out>
          <chunk name="ij" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="tags"/></tag>                
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="REGLA: PREP">
      <pattern>
        <pattern-item n="prep"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule> <!-- REGLA: reset variables, hem afegit la coma per al pro-drop (cal veure el reset de variablesi EO)-->
      <pattern>
        <pattern-item n="sent"/>
      </pattern>
      <action>
        <let>
          <var n="nombre"/>
          <lit-tag v="sg"/>
        </let>
        <let>
          <var n="genere"/>
          <lit-tag v="m"/>
        </let>
        <choose>
          <when>
            <test>
              <not>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=";"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=","/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=":"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="..."/>
                  </equal>
                </or>
              </not>
            </test>        
            <let><var n="EOS"/><lit v="true"/></let>
          </when>
        </choose>
        <let><var n="EOS_soft"/><lit v="true"/></let>
        <out>
          <chunk name="punt">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule> <!-- REGLA: sent_coma (hem afegit regla per a la coma per al pro-drop (no l'imcloem a l'anterior per no fer el reset de variables EO))-->
      <pattern>
        <pattern-item n="sent_coma"/>
      </pattern>
      <action>
        <out>
          <chunk name="cm">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: COMA QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
        <pattern-item n="sent_coma"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <let><var n="case"/><lit-tag v="nom"/></let>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

   <choose>
     <when>
      <test>
              <in caseless="yes">
                 <clip pos="2" side="sl" part="lem"/>
                 <list n="locual"/>
              </in>
      </test>
        <let><clip pos="2" side="tl" part="lem"/><lit v="kio"/></let>
     </when>
     <otherwise>
        <let><clip pos="2" side="tl" part="lem"/><lit v="kiu"/></let>
     </otherwise>
   </choose>

   <choose>
     <when>
      <test>
       <equal>
        <clip pos="2" side="sl" part="nbr"/>
        <lit-tag v="pl"/>
        </equal>
      </test>
        <let><var n="nombre"/><lit-tag v="pl"/></let>
     </when>
     <otherwise>
        <let><var n="nombre"/><lit-tag v="sg"/></let>
     </otherwise>
   </choose>

        <let><var n="nrel"/><clip pos="2" side="tl" part="lem"/></let>
        <out>
          <chunk name="cm">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
                <b pos="1"/>
                 <chunk namefrom="nrel" >
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn"/>
                        <var n="nombre"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


  </section-rules>
</transfer>
